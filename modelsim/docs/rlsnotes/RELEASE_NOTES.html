
<HEAD>
<TITLE>6.5b Release Notes</TITLE>

</HEAD>
<HTML>
<body text="#000000" bgcolor="#FFFFFF" link="#0000EE" vlink="#551A8B" alink="#FF0000">
<CENTER>
<h1>
&nbsp;<a NAME="TOC"></a>Release Notes For Model<i>Sim</i> Altera 6.5b
</h1></center>

&nbsp;
<center><b>May 21 2009</b></center>

<br><br>
<center>
&nbsp;Copyright 1991-2009 Mentor Graphics Corporation
<br>
&nbsp;All rights reserved.
<br>
&nbsp;This document contains information that is proprietary to Mentor Graphics
<br>
&nbsp;Corporation. The original recipient of this document may duplicate this
<br>
&nbsp;document in whole or in part for internal business purposes only, provided
<br>
&nbsp;that this entire notice appears in all copies. In duplicating any part of
<br>
&nbsp;this document the recipient agrees to make every reasonable effort to
<br>
&nbsp;prevent the unauthorized use and distribution of the proprietary
<br>
&nbsp;information.
</center>

<br>
<center>
&nbsp; TRADEMARKS: The trademarks, logos and service marks ("Marks") used herein
<br>
&nbsp; are the property of Mentor Graphics Corporation or other third parties.
<br>
&nbsp; No one is permitted to use these Marks without the prior written consent
<br>
&nbsp; of Mentor Graphics or the respective third-party owner. The use herein
<br>
&nbsp; of a third-party Mark is not an attempt to indicate Mentor Graphics as a
<br>
&nbsp; source of a product, but is intended to indicate a product from, or
<br>
&nbsp; associated with, a particular third party. The following are trademarks of
<br>
&nbsp; of Mentor Graphics Corporation: Questa, ModelSim, JobSpy, and Signal Spy.
<br>
&nbsp; A current list of Mentor Graphics trademarks may be viewed at
<br>
&nbsp; www.mentor.com/terms_conditions/trademarks.cfm.
</center>

<br>
<center>
&nbsp; End-User License Agreement: You can print a copy of the End-User License
<br>
&nbsp; Agreement from: www.mentor.com/terms_conditions/enduser.cfm.
</center>
<br>

<p>
<h4>
<hr WIDTH="100%"></h4>
<li>
<b>Product Installation and Licensing Information</b></li>

<br>For brief instructions about product installation please visit the
"install_notes" file in www.model.com. The install_notes
file can be viewed at:
<br><a href="http://www.model.com/products/release.asp">http://www.model.com/products/release.asp</a>
<br>For detailed information about product installation and licensing see
the ModelSim Start Here Guide. The manual can be downloaded from:
<br><a href="http://www.model.com/support/documentation.asp">http://www.model.com/support/documentation.asp</a>
<br>&nbsp;
<li>
<b>Release Notes Archives</b></li>
<br>For release notes of previous versions visit the release notes archive
at: <a href="http://www.model.com/support/default.asp">http://www.model.com/support/default.asp</a>
<br>or find them in the installed modeltech tree in &lt;path to modeltech installation&gt;/docs/rlsnotes
<br>&nbsp;
<li>
<b>How to get Support</b></li>
<p>Model<i>Sim</i> Altera is supported by Altera Corporation
<ul>
<!--
<li>Telephone Support
<p>
Call 800-800-3753 or 408-544-7000
<br>&nbsp;
<br>&nbsp;
<li>Email Support
<p><a href="mailto:support@altera.com">support@altera.com</a>
<br>&nbsp;
<br>&nbsp;
-->
<li>World-Wide-Web Support
<p><a href="http://www.altera.com/mySupport">http://www.altera.com/mySupport</a>
<br>&nbsp;
</ul>
<br>&nbsp;
<p>
<h4>
<hr WIDTH="100%"></h4>
<h3>
<b>Index to Release Notes</b></h3>

<blockquote>
<li>
<u><a href="#keyinfo">Key Information</a></u></li>

<li>
<u><a href="#uidefects">User Interface Defects Repaired in 6.5b</a></u></li>

<li>
<u><a href="#verilogdefects">Verilog Defects Repaired in 6.5b</a></u></li>

<li>
<u><a href="#plidefects">PLI Defects Repaired in 6.5b</a></u></li>

<li>
<u><a href="#vhdldefects">VHDL Defects Repaired in 6.5b</a></u></li>

<li>
<u><a href="#flidefects">FLI Defects Repaired in 6.5b</a></u></li>

<li>
<u><a href="#vitaldefects">VITAL Defects Repaired in 6.5b</a></u></li>

<li>
<u><a href="#systemcdefects">SystemC Defects Repaired in 6.5b</a></u></li>

<li>
<u><a href="#assertiondefects">Assertion Defects Repaired in 6.5b</a></u></li>

<li>
<u><a href="#mixeddefects">Mixed Language Defects Repaired in 6.5b</a></u></li>
<li>
<u><a href="#coverage">Coverage Defects Repaired in 6.5b</a></u></li>

<li>
<u><a href="#generaldefects">General Defects Repaired in 6.5b</a></u></li>

<li>
<u><a href="#mgcdefects">Mentor Graphics DRs Repaired in 6.5b</a></u></li>

<li>
<u><a href="#knowndefects">Known Defects in 6.5b</a></u></li>

<li>
<u><a href="#productchanges">Product Changes to 6.5b</a></u></li>

<li>
<u><a href="#newfeatures">New Features Added to 6.5b</a></u></li>
</blockquote>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="keyinfo"></a><b>Key Information</b>
<ul>
<li>The following lists the supported platforms:
	<ul>
	<li>win32aloem - Windows XP, Vista
	<li>sunos5aloem - Solaris 8, 9, 10
	<li>linuxaloem - RedHat 9 and higher, RedHat Enterprise Linux 3, 4 and 5, SUSE Linux Enterprise Server 9.0, 9.1 and 10.
	</ul>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="uidefects"></a><b>User Interface Defects Repaired in 6.5b</b>
<ul>
<li>
Dragging the wave slider could cause a crash.  The problem has been fixed.</li>
<li>
The help menu and toolbar fails to access the HTML documents on the Windows platform. This issue has been fixed.
</li>
<li>
Extremely long dataset names (> 80 characters) could cause a crash when a virtual signal was created.</li>
<li>
The simulator could crash if waveform comparison was done on SystemVerilog string variables. This has been corrected.
</li>
<li>
When using Codelink or any design that adds items to the design structure via an FLI call during simulation, the U/I may crash if the Objects window Value column is set as the sort column.  This issue has been resolved.</li>
<li>
The Restart dialog would fail to appear if you tried to open it from an undocked window with the main session window iconified. This has been fixed.</li>
<li>
Analog formatted waveforms could lose their min/max settings following a restart. This problem has been fixed.</li>
<li>
An error could cause waveforms of busy signals to stick at the same value for an interval of time, zooming in would reveal the correct values.  This error has been fixed.
</li>
<li>
Waveform compare failed for complex escaped identifiers in signal paths.</li>
<li>
User defined radix did not work with hexadecimal numbers larger than 32-bits. This issue is now fixed.
</li>
<li>
The Verification Management Tracker window allows filtering which can be invoke with the "Filter" -> "Apply" menu.  This menu did not work correctly in the "Tools" menu in the undocked window or the RMB popup menu after a second .ucdb file was opened.  This has been fixed.</li>
<li>
After clicking on an attribute value in the Verification Management Tracker window to edit it, if the user typed the escape key (to back out of rather than save any changes) an error resulted and the original value was lost.  This has been fixed.</li>
<li>
The Verification Management Tracker window could not cope with spaces in the names of attributes and therefore in the column header names. It used only the first word of the name and also muddled the column data.  This has been fixed.</li>
<li>
Loading source object database performance has been enhanced.</li>
<li>
The parsing of the argument file by using the <b>-f</b> command line option behaves
differently when called from shell prompt vs. the vsim prompt. This issue is now fixed.
</li>
<li>
Several of the CLI coverage commands, <b>coverage tag</b>, <b>coverage analyze</b>, <b>coverage clear</b>, and <b>coverage unlinked</b>, used the option <b>-recurse</b> instead of <b>-recursive</b> in at least one of:<br>
<OL> 
<LI>the reference manual, 
<LI>the command completion help in the GUI, 
<LI>the usage message, or 
<LI>the parsing of the command. 
</OL> 
Now <b>-recursive</b> is used consistently throughout for all of the CLI coverage commands.
</li>
<li>
Using an invalid option with the <b>coverage clear</b> CLI command (example: <b>coverage clear -bogus</b>) caused a crash.  This has been fixed.
</li>
<li>
The U/I will loose keyboard focus, appearing to be unresponsive, until the focus is directed to another application and back again.  This will happen when a window pane is close, and possibly under other conditions.  This issue has been resolved.</li>
<li>
Nologging any Verilog signal with WLF threads enabled could result in a crash. The problem showed up for a customer logging with:<br>
<code>
log -r /*; nolog -all</b> 
</code>
<br>
The error has been corrected.
</li>
<li>
The display of signals when zoomed out was sometimes incorrect.  The correct view would appear after zooming in.   The problem has been corrected.</li>
<li>
A signal was displayed incorrectly when zoomed out, showing a gap of no activity where the signal was active.  Zooming in showed the correct view.  The error has been corrected.</li>
<li>
Verilog arrays of nets were sometimes displayed incorrectly in the Wave window.  After an interval of time, the display would show the values for the array elements as 'X' even though new values had been set. The error has been fixed.
</li>
<li>
Creating a Wave window group using the <b>wave group</b> command or the wave group dialog did not preserve the properties (e.g. color, radix, etc.) on the signals being grouped.
</li>
<li>
Several Wave window group height related issues have been resolved including:
<ul>
<li>group item height changing on restart,
<li>height switch on <b>add wave</b> command not working for groups, 
<li>grouping of objects of different height could cause the height of the group item to be incorrect.
</ul>
</li>
<li>
Several Wave window group issues regarding nested groups have been addressed including: <ul>
<li>deleting a nested group caused parent group failure,
<li>not being able to create a group containing selected groups using the popup "Group..." menu selection,
<li>not being able to create nested groups with the <b>wave group</b> command,
<li>creating a nested wave group would always put the new group at the end of the parent group.
<li>ungrouping a nested group would destabilize the parent group.
</ul>
</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="verilogdefects"></a><b>Verilog Defects Repaired in 6.5b</b>
<ul>
<li>
A module description starting within a `include file, but completed after returning from the `include, would sometimes associate a wrong or non-existent source file with subsequent declarations. This would sometimes be exhibited by a vopt internal error:
<code>
** Error: name.v(12): Internal error: ../../../src/vlog/vl_cpyidl.c(262) obj < maxFiles
</code>
</li>
<li>
Support for the <b>-source</b> option to the Verilog compiler and/or vopt would neglect to close files when consecutive errors occurred within the same file, but on subsequently decreasing line numbers. Eventually, the compiler might exit with an error message similar to:
<code>
** Error: (vopt-7) Failed to open file "filename" in w+ mode.
   Too many open files. (errno = EMFILE)
</code>
</li>
<li>
vlog's <b>-E</b> switch would incorrectly write tabs as '\t' to the output file.
</li>
<li>
Use of <b>+nospecify</b> on the vsim command line with optimized gate-level cells could crash the simulation.
</li>
<li>
An event on a class variable could result in a memory leak.  This problem started occurring in 6.5 and is now fixed in 6.5b.</li>
<li>
Loading multiple instances of the same design unit in Verilog and using a Verilog configuration or `uselib to specify one of the instances be a different type of design unit could cause a crash, unexpected errors, or unexpected simulation results depending on the type of design unit. Specifying a VHDL design unit when a Verilog module is expected or specifying a Verilog design unit when VHDL is expected would cause a crash. Specifying a UDP in place of a module could cause unexpected errors for port connectivity. Specifying a program block when a module was expected could cause statements executing in the module instances to execute in the reactive region.</li>
<li>
Fixed spurious error about X or Z values during randomization of 2-state enumerated type variables.</li>
<li>
Detected loading error #3609 for forward hierarchical reference to optimized cell port from SystemVerilog interface. </li>
<li>
When three or more bind packages are specified on the vsim command line, vsim will hang.  This issue has been resolved.</li>
<li>
The simulator had incorrectly set real values to zero on implicit conversion in Verilog simulations.
</li>
<li>
In some cases involving sign extension, generate condition or loop conditions could be evaluated incorrectly for optimized designs.</li>
<li>
After an Iteration Limit was reached due to a zero-delay oscillation, simulation stopped with an error.
</li>
<li>
While parsing external constraint for a class that is extended from a parameterized class, vlog used to give the wrong error message "Invalid scope specified for constraint block".  This error is now fixed.
</li>
<li>
In some cases events triggered by changes to a SystemVerilog class property failed to execute the waiting code.</li>
<li>
Event controls and wait statements on automatic variables inside a fork block would sometimes fail to activate the waiting code.</li>
<li>
Connecting a SystemVerilog port of type real with a SystemVerilog variable of type int would pass incorrect (junk) values. This has been fixed.
</li>
<li>
vopt would error out with an incorrect "Failed to find &lt;design-unit&gt; in hierarchical name" error when the SystemVerilog bind construct was used to bind to a module instantiated inside black boxed regions. This has been fixed.
</li>
<li>
vsim would produce an incorrect "Unresolved reference to .*" error when binding to an instance inside a black-boxed region using the SystemVerilog bind construct. This has been fixed.
</li>
<li>
Using a SystemVerilog <code>break</code> or <code>continue</code> statement inside a <code>repeat</code> loop with a constant repeat count of 1 caused a fatal error during the simulation run.</li>
<li>
Using a virtual interface type as a type parameter on a module instantiation caused vopt to crash with a segmentation fault.</li>
<li>
Using array query functions like <code>$left</code>, <code>$right</code>, <code>$high</code>, <code>$low</code> or <code>$bits</code> on fixed-sized arrays of dynamically sized objects incorrectly reported an error when used in a constant expression.</li>
<li>
Fixed false error involving ext. refs. to elements of modports through a virtual interface.</li>
<li>
Hierarchical references into signals in a clocking block would sometimes cause vopt to crash.</li>
<li>
A non-blocking assignment to a field select of an array element where the type of the variable is a parameter type and there is also an assignment to the array index in the same time step may produce incorrect results.
</li>
<li>
In certain cases vopt would produce a segmentation violation when coverage
was enabled.</li>
<li>
Certain kinds of non-blocking assignments where the left hand side of the assignment contains a part select, bit select, array index, and/or field select may create a process that causes a crash if the user interface queries for a list of active processes between the time when the NBA is scheduled and the time the NBA is executed.
</li>
<li>
Certain cases might have produced the wrong results for case statements where the number of Case Clauses is less than 2. This has now been fixed.
</li>
<li>
Extended VCD did not consider the contribution of specify path drivers.</li>
<li>
The vopt command sometimes reported the error "Failed to find 'super' in hierarchical name." incorrectly  for static method calls that should have resolved into a super class.</li>
<li>
Declaring a parameter inside a class body and using that parameter to declare a type could cause vsim to crash during elaboration in the -novopt flow.  This crash did not occur for parameterized classes declared like: "<code>class C #(...parameter list...)</code>"</li>
<li>
Always_comb sensitivity was not being computed correctly for external references with indexed names.</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="plidefects"></a><b>PLI Defects Repaired in 6.5b</b>
<ul>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="vhdldefects"></a><b>VHDL Defects Repaired in 6.5b</b>
<ul>
<li>
If a named association in a port map is partially associated to OPEN, then
if the open subelement is a slice or record, elaboration would cause a crash.</li>
<li>
In the non-vopt flow compiled SDF annotator could not resolve instances under VHDL
generate blocks. Therefore, SDF annotations targeted to such instances failed.</li>
<li>
Running vcom or vopt with Finite State Machine detection enabled
(+acc or +acc=f) on Windows platforms would sometimes result in an
error message like:<br>
<code>
  # ** Fatal: Unexpected signal: 11. 
</code>
</li>
<li>
If a process is stopped in a subprogram with signal parameters, the simulator could crash while trying to get information on the signal parameter to display in the GUI.
</li>
<li>
If SDF is applied to a design containing VHDL, the values of record type generics may become corrupt. Additionally, the tool may report the error:<br>
<code> 
Defparam iteration limit of 10 exceeded. 
</code>
</li>
<li>
Package standard functions to_bstring, to_binary_string, to_octal_string and
to_hex_string were visible regardless of what VHDL language version was used. This caused potential conflicts with same named subprograms declared in other packages.
Now these names are only visible when language version VHDL2008 is used.</li>
<li>
The <b>-check_synthesis</b> option warning message #1400 could sometimes report the incorrect file name when vcom was invoked with more than one file name on its command line.
</li>
<li>
A suite of <b>-lint</b> messages for vcom has been implemented. These assist in
pointing out some potential simulation errors.
<br>
Message #1292 occurs when the prefix of a slice name has an unknown index range direction
(such as, but not limited to, when the prefix is of an unconstrained array
type) and the discrete range of the slice has a known direction.  
<br>
Message #1298 occurs when the prefix of a slice name is of an unconstrained array type and
the discrete range of the slice is locally static.
<br>
Message #1293 occurs when the prefix of an indexed name is of an unconstrained array type and
an index value is locally static.
</li>
<li>
In some cases when a constant vector is driving an input port whose dimensions are defined using a generic, vsim may fail giving an invalid operand kind error. This is now fixed.
</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="flidefects"></a><b>FLI Defects Repaired in 6.5b</b>
<ul>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="vitaldefects"></a><b>VITAL Defects Repaired in 6.5b</b>
<ul>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="systemcdefects"></a><b>SystemC Defects Repaired in 6.5b</b>
<ul>
<li>
The <b>-sc_arg</b> vsim command line option takes the argument that follows it on the command line and makes it available for access within the user's SystemC code.  Some vsim command line options, notably <b>-f</b>, <b>-h</b>, and <b>-l</b>, could not be passed with the <b>-sc_arg</b> option.  Instead, they were interpreted as options to vsim and were not accessible from SystemC. This has been fixed.
</li>
<li>
Logging SystemC structures containing float types could sometimes cause a crash on the Solaris platform.
</li>
<li>
Fixed scparse-gcc error for ambiguous "+=".
</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="assertiondefects"></a><b>Assertion Defects Repaired in 6.5b</b>
<ul>
<li>
Implemented some performance improvements in the assertion browser GUI for designs with a large number of assertion instances.  This was done mainly for the browser's flat mode, not the hierarchical mode.</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="mixeddefects"></a><b>Mixed Language Defects Repaired in 6.5b</b>
<ul>
<li>
If a Verilog or SystemVerilog module that instantiates a VHDL design unit is place
through use of the SystemVerilog bind statement, the design would fail to elaborate and crash.
</li>
<li>
A Verilog parameter of vector type would sometimes produce an incorrect error message in vopt saying "generic type mismatch" when connected to a VHDL generic of integer type. This was only for cases where VHDL instantiates Verilog and has been fixed now.
</li>
<li>
VHDL resolved subtypes of record were not correctly handled in scgenmod and gen_xml utility. This has been fixed.</li>
<li>
SignalSpy would give an incorrect type mismatch error with single width VHDL vectors (e.g. 4 to 4) as source and single width Verilog vectors (like [0:0]) as destination. This has been fixed.</li>
<li>
scgenmod would generate an incorrect error saying 'unsupported type' for VHDL 'unsigned' datatypes. This has been fixed.</li>
<li>
Wrong values were propagated while using init signal_driver/init_signal_spy when the source object was a bit-select of a packed Verilog vector. This has been fixed.</li>
<li>
When incremental flow was used and there were multiple ports in the bound Verilog module with the same case-insensitive name (e.g. hdl_sig and HDL_Sig), port binding would be incorrect when binding to a VHDL target scope using the SystemVerilog bind construct. If the type of these ports were different then an incorrect error message would be received for a type-mismatch. But when these ports were of the same type, wrong port-connections would sometimes be made silently. This has been fixed and now the port connections are always correct for such cases.
</li>
<li>
Binding a Verilog module/program instance to a specific instance of a VHDL target using the SystemVerilog bind construct would not work when the bind_target_instance identifier resolves to both an instance name and a module name. An example of such usage is:
<br>
<code>
bind sub:sub_inst assertmod inst1();
</code>
</li>
<li>
vsim would propagate incorrect values when the SystemVerilog bind construct was used for binding Verilog with VHDL and VHDL integer generics were overridden with real values. This has been fixed and now an error message will be issued for such cases.
</li>
<li>
When the SystemVerilog bind construct is used to bind Verilog to VHDL target scopes, vsim would sometimes report an incorrect "incompatible mode" error for inout ports when invoked with the <b>-novopt</b>. This has been fixed. 
</li>
<li>
The wildcard pattern ".*" used with port connections did not work at the SystemVerilog-VHDL mixed language boundary when mixed with other named connections. This has been fixed.
</li>
<li>
For SystemVerilog instantiating VHDL, generics of type string would acquire incorrect values when overridden with SystemVerilog parameters of type string. This has been fixed.
</li>
<li>
scgenmod would exit with a segmentation fault when invoked with the <b>-s</b> command-line option on a VHDL entity containing a port of type 'time'. This has been fixed.
</li>
<li>
Connecting an input port in the bound SystemVerilog module with an output port of the target VHDL would not work while binding to VHDL target scopes using the SystemVerilog bind construct when port actual expressions contained hierarchical references. This has been fixed.
</li>
<li>
A Verilog port of packed vector type (of bit, reg or logic) having negative bound(s) would produce an incorrect error message in vopt when connected to a VHDL port of equivalent type. This was only for cases where VHDL instantiates Verilog and has been fixed.
</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="coverage"></a><b>Coverage Defects Repaired in 6.5b</b>
<ul>
<li>
Fixed a Tcl stacktrace error when a design is loaded in the simulation GUI in coverage mode which is not compiled with code coverage options.
</li>
<li>
Fixed a merge warning message for weight mismatch in merging regular instances with installed instances.
</li>
<li>
vcover merged did not allow installed paths without the leading path separator.
</li>
<li>
Test tracker showed that the testplan section was linked when it was not. This has been fixed.
</li>
<li>
Source code is annotated to HTML reports even if the <b>-nosource</b> argument
is passed to the <b>coverage/vcover report</b> command.
This has been fixed.
</li>
<li>
Toggle coverage for packed fixed-size arrays was not reported correctly. This has been fixed.</li>
<li>
Coverage pragma 'toggle_ignore' would not exclude variables inside SystemVerilog interfaces. This has been fixed.</li>
<li>
vlog/vcom would silently ignore incorrect usage of coverage pragmas. This has been fixed and a warning message will now be issued whenever a coverage pragma is used outside design unit scope.</li>
<li>
When focused expression coverage finds more rows in an expression/condition than the maximum limit, the warning issued would report incorrect number of rows that the expression needs. This has been fixed.</li>
<li>
Command line options <b>-nocovershort</b> and <b>-covershort</b> were incorrectly being handled by vsim. These options are only applicable for vlog, vcom and vopt. This has been fixed.
</li>
<li>
Toggle counts in the Object window would ignore 'countlimit' and continue to increment beyond this limit. This has been fixed.
</li>
<li>
The UDP truth table for expressions containing "nand" and "nor" operators was incorrect. This has been fixed.
</li>
<li>
When compiled with <b>-coverExcludeDefault</b>, statements inside the default block were not excluded. This has been fixed.
</li>
<li>
Some additional constructs have been supported to make toggle coverage pragmas more flexible and user friendly. Here are the three constructs that are supported:<br>
<br>
<code>
/* Using all without the double quotes. */<br>
//coverage toggle_ignore sig_arr all<br>
<br>
/* Specifying list without double quotes. */<br>
//coverage toggle_ignore sig_arr 1 4-5<br>
<br>
/* Omitting the word all to implicitly imply excluding all bits. */<br>
//coverage toggle_ignore sig_arr
</code>
</li>
<li>
Excluding individual SystemVerilog and VHDL enum elements using the <b>toggle add -exclude</b> command was broken. This has been fixed.
</li>
<li>
Verilog expressions containing single-bit vectors (like 'opcode[0:0] | opcode[7:7]') as operands would sometimes evaluate to incorrect values when the values of these operands were 'z'. This would only happen when code coverage was enabled, and has been fixed.
</li>
<li>
Multi-dimensional fixed-size packed Verilog arrays were not being considered for toggle coverage. This has been fixed.</li>
<li>
Toggle coverage reports would incorrectly show single dimensional unpacked wire arrays as single toggle nodes. This has been fixed.</li>
<li>
Multi-dimensional array elements would incorrectly appear as single-dimensional array elements in the FEC reports. This has been fixed.
</li>
<li>
Toggle coverage would not count 0->X->1 and 1->X->0 as valid transitions. This has been fixed.</li>
<li>
SystemVerilog unpacked structures were not being automatically included for toggle coverage when the design was compiled using <b>+cover=t</b> and vsim was invoked with <b>-coverage</b> command-line option. This has been fixed.
</li>
<li>
Toggle coverage reports would show the number of counts of a real variable under the 'Toggled' column instead of the 'Count' column. This has been fixed.</li>
<li>
Statement coverage reports would incorrectly show statements containing class headers and endclass as excluded by pragma, even when there was no active coverage pragma in the file. This has been fixed.</li>
<li>
The Source window showed the exclusion icon on the "case" line in viewcov mode. It's now the same as live simulation mode where the exclusion icons are shown
only on the case item lines.
</li>
<li>
The number of active case items in the Missed Branch window did not reflect the fact that some case items of a case branch are excluded.
</li>
<li>
The expression and condition report summary lines in the Details window were
not consistent for UDP and FEC rows when all rows are excluded.</li>
<li>
The Total Coverage and Assertions columns were empty in the Structure window when coverage in under VHDL architecture.
</li>
<li>
The excluded coverage items are now marked as "E-hit" in details text report
when items are hit (having nonzero count). This is the default behavior now. 
The option <b>-noexcludedhits</b> is added in coverage text report to disable the
showing of excluded hits.
</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="generaldefects"></a><b>General Defects Repaired in 6.5b</b>
<ul>
<li>
It was possible to specify a target file for vencrypt that would match a source file which caused the source file to be overwritten. A read only source file would cause a crash.</li>
<li>
For some designs, vsim could not load a vopt design which referenced -archive libraries.
</li>
<li>
sdfcomp errors when the working library is undefined or unwritable because the sdfcomp output file can not be created.
</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="mgcdefects"></a><b>Mentor Graphics DRs Repaired in 6.5b</b>
<ul>
<li>
dts0100362733 - Support for array reduction functions ( esp sum() ) and "with" statements to bi-directional constraints in SV.</li>
<li>
dts0100401884 - Lack of documentation on running in batch mode.</li>
<li>
dts0100544835 - VHDL Generic to Verilog parameter binding without foldable values.</li>
<li>
dts0100545367 - Analog format loses min/max values after a restart.</li>
<li>
dts0100568827 - Enhance force to list signals forced by force_signal().</li>
<li>
dts0100573768 - Prevent port collapsing in Verilog for VCD output.</li>
<li>
dts0100579170 - Wave window crash when working in the Wave window during a run.</li>
<li>
dts0100579336 - An event on a class variable could result in a memory leak.</li>
<li>
dts0100579998 - vsim -view crashes when the WLF file has a long name.</li>
<li>
dts0100580446 - Source window does not reflect results of coverage exclusions.</li>
<li>
dts0100581012 - Difference between the behavior of vopt and novopt for Verilog configurations.</li>
<li>
dts0100581300 - When I dock the wave window and then undock it, it does not remember it's original size.</li>
<li>
dts0100575931 - vopt crashes when module binding with code coverage enabled.</li>
<li>
dts0100581743 - Multiple bind packages hang vsim in novopt mode.</li>
<li>
dts0100582234 - Waveforms appear to have gaps that display no activity.</li>
<li>
dts0100583594 - Restart dialog does not appear when main application is minimized.</li>
<li>
dts0100583787 - User defined radix did not work with hexadecimal numbers larger than 32-bits.</li>
<li>
dts0100584644 - Crash at simulation due to sort Value column in the Objects window.</li>
<li>
dts0100585677 - Bad NBA code generated for LHS containing index into parameterized array of record type.</li>
<li>
dts0100585990 - Compiler reports error message against wrong source file.</li>
<li>
dts0100586566 - Fatal error received “# ** Fatal: (SIGSEGV) Bad handle or reference.</li>
<li>
dts0100584979 - Big lag time in 6.5/6.5a in loading source object database compared to 6.3f.</li>
<li>
dts0100584880 - Inconsistent parsing of the argument file.</li>
<li>
dts0100583147 - Optimization does not work with modport in a SystemVerilog design.</li>
<li>
dts0100524086 - Pass a real to an integer parameter in binding.</li>
<li>
dts0100572093 - Bind with hierarchical signal path to VHDL.</li>
<li>
dts0100534129 - The number of FEC rows reported in the warning message does not match the total number.</li>
<li>
dts0100503870 - coverExcudeDefault switch doesn't work correctly.</li>
<li>
dts0100533590 - When compiling with -coverExcludeDefault, it doesn't exclude the statements following the 'when others=>' line.</li>
<li>
dts0100427260 - Add new toggle coverage stats.</li>
<li>
dts0100585855 - sdfcom errors when loading into vsim 6.5a and no work library exists.</li>
<li>
dts0100585800 - ** Fatal: (SIGSEGV) Bad handle of reference.</li>
<li>
dts0100586932 - Internal error in vopt due to virtual interface type parameter.</li>
<li>
dts0100588024 - WLF file displays incorrect values.</li>
<li>
dts0100543992 - Cannot create parent group for selected groups in Wave window.</li>
<li>
dts0100241614 - Request checker to check and report if a code coverage hit occurred even though it had been excluded.</li>
<li>
dts0100585649 - Problem with unique case.</li>
<li>
dts0100586886 - Direction in eVCD file generated by vsim is wrong.</li>
<li>
dts0100568912 - Parameter in class causes crash with -novopt.</li>
<li>
dts0100585125 - always_comb implicit sensitivity list is incorrect in novopt.</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="knowndefects"></a><b>Known Defects in 6.5b</b>
<ul>
<li>
On Windows platform, If Destructor breakpoint on SystemC object is set via command "bp -c < function_name >", Debugger sometimes does not stop at the breakpoint. </li>
<li>
On Windows platform, if breakpoint is set on a SystemC object destructor, Debugger sometimes crashes while quitting simulation. This crash can be avoided by setting env variable SC_NO_LIB_UNLOAD, which will prevent unloading of the shared library.</li>
<li>
The simulator will hang if it tries to create a WLF file while running
on a Linux 64-bit operating system from a working directory which does
not support large files. One common instance of this is executing an
<b>add wave</b> command, when the working directory was created under an
older 32-bit Linux OS.
<br>
This is a Linux operating system bug and cannot be fixed by the
simulator.
<br>
A workaround for release 6.3 and above is to execute the simulator
with command line option <b>-wlfnolock</b>.

</li>
<li>
The stack unwinder on the linux_x86_64 OS is unreliable.  The unwinder is the fundamental facility provided by the OS for sampling where program execution is at.  The unwinder is necessary for gathering performance data.  This is a known issue with this specific OS and is why performance data will be incorrect or non-existent on this platform.  </li>
<li>
Users should be mindful of enabling both performance profiling and memory profiling at the same time.  Memory profiling requires much overhead process, and it can skew the results of the performance profiling data.</li>
<li>
On certain (RedHat) Linux Operating System versions the "-restore" feature
occasionally fails. This is due to the memory allocation security (anti-hacking) feature of Linux. RedHat Enterprise release v.3 update3 was the first version to have this security feature. In these Linux releases two consecutive program invocations do not get the same memory allocation foot-print. For the "-restore" feature the simulator relies on having the same memory allocation foot-print. Users are advised to re-try this feature a few times as on average 3 out of 5 attempts are successful. In recent Linux versions, an override for this anti-hacking feature is provided. Please use it at your own discretion. </li>
<li>
In code coverage, there is no way to exclude a condition or expression table
row for the case of more than one table on a line and the table in question
is not the first table on the line.</li>
<li>
Support of debugging C code during a quit command was disabled on Windows. The corresponding C Debug command <b>cdbg stop_on_quit</b> was also disabled on Windows.
</li>
<li>
Specparams can be learned during the learn flow, but cannot be found on consumption. The workaround is to use full +acc deoptimization.</li>
<li>
On Red Hat Enterprise Linux release 5 platform, If SIGSEGV signal occurs during the simulation and if CDEBUG is on, C-debugger traps the signal, and when continued, vsim gets terminated right away, instead of exiting with proper error status.</li>
<li>
If you have code coverage on in VHDL and get the following sort of warning:<br>
# Loading mypackage(body) <br>
# Internal Warning in process_sub: failed to find local inlined subprogram 
called in pkg<br>
#     (mypackage ); flags 7 filenum 0 lineno 241 tokno 2<br>
#     Disabling code coverage for this inlined subprogram<br>
Then add the <b>-noFunctionInline</b> option to <b>vcom</b> for that package, 
or reorder the subprograms in the package body to be defined before they are used.</li>
<li>
Code coverage is now giving results for SystemVerilog nested modules, 
interfaces and program blocks. One remaining issue is that if a nested
module has more than one instance, only one of the instances will show
code coverage data, and the data therein will be the sum of all the
instances of that module. This will be improved in a later release.</li>
<li>
The vpiPorts iteration on vpiEnumNet, vpiIntegerNet, and vpiStructNet VPI objects has been disabled as it was incomplete and unsafe to use.
</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="productchanges"></a><b>Product Changes to 6.5b</b>
<ul>
<li>
The breakpoint behavior of the <b>-cond</b> option has changed to re-parse expressions each time the breakpoint is hit.  This allows expressions with local references to work.  Note that because of this change, condition expressions referencing items outside the context of the breakpoint must use absolute names.  This is different from the previous behavior where a relative signal name would be resolved at the time the bp command was issued, allowing the breakpoint to work even though the relative signal name was inappropriate when the breakpoint is hit.
</li>
<li>
Errors involving assignments to enums in vlog, vopt, or vsim are now printed using message #8386, which is suppressible.</li>
<li>
In previous versions of the simulator, a random seed was sometimes assigned to processes created for non-blocking-assignments, and this could affect random-stability, depending on optimizations that were in effect.  In 6.5, this is no longer the case; but it may result in different results involving randomization from 6.4x.
</li>
<li>
FSM recognition reporting in the coverage FSM flow has been made consistent with the FSMDEBUG flow. Both flows will only dump the number of FSMs detected by default. The <b>-fsmverbose</b> option can be used to display FSM RECOGNITION INFO, if required.
</li>
<li>
The default keyboard shortcuts for the cut/copy/paste operations have been changed to match the Windows standard of Control-X/C/V respectively. A new preference setting (Main/PCEditBindingsOnUnix) category has been added to control this. Note, any opened text windows at the time the preference is changed will not see the change until the next time the GUI is started.
</li>
<li>
A new search capability has been added for all windows that previously supported use of the Contains toolbar and/or the "Edit > Find..." menu. This new "Search Bar" will appear along the bottom edge of the window it's being used from. It completely replaces the old Contains toolbar and individual Find dialog boxes. For those windows that support both filtering and finding, the mode for the Search Bar would need to be set accordingly (the last selected mode for the Search Bar is remembered between sessions). The various ways of choosing the mode are:
<ul>
<li>use Control+M while the Search Bar has the keyboard focus
<li>select the mode from the Search Bar's menu (located on icon at far left)
<li>click the label text which indicates the current mode
</ul>
<br>
The current mode of the Search Bar is displayed as a text label to the left of the type-in field, as well as by the icon located at the left edge of the type-in area.

The main benefit of having the filtering functionality within the Search Bars is that each window now has its own unique type-in field as opposed to having to share the common Contains toolbar. The latter could lead to confusion over what is shown in the toolbar and the filtered content of the windows. There is also a simple history mechanism to allow saving search strings for later use. The keyboard shortcuts to support this are:
<ul>
<li>Control+S -- save current search text into history list
<li>Control+P -- retrieve previous search text
<li>Control+N -- retrieve next search text
</ul>
</li>
<li>
You must now change the encoding of your character representations with the <b>encoding system</b> command, where the syntax is:<br>
<code>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; encoding system &lt;encoding_name>
</code>
<br>
To obtain a complete list of &lt;encoding_name> options, use the <b>encoding names</b> command with no arguments.

Previously you could perform this action with the View > Encoding menu, which has been removed.
</li>
<li>
The VPI compatibility for this release defaults to the 2009 IEEE 1800 standard. This introduces, among other things, new VPI types for packed arrays of struct nets and struct variables. Normative files vpi_user.h, sv_vpi_user.h and vpi_compatibility.h are supplied with the latest known standardized contents. Users should however be aware that at the time of release the IEEE 1800-2009 was not complete.</li>
<li>
Event order differences between an optimized and unoptimized design have been reduced with this release. Specifically, event propagation through Verilog zero-delay continuous assignment and primitive networks has been changed such that optimizations involving these networks are much less likely to result in behavioral differences. However, note that a design depending on the old event ordering may not behave the same with this release. Both, the unoptimized and optimized behavior may change, but should match each other more closely. Ideally, "races" should be removed from the design, but, if desired, the user may revert back to the old event ordering by specifying the <b>-noimmedca</b> vsim option or by setting the following line in the <i>modelsim.ini</i> file:<br>
<code>
ImmediateContinuousAssign = 0
</code>
</li>
<li>
Code coverage information is no longer saved under design units in UCDB files. Instead, code coverage data for design units are constructed on-the-fly when a UCDB file is opened in IN_MEMORY mode. The information is constructed by merging all code coverage data from instances in the UCDB into the corresponding design unit. This has two main implications for UCDB API users:
<ol>
<li>Using APIs to create code coverage data under design units is not allowed anymore and the API calls will error out.</li>
<li>Opening UCDB files in read-streaming mode will not generate callbacks under design units since there is no code coverage data anymore.</li>
</ol>
</li>
<li>
The PrefMain(ShowFilePane) preference is now obsolete. The Files pane will follow current layout as do all other windows.</li>
<li>
The <b>view *</b> command is now obsolete.  The argument "*" will be ignored with no note warning or error.  A window name or window name prefix must be supplied in order to open or configure any windows.
</li>
<li>
When a non-existent entry of an associative array is read, a default value is returned.  We now re-initialize that value each time, in case the user modified it.  The exception is if the user set an explicit default value.<br>
For example:<br>
<code>
integer bar[integer][$];  // Assoc. array of queues.
<br>task execute();
<br>// Below, bar[2] doesn't exist, so we return the default value,
<br>// an empty queue.  The user is pushing 777 onto it.
<br>bar[2].push_back(777);
<br><br>
// Referencing bar[2] again now returns an empty queue.  In previous
<br>// versions, we returned {777}.  The $display now prints 'x'.
<br>$display ("bar [2][0]    = %0d", bar[2][0]);
</code> 
</li>
<li>
Some changes have been made to toggle coverage specific vsim command-line options.
<br>
<ul>
<li>The <b>-togglevlogints</b> option has been removed as SystemVerilog integer types are now supported for toggle coverage by default.
<li>The following vsim command-line options have been changed as they were inconsistent with our convention.
<ul>
<li>-togglenoints       CHANGED TO   -notoggleints
<li>-togglenovlogints   CHANGED TO   -notogglevlogints
</ul>
</ul>
</li>
<li>
We now treat a slice of a string as a string. This seems obvious, but it is not described anywhere in the LRM. The following is now supported:<br>
<code>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string line = "Hello there";<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string targ;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; initial targ = line[0:5];
</code>
</li>
<li>
The option <b>-fsmdebug</b> has been deprecated. A new letter code 'f' has been added to <b>+acc</b> to enable FSM detection and debugging. This also makes it possible to have module and instance bases selection with FSM debug. +acc without any letter code with automatically enable +acc=f.
</li>
<li>
Conditional timing check expressions are displayed as they appear in the HDL description.  In the past equivalent conditions were displayed.  For example:<br>
<code> 
  &&& (cond === 0)
</code>
<br>
was displayed as
<br>
<code>
  &&& (~cond)
</code>
</li>
<li>
In some cases the <b>-vmake</b> flag will be required to correctly capture Verilog source file dependencies.
</li>
<li>
Invalid vsim command line switches used with <b>-load_elab</b> will now by default generate a warning message and not an error message. The warning message has a Message Id associated with it and is thus suppressible.
</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="newfeatures"></a><b>New Features Added to 6.5b</b>
<ul>
<li>
Verilog port direction is not enforced by the language or tools. For this reason VCD dumpports uses the location of the drivers on the net to determine whether the value being dumped is input or output. A new option, <b>-force_direction</b>, has been added to force dumpports to use the specified port direction and not driver location to determine direction.
</li>
<li>
In constraints, array reduction methods with the "with" clause were not supported (e.g. arr.sum() with (int'(item)) == 12;). Now, this support has been added.
</li>
<li>
The command <b>force</b>, without any options, produces a list of existing forces.  The forces listed were only forces that occurred due to prior <b>force</b> commands.  This listing behavior has been enhanced to also list forces coming from the Signal Spy signal_force()/$signal_force() calls from within VHDL/Verilog source code.
</li>
<li>
The extraction parameter "searchpath" is added to the xml2ucdb utility
(command-line option <b>-searchpath</b>) to specify one or more directories to be
searched by xml2ucdb looking for test plans' XML files. 
The option allows directory searching for nested test plans defined in the XML to be set on the
command line and within the ini file. This then allows the testplan to be just a filename.
</li>
<li>
The vlog command now has a new switch <b>-novtblfixup</b> that affects the behavior of virtual method calls in SystemVerilog class constructors. By default, while a constructor is executing the <code>this</code> reference is treated as if it is a handle to the type of the active <code>new()</code> method which implies that virtual method calls resolve will not execute methods of an uninitialized class type.  With <b>-novtblfixup</b> the type of <code>this</code> does not change during construction, and virtual method calls behave as they would in normal class methods.
</li>
<li>
<b>vdir -l</b> will now display the start location of a design unit. The location is displayed in the form &lt;filename&gt;:&lt;line number&gt;.
</li>
<li>
A new option <b>-modelsimini /path/to/modelsim.ini</b> has been added to vsim, vcom, vlog, vopt, sccom, scgenmod, vgencomp, vmap, vdir, vdel, vmake, vcover, sm_entity and hm_entity. The default ini settings would be set using the file specified with the option.
</li>
</ul>
</BODY>
</HTML>
