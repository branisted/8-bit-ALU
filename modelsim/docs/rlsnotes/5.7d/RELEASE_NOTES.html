
<HEAD>
<TITLE>5.7d Release Notes</TITLE>
</HEAD>
<HTML>
<body text="#000000" bgcolor="#C0C0C0" link="#0000EE" vlink="#551A8B" alink="#FF0000">
<CENTER>
<h1>
&nbsp;<a NAME="TOC"></a>Release Notes For Model<i>Sim</i> Altera 5.7d
<br></h1></center>
<center>
&nbsp;Copyright Model Technology, a Mentor Graphics
<br>
&nbsp;Corporation company, 2003 - All rights reserved.
</center>


&nbsp;
<blockquote>
<blockquote>
<center><b>May 15 2003</b></center>
</blockquote>
</blockquote>
<p>
<h4>
<hr WIDTH="100%"></h4>
<li>
<b>Product Installation and Licensing Information</b></li>

<br>For brief instructions about product installation please visit the
"install_notes" file on the Model Technology web site. The install_notes
file can be viewed at:
<br><a href="http://www.model.com/products/release.asp">http://www.model.com/products/release.asp</a>
<br>For detailed information about product installation and licensing see
the ModelSim Start Here Guide. The manual can be downloaded from:
<br><a href="http://www.model.com/support/documentation.asp">http://www.model.com/support/documentation.asp</a>
<br>&nbsp;
<li>
<b>Release Notes Archives</b></li>
<br>For release notes of previous versions visit the release notes archive
at: <a href="http://www.model.com/support/default.asp">http://www.model.com/support/default.asp</a>
<br>or find them in the installed modeltech tree in &lt;path to modeltech installation&gt;/docs/rlsnotes
<br>&nbsp;
<li>
<b>How to get Support</b></li>
<p>This OEM product is supported by Altera Corporation
<ul>
<!--
<li>Telephone Support
<p>
Call 800-800-3753 or 408-544-7000
<br>&nbsp;
<br>&nbsp;
<li>Email Support
<p><a href="mailto:support@altera.com">support@altera.com</a>
<br>&nbsp;
<br>&nbsp;
-->
<li>World-Wide-Web Support
<p><a href="http://www.altera.com/mySupport">http://www.altera.com/mySupport</a>
<br>&nbsp;
</ul>
<br>&nbsp;
<p>
<h4>
<hr WIDTH="100%"></h4>
<h3>
<b>Index to Release Notes</b></h3>

<blockquote>
<li>
<u><a href="#keyinfo">Key Information</a></u></li>

<li>
<u><a href="#uidefects">User Interface Defects Repaired in 5.7d</a></u></li>

<li>
<u><a href="#verilogdefects">Verilog Defects Repaired in 5.7d</a></u></li>

<li>
<u><a href="#plidefects">PLI Defects Repaired in 5.7d</a></u></li>

<li>
<u><a href="#vhdldefects">VHDL Defects Repaired in 5.7d</a></u></li>

<li>
<u><a href="#flidefects">FLI Defects Repaired in 5.7d</a></u></li>

<li>
<u><a href="#vitaldefects">VITAL Defects Repaired in 5.7d</a></u></li>

<li>
<u><a href="#mixeddefects">Mixed Language Defects Repaired in 5.7d</a></u></li>

<li>
<u><a href="#generaldefects">General Defects Repaired in 5.7d</a></u></li>

<li>
<u><a href="#mgcdefects">Mentor Graphics DRs Repaired in 5.7d</a></u></li>

<li>
<u><a href="#knowndefects">Known Defects in 5.7d</a></u></li>

<li>
<u><a href="#productchanges">Product Changes to 5.7d</a></u></li>

<li>
<u><a href="#newfeatures">New Features Added to 5.7d</a></u></li>
</blockquote>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="keyinfo"></a><b>Key Information</b>
<ul>
<li>
The following platforms will be discontinued as of the ModelSim 5.8 release:<br>
<UL>
<LI>Redhat Linux 6.0 
<LI>Redhat Linux 6.1
<LI>AIX 4.2
</UL>

</li>
<li>
You must recompile or refresh your models if you are moving forward from 5.7 
Betas or 5.6x or earlier release versions. See "Regenerating your Libraries" 
in the ModelSim Start Here Guide for more information on refreshing your models. 
</li>
<li>
Acrobat reader version 4.0 or greater must be used to read any
.pdf file contained in ModelSim version 5.5c or greater.

</li>
<li>
Product changes and new features mentioned here are introduced in the 5.7d 
release. If you are migrating to the 5.7d release from 5.6x or earlier releases,
please also consult version 5.7x release notes for product changes and new 
features introduced during the 5.7 patch releases. The previous version 
release notes can be found in your modeltech installation directory at 
docs/rlsnotes.
</li>
<li>
The HP-UX 10.20 platform is no longer supported as of the ModelSim
5.7 release. The hp700 platform executables are built on HP-UX 11.0.
Please note that in order for FLI/PLI shared libraries to be
loaded and executed correctly by the hp700 version of vsim, they
must be compiled and linked on HP-UX 11.0.
</li>
<li>
Beginning with the 5.6 release (on Windows platforms only),
attempts to link in libvsim.lib or tk83.lib using the Microsoft
Visual C++ linker version 5.0 will fail with a message similar to
"Invalid file or disk full: cannot seek to 0xaa77b00". Microsoft
Visual C++ version 6.0 should be used.

</li>
<li>The following lists the supported platforms:
   <ul>
   <li>win32aloem - Windows 98, Me, NT, 2000, XP
   <li>sunos5aloem - Solaris 2.6, 7, 8
   <li>hp700aloem - HP-UX 11
   </ul>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="uidefects"></a><b>User Interface Defects Repaired in 5.7d</b>
<ul>
<li>
User-specified preference geometries that were partial (only specified size or location) or used offsets with South or East gravity (i.e. WxH-X-Y) were not handled correctly.  These alternate forms of geometry specification are now supported.</li>
<li>
Added the Verilog 2001 keywords to the Source window keyword highlighting list.</li>
<li>
If you use two or more Wave windows, the <b>add wave -window &lt wname&gt sig1</b> command now sets wname as the default Wave window. </li>
<li>
Statement coverage reports did not mark FOR...GENERATE and IF...GENERATE
(VHDL) statements as being executed because these statements are evaluated at
elaboration time. These statements no longer produce coverage information, and
therefore don't appear as unexecuted in coverage reports.</li>
<li>
Colorization of the transcript took excessive time if a line starting with
# **********
appeared in the transcript. Lines like this can be generated by VHDL textio
or the Verilog $display system task.  The # ** confused the pattern matching
code for assert messages.</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="verilogdefects"></a><b>Verilog Defects Repaired in 5.7d</b>
<ul>
<li>
The Verilog file I/O tasks such as $fdisplay, $fmonitor, etc. did not check that the file or multichannel descriptors were valid. An error message is now given for invalid types.
 </li>
<li>
Removed "none" from the Verilog 2001 reserved word list. </li>
<li>
The simulator crashed when a generated instantiation was accessed with an out-of-range index.
</li>
<li>
<b>vlog</b> incorrectly required a ";" at the end of an attribute list inside of an attribute statement.
</li>
<li>
A continuous assignment having a value of type real on the right-hand side produced incorrect results. Also, closely related, a value of type real connected to a module port produced incorrect results. In both cases the real should have been converted to a 32-bit integer value.</li>
<li>
An SDF RECREM annotation would not annotate a lone RECOVERY or REMOVAL specify statement in optimized cells.</li>
<li>
On Win32, single-stepping over Verilog file I/O tasks sometimes resulted in a corrupted file handle.</li>
<li>
<b>vlog</b> crashed with an internal error when compiling a module instantiation within an 'else' generate statement that connected a literal value to a module port by name.</li>
<li>
<b>vlog</b> crashed while compiling a combinational UDP with ANSI-style arguments where the output was declared as a 'reg' (DR 341631).  This now gives an error message rather than crashing.</li>
<li>
Designs with both a parameterized array of instances and a generate loop crashed during elaboration.
</li>
<li>
The `protect directive caused vsim to freeze when a "reg" declaration was protected for a module port name that was not protected.  The port name is now left unprotected.</li>
<li>
Defparams inside generate-conditional statements did not always propagate
parameter values to lower levels in the design.</li>
<li>
A parameter initialized with a ternary expression having a constant selector resulted in a compiler crash in some unusual cases.
</li>
<li>
A design compiled with <b>-fast</b> resulted in false "part-select out of bounds" errors in some rare cases.</li>
<li>
An SDF interconnect delay from an I/O port to an I/O or input port in some cases resulted in incorrect behavior when using <b>+multisource_int_delays</b>.</li>
<li>
Verilog cells containing non-blocking assignments and compiled <b>-fast +nocheckSUDP</b> might not have evaluated correctly.</li>
<li>
A design compiled with <b>-fast</b> resulted in an internal error in some cases.</li>
<li>
A design compiled with <b>-fast</b> issued false "part-select out of bounds" 
error messages in some cases.</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="plidefects"></a><b>PLI Defects Repaired in 5.7d</b>
<ul>
<li>
tf_getnextlongtime() returned incorrect times when the time unit was different from the simulator time precision.</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="vhdldefects"></a><b>VHDL Defects Repaired in 5.7d</b>
<ul>
<li>
A VHDL port of mode out or inout could have incorrectly initialized drivers
if the port did not have an explicit initialization value and the actual signal connected to the port had explicit initial values. Depending on a number of factors, ModelSim could incorrectly use the actual signal's initial value when initializing lowerlevel drivers. The old pre-5.7d behavior can be matched by using the compiler switch <b>-nonstddriverinit</b>.  Note that the switch <b>-nonstddriverinit</b> does not cause all lowerlevel drivers to use the actual signal's initial value; it only affects the cases in which the older versions used the actual signal's initial value.</li>
<li>
Certain null array operands of the implicit concatenation operator
resulted in bad code being generated. This caused the simulator to crash.</li>
<li>
The code coverage feature was not instrumenting VHDL package bodies.
Package body code coverage, however, does not retain
instance-specific information. The statement counts are incremented
in the same single buffer, no matter who calls the package subprogram.
This matches the behavior of the 5.6 version of code coverage. Standard
IEEE packages, accelerated packages and MTI packages are automatically
excluded from coverage. These packages include: standard, std_logic_1164, 
textio, numeric_bit, numeric_std, std_logic_arith, std_logic_signed, 
std_logic_unsigned, std_logic_textio, std_logic_misc, vital_primitives, 
vital_timing, vital_memory, vl_types, and util.

</li>
<li>
Environment variables specified in the filename parameter to the
std_developerskit, std_mempak functions, Mem_Dump, and Mem_Load were not expanded.
</li>
<li>
Merged processes that had drivers created because of subprogram calls
generated bad code if multiple processes drove these signals.
The bad code crashed or created only one driver.</li>
<li>
If a clocked process had a vector signal in the sensitivity list, in some cases
the signal would be dropped from the sensitivity list.  This resulted in
incorrect simulation results.</li>
<li>
Objects declared within a VHDL subprogram were not accessible by the ModelSim
<b>examine</b>, <b>find</b>, and <b>change</b> commands if the subprogram was declared within the scope of a process.</li>
<li>
The <b>step -over</b> command sometimes incorrectly executed a process to the next wait statement rather than the next statement to be executed. This occurred only on HP-PA 32-bit platforms.</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="flidefects"></a><b>FLI Defects Repaired in 5.7d</b>
<ul>
<li>
mti_GetVarSubelements() was getting a memory allocation failure when used on null arrays.</li>
<li>
mti_GetParentSignal() could cause the simulator to crash when the parent
of a VHDL signal was an object in a Verilog module.
</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="vitaldefects"></a><b>VITAL Defects Repaired in 5.7d</b>
<ul>
<li>
Highestlevel VITAL accelerations should not have been applied to a level1
architecture in the presence of an inout port.</li>
<li>
Parallel delay paths were not able to be annotated by an SDF file.</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="mixeddefects"></a><b>Mixed Language Defects Repaired in 5.7d</b>
<ul>
<li>
The <b>-v2k_int_delays</b> switch caused Xs to propagate in a design if:<BR>
<UL>
<LI>a VHDL design unit was instantiated within a Verilog design unit 
<LI>the VHDL design unit was driven by an input/inout from the instantiating Verilog design unit 
<LI>the Verilog input/inout was not annotated with an interconnect delay
</UL></li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="generaldefects"></a><b>General Defects Repaired in 5.7d</b>
<ul>
<li>
On x86-based architectures (Windows and Linux), the code generator could use excessive stack space.  If too much stack space was used the simulator would crash without a traceback.  This was most likely to occur when elaborating a very large netlist.
</li>
<li>
Occasionally the report generated by the line coverage option would contain
lines numbered "0".  This was a result of an odd combination of overloaded
identifiers (e.g. an enum named FIRST and a function named "First"), used as
case labels.
</li>
<li>
The code coverage feature did not differentiate branches for branch 
coverage in case statements where multiple choices matched the same 
alternative. To get this functionality you must use the compile time option
<b>-coverBranch</b>. This option is the same for vcom and vlog. </li>
<li>
The <b>-coverage</b> option was not saved in elaboration files so coverage was not enabled when an elaboration file was loaded.</li>
<li>
Signal Spy did not correctly recognize Verilog vectors of length 1
( ex. reg [0:0] vec_one; ) as vectors.</li>
<li>
In ModelSim 5.7c the <b>run -step</b> command was broken. Using the command resulted in the message "Unknown option -step". As a result of this defect the F11 function key did not work.</li>
<li>
<b>vmap</b> did not issue a warning if the <b>-c</b> option was used with the MODELSIM environment variable or if <b>-c</b> was used and a local modelsim.ini file already existed. The <b>-quiet</b> option suppresses these warnings.</li>
<li>
If you received ModelSim error 3274,
<code>
"Empty built-in function pointer(#)....",
</code>
later executions of the <b>vsim</b> command may have caused the simulator to crash. This problem only existed on Windows PE, Windows SE, Linux SE, and RS6000 SE versions of ModelSim.</li>
<li>
$dumpoff in the VCD file did not work correctly.</li>
<li>
Running vsim with the <b>-restore</b> switch on Red Hat 8.0 caused an
out-of-memory error.</li>
<li>
Versions of hp700 ModelSim newer than 5.5f crashed (with a SIGILL) in vsim. The SIGILL occurred on HP B180 9000/778 computers running HPUX 11.00.</li>
<li>
Certain VHDL clocked processes crashed in some cases when optimizations and code coverage were activated.</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="mgcdefects"></a><b>Mentor Graphics DRs Repaired in 5.7d</b>
<ul>
<li>
DR 00106880/SC340057 - "Source Window edits are lost if a design is loaded".
</li>
<li>
DR 00107687/SC340955 - ModelSim would crash when attempting to drag an item from the Source window to another window.  This would occur when there were optimized VHDL components in the design, and the dragging was initiated from the toplevel design unit.</li>
<li>
DR 00107748/SC341021 - UM-342 include an additional note about coverage.</li>
<li>
DR 00107617/SC340875 - Several DSC compliance issues have been resolved with postscript file generation from the Wave window.</li>
<li>
DR 00107619/SC340877 - Some paper sizes would cause Tcl errors when printing postscript from the Wave window.  The first time printing postscript with this patch release, be sure to go to the Page Setup screen and select the correct paper size to make sure all values are correct.</li>
<li>
DR 00108136/SC341451 - Concatenation of an empty string with another string causes crash when run.</li>
<li>
DR 00103325/SC336094 - ModelSim is producing errors on valid VHDL.</li>
<li>
DR 00106680/SC339836 - ModelSim crashes with postlayout Xilinx simulation.<br>

On x86-based architectures (Windows and Linux), the code generator could
use excessive stack space. If too much stack space was used the simulator crashed
without a traceback. This was most likely to occur when elaborating a very
large netlist.</li>
<li>
DR 00106706/SC339864 - Need to be able to clear transcript in BATCH mode.<br>
The command "transcript file ?filepath?" has been added to query or set
the pathname for the transcript file. When a new file is specified, the existing
transcript file is closed and a new transcript file opened. If the pathname is
set to an empty string ("") the the existing file is closed and no new file is
opened. This command is an alias to the existing command: "set PrefMain(file)"
which has the same behavior.</li>
<li>
DR 00106821/SC339992 - misleading message: (All branch statements covered).</li>
<li>
DR 00107268/SC340498 - ModelSim rejects valid verilog2001 attribute syntax.

</li>
<li>
DR 00122477 - Changes in state of some signals listed in a process sensitivity list do not cause the process to be activated in 5.7c but did in 5.6x.</li>
<li>
DR 00105824/SC338893 - Optimized Verilog assignments are missing the "arrow" in the Source window.</li>
<li>
DR 00107374/SC340616 - $fdisplay is writing to STD_OUT.</li>
<li>
DR 00121803 - Problem with passing parameters in Verilog generate clause.</li>
<li>
DR 00122267 - Process merging causes ModelSim to crash.</li>
<li>
DR 00108301/SC341631 - Compiler crashes when parsing ANSI C style ports in user-defined primitive.</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="knowndefects"></a><b>Known Defects in 5.7d</b>
<ul>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="productchanges"></a><b>Product Changes to 5.7d</b>
<ul>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="newfeatures"></a><b>New Features Added to 5.7d</b>
<ul>
<li>
The command "transcript file ?filepath?" has been added to query or set the pathname for the transcript file.  When a new file is specified, the existing transcript file is closed and a new transcript file opened.  If the pathname is set to an empty string ("") the the existing file is closed and no new file is opened.  This command is an alias to the existing command: "set PrefMain(file)" which has the same behavior.</li>
<li>
An option has been added to vsim to control the number of Verilog SDF
missing instance messages that will be emitted before terminating vsim.
The option is <b>-sdfmaxerrors n</b> where n is the maximum number of 
missing instance error messages to be emitted.</li>
<li>
<b>vcd dumpports</b> is now able to generate unique vcd variable names for ports even if those ports are connected to the same collapsed net. The <b>-unique</b> option to <b>vcd dumpports</b> and the <b>+dumpports+unique</b> option to vsim activate this feature.</li>
<li>
The vlog compiler can now be told to generate a warning whenever an unknown plus option is encountered.  This functionality can be turned on by setting the variable Show_BadOptionWarning in the modelsim.ini file.  This variable is set to "off" by default.
</li>
<li>
An option was added to the <b>coverage reload</b> command to allow
merging of coverage statistics from testbenches of different names. 
The option <b>-root &lt;name&gt;</b> changes the name of the root testbench to 
the specified name for the file being reloaded.</li>
</ul>
</BODY>
</HTML>
