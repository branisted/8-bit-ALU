
<HEAD>
<TITLE>6.5a Release Notes</TITLE>

</HEAD>
<HTML>
<body text="#000000" bgcolor="#FFFFFF" link="#0000EE" vlink="#551A8B" alink="#FF0000">
<CENTER>
<h1>
&nbsp;<a NAME="TOC"></a>Release Notes For Model<i>Sim</i> Altera 6.5a
</h1></center>

&nbsp;
<center><b>Mar 27 2009</b></center>

<br><br>
<center>
&nbsp;Copyright 1991-2009 Mentor Graphics Corporation
<br>
&nbsp;All rights reserved.
<br>
&nbsp;This document contains information that is proprietary to Mentor Graphics
<br>
&nbsp;Corporation. The original recipient of this document may duplicate this
<br>
&nbsp;document in whole or in part for internal business purposes only, provided
<br>
&nbsp;that this entire notice appears in all copies. In duplicating any part of
<br>
&nbsp;this document the recipient agrees to make every reasonable effort to
<br>
&nbsp;prevent the unauthorized use and distribution of the proprietary
<br>
&nbsp;information.
</center>

<br>
<center>
&nbsp; TRADEMARKS: The trademarks, logos and service marks ("Marks") used herein
<br>
&nbsp; are the property of Mentor Graphics Corporation or other third parties.
<br>
&nbsp; No one is permitted to use these Marks without the prior written consent
<br>
&nbsp; of Mentor Graphics or the respective third-party owner. The use herein
<br>
&nbsp; of a third-party Mark is not an attempt to indicate Mentor Graphics as a
<br>
&nbsp; source of a product, but is intended to indicate a product from, or
<br>
&nbsp; associated with, a particular third party. The following are trademarks of
<br>
&nbsp; of Mentor Graphics Corporation: Questa, ModelSim, JobSpy, and Signal Spy.
<br>
&nbsp; A current list of Mentor Graphics trademarks may be viewed at
<br>
&nbsp; www.mentor.com/terms_conditions/trademarks.cfm.
</center>

<br>
<center>
&nbsp; End-User License Agreement: You can print a copy of the End-User License
<br>
&nbsp; Agreement from: www.mentor.com/terms_conditions/enduser.cfm.
</center>
<br>

<p>
<h4>
<hr WIDTH="100%"></h4>
<li>
<b>Product Installation and Licensing Information</b></li>

<br>For brief instructions about product installation please visit the
"install_notes" file in www.model.com. The install_notes
file can be viewed at:
<br><a href="http://www.model.com/products/release.asp">http://www.model.com/products/release.asp</a>
<br>For detailed information about product installation and licensing see
the ModelSim Start Here Guide. The manual can be downloaded from:
<br><a href="http://www.model.com/support/documentation.asp">http://www.model.com/support/documentation.asp</a>
<br>&nbsp;
<li>
<b>Release Notes Archives</b></li>
<br>For release notes of previous versions visit the release notes archive
at: <a href="http://www.model.com/support/default.asp">http://www.model.com/support/default.asp</a>
<br>or find them in the installed modeltech tree in &lt;path to modeltech installation&gt;/docs/rlsnotes
<br>&nbsp;
<li>
<b>How to get Support</b></li>
<p>Model<i>Sim</i> Altera is supported by Altera Corporation
<ul>
<!--
<li>Telephone Support
<p>
Call 800-800-3753 or 408-544-7000
<br>&nbsp;
<br>&nbsp;
<li>Email Support
<p><a href="mailto:support@altera.com">support@altera.com</a>
<br>&nbsp;
<br>&nbsp;
-->
<li>World-Wide-Web Support
<p><a href="http://www.altera.com/mySupport">http://www.altera.com/mySupport</a>
<br>&nbsp;
</ul>
<br>&nbsp;
<p>
<h4>
<hr WIDTH="100%"></h4>
<h3>
<b>Index to Release Notes</b></h3>

<blockquote>
<li>
<u><a href="#keyinfo">Key Information</a></u></li>

<li>
<u><a href="#uidefects">User Interface Defects Repaired in 6.5a</a></u></li>

<li>
<u><a href="#verilogdefects">Verilog Defects Repaired in 6.5a</a></u></li>

<li>
<u><a href="#plidefects">PLI Defects Repaired in 6.5a</a></u></li>

<li>
<u><a href="#vhdldefects">VHDL Defects Repaired in 6.5a</a></u></li>

<li>
<u><a href="#flidefects">FLI Defects Repaired in 6.5a</a></u></li>

<li>
<u><a href="#vitaldefects">VITAL Defects Repaired in 6.5a</a></u></li>

<li>
<u><a href="#systemcdefects">SystemC Defects Repaired in 6.5a</a></u></li>

<li>
<u><a href="#assertiondefects">Assertion Defects Repaired in 6.5a</a></u></li>

<li>
<u><a href="#mixeddefects">Mixed Language Defects Repaired in 6.5a</a></u></li>
<li>
<u><a href="#coverage">Coverage Defects Repaired in 6.5a</a></u></li>

<li>
<u><a href="#generaldefects">General Defects Repaired in 6.5a</a></u></li>

<li>
<u><a href="#mgcdefects">Mentor Graphics DRs Repaired in 6.5a</a></u></li>

<li>
<u><a href="#knowndefects">Known Defects in 6.5a</a></u></li>

<li>
<u><a href="#productchanges">Product Changes to 6.5a</a></u></li>

<li>
<u><a href="#newfeatures">New Features Added to 6.5a</a></u></li>
</blockquote>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="keyinfo"></a><b>Key Information</b>
<ul>
<li>The following lists the supported platforms:
	<ul>
	<li>win32aloem - Windows 2000, XP
	<li>sunos5aloem - Solaris 8, 9, 10
	<li>linuxaloem - RedHat 7.2 and higher.
	</ul>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="uidefects"></a><b>User Interface Defects Repaired in 6.5a</b>
<ul>
<li>
Adding some VHDL record or Verilog struct objects that contain large arrays to the Watch window fails.  This has been resolved.</li>
<li>
The <b>find insource</b> command sometimes produces an internal Tcl error.  This issue has been resolved.
</li>
<li>
Waveforms were sometimes drawn incorrectly (or not drawn at all) when using Expanded Time Deltas Mode or Expanded Time Events Mode if the simulation time at the right edge of the Wave window was a time that had no events.  This has been fixed.
</li>
<li>
When issuing a waveform compare, where the 'gold' WLF file has assertions that do not exist in the 'test' WLF file, an incorrect failure with the following error could occur but now compares correctly.
<code>
Fatal WLF Error (2): ../../../src/tkgui/compare.c(2639) Internal assertion: testRegion!=NULL
</code>
</li>
<li>
The <b>noforce</b> command failed when applied to a net whose name consisted of a Verilog-format extended identifier, where the characters of the identifier terminated with a space-character. The command produced an error with the message, "No objects found".
</li>
<li>
The project status icon was not updating properly when a file's status changed. Operations such as editing a file and saving it should change the icon indicator, this issue has been corrected.
</li>
<li>
The time display in the footer of the Wave window does not update and display the correct simulation time.  This issue has been resolved.</li>
<li>
When using a location map, the soft path was not correctly expanded if choosing the design unit and doing a recompile from the popup menu (Library Window Popup Menu > Recompile).</li>
<li>
Fixed a crash related to waveform comparisons involving SC FIFO under certain circumstances.
</li>
<li>
Selecting a memory within the Memory window, and issuing the <b>Export data patterns</b> command would work properly the first time.  A second attempt to issue this command on the same memory would result in an error.  The issue has been corrected.
</li>
<li>
The preference "testtrackercolumnMap" saved in the .modelsim file to preserve the column order for the Verification Management Tracker window between sessions. Some operations resulted in the invalid value of "-1" being included in the list of column numbers saved for the value of that preference. This invalid value in turn caused Tcl errors when using the Tracker window in older releases (prior to 6.4). This invalid value, "-1", will no longer be saved, in the .modelsim file and will no longer cause Tcl errors (in 6.3k and later) if it exists in a .modelsim file.
</li>
<li>
The following code coverage data column names are renamed in the Structure and Instance coverage windows.
<ul>"Stmt hits"             to "Stmts hit"</ul>
<ul>"Stmt misses"           to "Stmts missed"</ul>
<ul>"Branch hits"           to "Branches hit"</ul>
<ul>"Branch misses"         to "Branches missed"</ul>
<ul>"Condition hits"        to "Conditions hit"</ul>
<ul>"Condition misses"      to "Conditions missed"</ul>
<ul>"Expression hits"       to "Expressions hit"</ul>
<ul>"Expression misses"     to "Expressions missed"</ul>
<ul>"Toggle hits"           to "Toggles hit"</ul>
<ul>"Toggle misses"         to "Toggles missed"</ul>
<ul>"State hits"            to "States hit"</ul>
<ul>"State misses"          to "States missed"</ul>
<ul>"Transition hits"       to "Transitions hit"</ul>
<ul>"Transition misses"     to "Transitions missed"</ul>
<ul>"FEC Condition hits"    to "FEC Conditions hit"</ul>
<ul>"FEC Condition misses"  to "FEC Conditions missed"</ul>
<ul>"FEC Expression hits"   to "FEC Expressions hit"</ul>
<ul>"FEC Expression misses" to "FEC Expressions missed"</ul>
</li>
<li>
The add list command's bus expression syntax is broken for some cases with extended identifiers.  This problem has bee resolved.</li>
<li>
The alias command does not work with compound commands, for example:<br>
<pre>
    alias myquit "write list list.txt; quit -f"
</pre>
This issue has been resolved.
</li>
<li>
The <b>find virtuals</b> command now behaves consistently with other find commands such as <b>find signals</b> and <b>find nets</b>.
</li>
<li>
Waveform compare did not work correctly for SystemC enumerations and structures.</li>
<li>
Delayed virtual signal children names would sometimes be missing or named "virtuals:".  This most often occurred with bits of registers in waveform compare.</li>
<li>
Corrected an error that disabled the <b>-wlfopt</b> option, resulting in slow display of long running wave datasets.
</li>
<li>
Corrected errors in the logging of SC FIFOs and arrays. The errors could result in crashes or missing signal values.  </li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="verilogdefects"></a><b>Verilog Defects Repaired in 6.5a</b>
<ul>
<li>
When a module contains multiple UDP instances and the different UDP's are compiled in different library then for vopt mode vsim sometimes may error out with the message:<br>
<code>
** Error: (vsim-3033) top.v(7): Instantiation of '/test/bug/lib3.ut_udp2(verilog)' failed. The design unit was not found.
</code>
This defect was actually fixed in 6.5.
</li>
<li>
vlog would fail to read a design while issuing the error '... unexpected "end of source code"'.
</li>
<li>
Casting a parameter of string type to an integer type would sometimes produce a crash or give wrong results. This is now fixed.</li>
<li>
A continuous assignment having a variable driver delay behaved as if there was no delay in some cases if the assignment was from one vector net to another of equal width.</li>
<li>
Under certain circumstances (a method in a parameterized class, a forward typedef), vlog would print an invalid error about a field of a struct not being found.</li>
<li>
Backslash characters would not be properly formatted within string literals in the output of vlog's <b>-E</b> option.
</li>
<li>
Verilog attributes placed before a gate instantiation nested within a conditional generate would cause a syntax error.</li>
<li>
If an element of an external reference to an array of interfaces was passed to an interface-port, the following error occurred during elaboration:<br>
<code>
Fatal: (vsim-8229) Can't take value of this object ('ifarr').
</code>
</li>
<li>
A non-wire connection to a module port net declared with a "net delay" simulated with zero delay in an optimized design if the module instance was inlined.</li>
<li>
An always block triggered by a hierarchical reference (or a structure field select) failed to trigger in some cases in an optimized SystemVerilog design.
</li>
<li>
An illegal assign to void function name when the function is declared as extern would cause a segmentation fault. This is now fixed.
</li>
<li>
Defining a typedef for a class specialization in a package scope and then defining another typedef for the same specialization in a class scope could cause various elaboration time crashes or errors.</li>
<li>
vopt sometimes failed to find class method names used in a hierarchical reference when the same name worked correctly in novopt mode. This error occurred in designs that contained generate, conditional or loop constructs.
</li>
<li>
Instantiating parameterized interfaces using dot star (.*) notation might have given wrong results in vopt mode. This has been fixed.
</li>
<li>
In order to support SDF annotation of protected Verilog regions, $sdf_annotate calls that meet certain conditions are "hoisted" and treated as if they were specified on the vsim command line. The conditions are that $sdf_annotate is either the first statement in a block or every statement preceding it is a built-in systask. (We used to allow user-defined systasks too. Now restricted to built-in systasks only).
</li>
<li>
Strictly by the SystemVerilog LRM, class extern method prototypes are not allowed to have lifetime (automatic/static) designations.  Due to common use however, the error checking on this has been relaxed to issue an LRM compliance warning as the default and to only produce an error with the <b>-pedanticerrors</b> switch.
</li>
<li>
Assigning an interface-array formal port to a virtual interface could cause a runtime crash.</li>
<li>
Default generate block names (genblk[n]) in hierarchical references will now be treated as an error in vsim in incremental mode. 
</li>
<li>
Verilog or SystemVerilog string parameter overrides from the command line(<b>-G</b>/<b>-g</b>) can now be specified without double-quoting the string. For example: <b>-Gstring_param=Hello</b>.
</li>
<li>
Non-blocking assignment to a field of a packed struct might have produced error such as: <br>
<code>
** Error: test.sv(47): Internal error:../../../src/vlog/vgenexpr.c(7376).
</code>
</li>
<li>
Using the <b>+initreg=u</b> switch to initialize UDP registers may cause incorrect simulation results.
</li>
<li>
NaN results from a divide-by-zero operation in a variable delay expression is not detected and properly reported.
</li>
<li>
A non-blocking assignment to an element of a packed struct might have produced wrong results. This is now fixed.
</li>
<li>
vlog printed an internal error when a continuous assignment used a concatenation of individual bits of an enum variable.
</li>
<li>
vsim <b>+notimingchecks</b> may cause incorrect simulation result in an optimized sequential cell that models negative timing checks.
</li>
<li>
Simultaneous events did not always violate $hold and $recovery timing checks.</li>
<li>
When using <b>-mixedansiports</b>, vlog continues to generate a warning.  Changed the handling (for -mixed cases ONLY) so the warning is suppressible by the user.
</li>
<li>
vlog now allows endtask and endfunction labels to be specified with interface names. For example, vlog now accepts the following: "endtask : myInterface.myTask".
</li>
<li>
Timing checks disabled with limits set to zero were not being used to solve delay net delays required by negative timing check limits.</li>
<li>
Fixed $system() issues that only existed on Windows.
</li>
<li>
An event control having either a posedge or negedge on a part-select of a vector register incorrectly triggered when the edge occurred on bits other than the LSB of the part-select.</li>
<li>
An always block that assigned to a variable with a blocking assignment incorrectly re-queued the same always block for execution in some cases if the variable also appeared in the sensitivity list of the event control. While an always block is running, none of its event controls should be considered active.</li>
<li>
Fixed a crash due to circular dependencies when importing packages. Importing a package, B, from within a package, A, that imports package A caused a crash.</li>
<li>
Sometimes, false error messages stating "Cannot assign to 'const' variable 'this'." used to be generated while randomizing a parameterized class with inline constraints.  These errors are now fixed.
</li>
<li>
$sdf_annotate failed when trying to back-annotate a protected instance.</li>
<li>
A virtual interface reference inside a <b>-nodebug</b> region resulted in an incorrect error claiming the interface element was not found.
</li>
<li>
If a replication operation with a zero replication multiplier appears inside a concatenation, it will be considered to be of size zero and ignored.
</li>
<li>
The compiler crashed compiling a SystemVerilog package containing a packed structure having a mix of 4-state and 2-state element types in some cases.
</li>
<li>
The error message given for illegal assignments to class objects now includes the name of the library and package where the class types were defined, like:<br>
<code>** Fatal: Illegal assignment to class type A #(int) [in work.pkg1] from class type A #(int) [in work.pkg2]
</code></li>
<li>
Verilog macros with long macro bodies could cause vlog to crash.</li>
<li>
A continuous assignment in an optimized design produced incorrect results in some cases where the LHS is a vector net and the RHS is a smaller vector.
</li>
<li>
Fixed a memory leak in non-blocking assignments to a struct.</li>
<li>
When overriding an untyped value parameter with another untyped parameter having more than 32-bit value for vopt mode, the overridden parameter value may sometimes be truncated to 32-bit.
</li>
<li>
Iterating over an associative array using foreach might have given illegal errors. All such errors have been resolved.</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="plidefects"></a><b>PLI Defects Repaired in 6.5a</b>
<ul>
<li>
PLI/FLI shared objects that register exit callbacks using g_atexit() would sometime crash the simulator during quit. This is fixed now.</li>
<li>
VPI VCBs (value-change callbacks) placed on objects of type vpiPackedArrayVar were not removed correctly by vpi_remove_cb(). This has been fixed.</li>
<li>
The vpiScope and vpiModule transitions from VPI objects of type vpiGenScope are now available.</li>
<li>
Some issues getting VPI objects that are subcomponents of complex mixed unpacked/packed structs using vpi_handle_by_name() have been fixed.</li>
<li>
The vpi_iterate() transition for objects of type vpiNetArray on objects of type vpiGenScope has been implemented.</li>
<li>
The LRM describes upwards scope traversal transitions vpiModule and vpiInstance in the instances class diagram, notes 2 and 3. Implementation of these transitions has been completed.</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="vhdldefects"></a><b>VHDL Defects Repaired in 6.5a</b>
<ul>
<li>
Use of non-existent ports or generics would not be flagged as an error in a block's port or generic map. </li>
<li>
In some cases when VHDL blocks had generic maps with generic dependent port ranges and were used inside generates, a port mismatch error occurred. This is now fixed.
</li>
<li>
Some error conditions were not detected when a <b>force</b> command was applied to a
subelement of a composite port of mode in or inout. Error number 3456 is now
correctly issued in these cases. 
</li>
<li>
External names that targeted an alias did not work. If vopt was either run explicit or implicitly, the simulator would report the error:<br>
<code># ** Error: (vsim-8345) Unable to find original top-level design units for
optimized design "_opt".</code><br>
If vopt is not run, the simulator would report that the target of the external name was not found.
</li>
<li>
If a process that models a simple latch had local variables that were initialized with expressions that had side-effects, the initialization was incorrectly optimized away.
</li>
<li>
Block generics would incorrectly be set to their default values if SDF annotation is present in the design.
</li>
<li>
Fixed a crash due to circular use clauses. Using a package, B, from within a package, A, that uses package A caused a crash.
</li>
<li>
A signal that is the prefix of certain predefined attribute names (as in sig'LENGTH), where only the type of the signal and not its value is being accessed, is allowed to be referenced from within a PURE function.</li>
<li>
Compiler error message for incorrect record fields have been improved to include type and expression.</li>
<li>
Subelement associations to a subprogram's parameter that is of kind signal and of a record type, would cause a crash or an incorrect error message like: <br><code>
# ** Fatal: (vsim-3420) Array lengths do not match.
</code><br>
</li>
<li>
Functions SHIFT_LEFT, SHIFT_RIGHT, ROTATE_LEFT, and ROTATE_RIGHT in IEEE standard packages numeric_bit and numeric_std did not perform the proper bounds checking on the "count" formal, which is of subtype NATURAL, allowing negative values to be passed to calls to these functions when the accelerated versions of these functions were used.  This has been fixed to produce the expected out-of-range error when this occurs during a running simulation.
</li>
<li>
A severe slowdown in vcom/vopt has been fixed for VHDL designs with a large number of if/elsif statements having complex conditions.</li>
<li>
VHDL designs instantiated from a SystemC instance could crash the simulator.
A package containing signals would be incorrectly elaborated if the package was reference only by lower level VHDL design units and to the design unit directly instantiated from SystemC. 
</li>
<li>
Compilation of a VHDL package containing a COMPONENT declaration having a port of a subtype that depends on one of the component's generic values could sometimes result in an Internal error (at allocate.c(1478)) when switch <b>-novopt</b> was used.
This has been fixed.
</li>
<li>
In certain instances involving configurations vopt cannot find an entity in an entity_aspect when multiple logical libraries are mapped into a single physical library. This is now fixed.</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="flidefects"></a><b>FLI Defects Repaired in 6.5a</b>
<ul>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="vitaldefects"></a><b>VITAL Defects Repaired in 6.5a</b>
<ul>
<li>
In VITAL memory models, some HOLD violations were incorrectly reported as SETUP violations, and some HOLD violations reported an incorrect state (High vs. Low).</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="systemcdefects"></a><b>SystemC Defects Repaired in 6.5a</b>
<ul>
<li>
sccom can now operate on read-only current directories.</li>
<li>
vsim could hang during a run if Ctrl-C was entered and when the CDebug tool had been started.</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="assertiondefects"></a><b>Assertion Defects Repaired in 6.5a</b>
<ul>
<li>
vopt gave 'Internal error: ../../../src/vlog/vgencode.c(51) loc != NULL' in some cases when a module having an assert statement got inlined.</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="mixeddefects"></a><b>Mixed Language Defects Repaired in 6.5a</b>
<ul>
<li>
Using SignalSpy to mirror the value of single-bit vectors at the SystemVerilog-VHDL boundary, i.e. VHDL std_logic_vector(4 to 4) to Verilog reg [0:0], would produce an incorrect type mismatch error. This has been fixed.
</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="coverage"></a><b>Coverage Defects Repaired in 6.5a</b>
<ul>
<li>
HTML coverage reports can now be generated for the simulation dataset.</li>
<li>
The "View Coverage Details" item of popup menu in the Verification Management Tracker window is now disabled (grayed out) when the row selected has a type which has no coverage details.</li>
<li>
Expanding covergroup instance items in the Cover Groups window occasionally resulted in a Tcl error and stack trace like this:<br>
<code>
    querycommand error: cmd=Covergroup::UpdateBrowser<br/>
fcoverVar/concat_tester:monitor_channel_data:chanasrc/testconcat.sv430 0 100
results=can't read "tag": no such variable<br/>
</code>
This has been fixed.
</li>
<li>
Excluded toggles were included in HTML coverage reports but should not have. This has been fixed.
</li>
<li>
The HTML summary report now shows the count of passing tests with warnings separately.</li>
<li>
Wrong toggle coverage statistics were shown in the Workspace window in simulation mode when some bits of a vector are excluded.
</li>
<li>
Wildcard tagging of UCDB testrecords is now permitted.</li>
<li>
The Missed Coverage window did not show the last "elsif" missed branch when the "else" was absent in the branch.
</li>
<li>
Missed expressions were showing as missed conditions in viewcov mode when only FEC
of the expression was missed.
</li>
<li>
Merging produced an incorrect toggle 0->Z transition count.
</li>
<li>
VHDL process statements were not getting included in statement coverage. This was inconsistent with Verilog where we included always statements in statement coverage. Now VHDL process statements will appear in code coverage.</li>
<li>
Sometimes when compiling a design unit with <b>-cover bcesft</b>, which instantiates a
design unit compiled with <b>-cover bcesfx</b>, the following erroneous error would occur:
<br>
<code>
** Error: (vcom-1913) Ambiguous options bcesfx, toggle and extended toggle both specified.
</code>
<br>
This has been fixed.
</li>
<li>
There are two different coverage flows: 
<ul>
The Manual Flow that includes toggle add/disable/enable.
</ul>
<ul>
The Compile/Simulator Flow that includes vsim coverage with coverage exclude.
</ul>

Fixed a problem when using <b>toggle add</b> command from the first flow and then excluding nodes using the <b>coverage exclude</b> command from the second flow.
</li>
<li>
Allow wildcard placeholders in UCDB test names that are expanded in viewcov mode.</li>
<li>
Fixed a bug in coverage viewing mode that causes incorrect coverage count for all-false branches to show up in GUI/text reports after applying exclusions.</li>
<li>
<b>vcover report -html ...</b> no longer segmentation faults when given a UCDB having a test record with a non-standard TESTSTATUS value.
</li>
<li>
The "False" count of the "else branch" in VHDL was always zero in viewcov mode in the Source window.
</li>
<li>
Scalar toggles are shown with the expandable '+' sign in the Missed Toggles window, and the children of vector toggles were not in sorted order.
</li>
<li>
FSM multitrans coverage transitions did not appear in the Details window.
</li>
<li>
Headers of FEC/UDP coverage reports would report 'short-circuiting enabled' even for expressions/conditions which are not considered for short-circuiting. This has been fixed and now the FEC/UDP coverage report headers for such expressions will correctly report 'short circuiting disallowed' instead.</li>
<li>
Turned off code coverage columns by default in Structure window, depending on existence of coverage kinds.</li>
<li>
In the event that a tab in the Missed Coverage window is empty, a status message is now added to the tab indicating why the tab is empty.
</li>
<li>
The toggle report's header always has columns for extended toggling even if there are no extended toggle nodes in the design.
Also, there was a spacing problem for integer toggles.
The toggle report is now formatted according to the types of toggle nodes to be reported and the spacing for integer toggles has been corrected.
</li>
<li>
vcover was getting a segmentation fault while generating a HTML report on a UCDB file.
</li>
<li>
An 'x' assignment to a FSM state variable with FSM coverage enabled, when compiled with the <b>-sv</b> flag would sometimes result in an internal error in vlog. This has been fixed.
</li>
<li>
Fixed a bug in FSM recognition to exclude certain invalid patterns.</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="generaldefects"></a><b>General Defects Repaired in 6.5a</b>
<ul>
<li>
Using checkpoint/restore with designs that use the built-in OVM library crash on restore or restart.  This issue has been resolved.
</li>
<li>
In some cases under OVM, transaction streams were mis-named with the string passed as the "stream kind" parameter to $create_transaction_stream().  This has been corrected.</li>
<li>
When using OVM, the simulation would sometimes lock up or crash during OVM elaboration.  This issue has been resolved.</li>
<li>
The vmake utility generates combined make rules for Verilog design units when the source files are compiled with the same command line arguments. In some cases, the vlog command for the combined rule did not list all the source files.
</li>
<li>
Batch mode execution of dofiles containing <b>add wave</b> commands could fail to be replaced with the equivalent <b>log</b> commands. This has been fixed.
</li>
<li>
When a library containing an optimized "black box" (bbox) design is moved to a new location, incorrect "file not found" errors were reported when a fatal error occurred.</li>
<li>
<b>-gen_xml</b> will function normally when the library and/or module files are read-only.  If the top level directory is write-locked, the <b>-nolock</b> switch must be used in conjunction with <b>-gen_xml</b>.
</li>
<li>
Fixed problems with UCDB TESTSTATUS in simulation mode.</li>
<li>
A Warning is now issued when individual files cannot be found while loading a merged UCDB file.
</li>
<li>
Added exclusion information to the XML report.
</li>
<li>
Fixed problems with Generate HTML report and altered it to be more like GUI/tracker.
</li>
<li>
Generated HTML report had a missing link.
Altered HTML report to be more like GUI/tracker.
</li>
<li>
Fixed UCDB coverage save hang.</li>
<li>
Extended VCD data for output and bidirectional ports would sometimes output data that matched the previous data for the same port and sometimes output a time stamp when no data was printed.</li>
<li>
<b>vcover report -source test_link.v</b> ... will now follow symbolic links on UNIX/Linux systems.
</li>
<li>
<b>-gen_xml</b> now properly reports initial value when for an integer constant divide.
</li>
<li>
<b>-gen_xml</b> now properly handles the 'RIGHTOF and 'LEFTOF attributes.  All values from user libraries are displayed as &lt;lib.package.value&gt;.
</li>
<li>
Issuing the <b>fcover configure</b> command with no cover directives causes a silent failure.
If the path specified to the command contains no cover directives, a misleading assertions error message used to appear.
Both behaviors are now corrected wth and the following error message:
<br>
<code>
Error: (vsim 4018) Objects in paths/specified_path are not of type cover directive.
</code>
</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="mgcdefects"></a><b>Mentor Graphics DRs Repaired in 6.5a</b>
<ul>
<li>
dts0100388409 - Virtual interface elements are now supported in Covergroup (i.e. they can be used in coverpoint expression, bin iff expression, sample event,! and option assignment). This was not allowed per IEEE 1800-2008 LRM.</li>
<li>
dts0100445653 - Virtual interface elements are now supported in Covergroup (i.e. they can be used in coverpoint expression, bin iff expression, sample event,! and option assignment). This was not allowed per IEEE 1800-2008 LRM.</li>
<li>
dts0100447681 - Virtual interface elements are now supported in Covergroup (i.e. they can be used in coverpoint expression, bin iff expression, sample event,! and option assignment). This was not allowed per IEEE 1800-2008 LRM. </li>
<li>
dts0100460660 - SHIFT_LEFT should create error if called with negative 2nd value in accel package.</li>
<li>
dts0100476539 - GUI crashes with Font treeFont still in cache message.</li>
<li>
dts0100514311 - vcover report -xml -testattr does not work as expected.</li>
<li>
dts0100514601 - Problem logging signals to sub-groups with same name in Wave window.</li>
<li>
dts0100531373 - Workspace-window description should detail hierarchical/local coverage modes.</li>
<li>
dts0100540661 - Excluded toggles appear in HTML coverage report.</li>
<li>
dts0100542918 - ** Error: Field/method name (<nextState>) not in '<data>'.</li>
<li>
dts0100543545 - XML report displays coverage data for row's that were coverage excluded.</li>
<li>
dts0100544838 - Wave Viewer defect RE: Deltas Mode.</li>
<li>
dts0100551191 - Simulation hangs during coverage save.</li>
<li>
dts0100552883 - Difference in simulation results between accelerated vital and -novital.</li>
<li>
dts0100552901 - Assertion data not showing up in vcover report -html.</li>
<li>
dts0100559494 - Wrong behavior in assign statement when time delay is a variable.</li>
<li>
dts0100559840 - vlog reports unexpected EOF while reading include file.</li>
<li>
dts0100560539 - Simulator crashes with Exit Code 211 when trying to restore on a checkpoint using an OVM design.
</li>
<li>
dts0100560834 - Changes to the UCDB TESTSTATUS flag are ignored by coverage save.</li>
<li>
dts0100561163 - The find insource command generates error in PA simulation.</li>
<li>
dts0100561184 - Request for enhancement to our VHDL compiler error messages pertaining to records.</li>
<li>
dts0100561207 - Class constructor call executes new() function from wrong class.</li>
<li>
dts0100561477 - Incorrect simulation result when vopt is enabled.</li>
<li>
dts0100562203 - Cannot pass in string parameter via the command line.</li>
<li>
dts0100562213 - $system("terminal command line") doesn't work in Windows but works in Unix.</li>
<li>
dts0100562402 - Technote mismatches: vhdl2008.note / vhdl_encryption.note.</li>
<li>
dts0100562523 - Waveform compare crash.</li>
<li>
dts0100562526 - Error when trying to access individual bits of an enum in an assign statement.
</li>
<li>
dts0100562565 - Fatal error when nesting an interface array inside another interface.</li>
<li>
dts0100562669 - $sdf_annotate is not executed sequentially inside an initial block.</li>
<li>
dts0100562671 - Failed to find 'connect' in hierarchical name.</li>
<li>
dts0100562727 - Defect with documentation in User's Manual - VHDL Encryption.</li>
<li>
dts0100562775 - Examination of dynamic variable is inconsistent.</li>
<li>
dts0100562786 - noforce does not handle escaped identifiers correctly.</li>
<li>
dts0100563015 - Fatal error when trying to pass an array of interfaces to a program block.</li>
<li>
dts0100563396 - vmake problem with 2 source files.</li>
<li>
dts0100564073 - The project status icon does not update after project files are compiled.</li>
<li>
dts0100565644 - Now and Delta values in an undocked Wave window do not update.</li>
<li>
dts0100566059 - vcover reports for toggle coverage differ based on UCDB file order during merge.</li>
<li>
dts0100566743 - Testplan coverage summary discrepancy.</li>
<li>
dts0100566821 - The simulator would error out if the end task has a label dut_if.poke.</li>
<li>
dts0100566865 - transaction_stream display on wave with full or relative path.</li>
<li>
dts0100567663 - Replication with zero replication constant evaluates to 0.</li>
<li>
dts0100567872 - Simulator doesn't take into account new value for variable in modelsim.ini when loading a checkpoint file.</li>
<li>
dts0100572831 - vcom +protect is not documented in the reference manual for vcom.</li>
<li>
dts0100573283 - UPF ack_port is not working when -pa_prefix and/or -pa_replacetop are used as vopt-pa command line options.</li>
<li>
dts0100561463 - variables in Location Maps are not used correctly when recompiling.</li>
<li>
dts0100565109 - Fatal error with references inside virtual if in -nodebug region.</li>
<li>
dts0100522177 - Force on an input port std_logic vs on a bit of a std_logic_vector.</li>
<li>
dts0100572666 - Error: src/interface_comp.pkg(36): Internal error: ../../../src/vcom/allocate.c(1478).</li>
<li>
dts0100531464 - sccom fails if executed in read only directory.</li>
<li>
dts0100559765 - Allow wildcards in testnames for linking or the ability to link to another attribute from the testplan.</li>
<li>
dts0100537478 - UCDB results do or do not load correctly in VM window.</li>
<li>
dts0100508309 - VM - comments are not supported by visualization of the verification plan inside Simulator. This feature was added in release 6.5.</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="knowndefects"></a><b>Known Defects in 6.5a</b>
<ul>
<li>
On Windows platform, If Destructor breakpoint on SystemC object is set via command "bp -c < function_name >", Debugger sometimes does not stop at the breakpoint. </li>
<li>
On Windows platform, if breakpoint is set on a SystemC object destructor, Debugger sometimes crashes while quitting simulation. This crash can be avoided by setting env variable SC_NO_LIB_UNLOAD, which will prevent unloading of the shared library.</li>
<li>
The simulator will hang if it tries to create a WLF file while running
on a Linux 64-bit operating system from a working directory which does
not support large files. One common instance of this is executing an
<b>add wave</b> command, when the working directory was created under an
older 32-bit Linux OS.
<br>
This is a Linux operating system bug and cannot be fixed by the
simulator.
<br>
A workaround for release 6.3 and above is to execute the simulator
with command line option <b>-wlfnolock</b>.

</li>
<li>
The stack unwinder on the linux_x86_64 OS is unreliable.  The unwinder is the fundamental facility provided by the OS for sampling where program execution is at.  The unwinder is necessary for gathering performance data.  This is a known issue with this specific OS and is why performance data will be incorrect or non-existent on this platform.  </li>
<li>
Users should be mindful of enabling both performance profiling and memory profiling at the same time.  Memory profiling requires much overhead process, and it can skew the results of the performance profiling data.</li>
<li>
On certain (RedHat) Linux Operating System versions the "-restore" feature
occasionally fails. This is due to the memory allocation security (anti-hacking) feature of Linux. RedHat Enterprise release v.3 update3 was the first version to have this security feature. In these Linux releases two consecutive program invocations do not get the same memory allocation foot-print. For the "-restore" feature the simulator relies on having the same memory allocation foot-print. Users are advised to re-try this feature a few times as on average 3 out of 5 attempts are successful. In recent Linux versions, an override for this anti-hacking feature is provided. Please use it at your own discretion. </li>
<li>
In code coverage, there is no way to exclude a condition or expression table
row for the case of more than one table on a line and the table in question
is not the first table on the line.</li>
<li>
Support of debugging C code during a quit command was disabled on Windows. The corresponding C Debug command <b>cdbg stop_on_quit</b> was also disabled on Windows.
</li>
<li>
Specparams can be learned during the learn flow, but cannot be found on consumption. The workaround is to use full +acc deoptimization.</li>
<li>
On Red Hat Enterprise Linux release 5 platform, If SIGSEGV signal occurs during the simulation and if CDEBUG is on, C-debugger traps the signal, and when continued, vsim gets terminated right away, instead of exiting with proper error status.</li>
<li>
If you have code coverage on in VHDL and get the following sort of warning:<br>
# Loading mypackage(body) <br>
# Internal Warning in process_sub: failed to find local inlined subprogram 
called in pkg<br>
#     (mypackage ); flags 7 filenum 0 lineno 241 tokno 2<br>
#     Disabling code coverage for this inlined subprogram<br>
Then add the <b>-noFunctionInline</b> option to <b>vcom</b> for that package, 
or reorder the subprograms in the package body to be defined before they are used.</li>
<li>
Code coverage is now giving results for SystemVerilog nested modules, 
interfaces and program blocks. One remaining issue is that if a nested
module has more than one instance, only one of the instances will show
code coverage data, and the data therein will be the sum of all the
instances of that module. This will be improved in a later release.</li>
<li>
The vpiPorts iteration on vpiEnumNet, vpiIntegerNet, and vpiStructNet VPI objects has been disabled as it was incomplete and unsafe to use.
</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="productchanges"></a><b>Product Changes to 6.5a</b>
<ul>
<li>
The breakpoint behavior of the <b>-cond</b> option has changed to re-parse expressions each time the breakpoint is hit.  This allows expressions with local references to work.  Note that because of this change, condition expressions referencing items outside the context of the breakpoint must use absolute names.  This is different from the previous behavior where a relative signal name would be resolved at the time the bp command was issued, allowing the breakpoint to work even though the relative signal name was inappropriate when the breakpoint is hit.
</li>
<li>
Errors involving assignments to enums in vlog, vopt, or vsim are now printed using message #8386, which is suppressible.</li>
<li>
In previous versions of the simulator, a random seed was sometimes assigned to processes created for non-blocking-assignments, and this could affect random-stability, depending on optimizations that were in effect.  In 6.5, this is no longer the case; but it may result in different results involving randomization from 6.4x.
</li>
<li>
FSM recognition reporting in the coverage FSM flow has been made consistent with the FSMDEBUG flow. Both flows will only dump the number of FSMs detected by default. The <b>-fsmverbose</b> option can be used to display FSM RECOGNITION INFO, if required.
</li>
<li>
The default keyboard shortcuts for the cut/copy/paste operations have been changed to match the Windows standard of Control-X/C/V respectively. A new preference setting (Main/PCEditBindingsOnUnix) category has been added to control this. Note, any opened text windows at the time the preference is changed will not see the change until the next time the GUI is started.
</li>
<li>
A new search capability has been added for all windows that previously supported use of the Contains toolbar and/or the "Edit > Find..." menu. This new "Search Bar" will appear along the bottom edge of the window it's being used from. It completely replaces the old Contains toolbar and individual Find dialog boxes. For those windows that support both filtering and finding, the mode for the Search Bar would need to be set accordingly (the last selected mode for the Search Bar is remembered between sessions). The various ways of choosing the mode are:
<ul>
<li>use Control+M while the Search Bar has the keyboard focus
<li>select the mode from the Search Bar's menu (located on icon at far left)
<li>click the label text which indicates the current mode
</ul>
<br>
The current mode of the Search Bar is displayed as a text label to the left of the type-in field, as well as by the icon located at the left edge of the type-in area.

The main benefit of having the filtering functionality within the Search Bars is that each window now has its own unique type-in field as opposed to having to share the common Contains toolbar. The latter could lead to confusion over what is shown in the toolbar and the filtered content of the windows. There is also a simple history mechanism to allow saving search strings for later use. The keyboard shortcuts to support this are:
<ul>
<li>Control+S -- save current search text into history list
<li>Control+P -- retrieve previous search text
<li>Control+N -- retrieve next search text
</ul>
</li>
<li>
You must now change the encoding of your character representations with the <b>encoding system</b> command, where the syntax is:<br>
<code>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; encoding system &lt;encoding_name>
</code>
To obtain a complete list of &lt;encoding_name> options, use the <b>encoding names</b> command with no arguments.

Previously you could perform this action with the View > Encoding menu, which has been removed.
</li>
<li>
The VPI compatibility for this release defaults to the 2009 IEEE 1800 standard. This introduces, among other things, new VPI types for packed arrays of struct nets and struct variables. Normative files vpi_user.h, sv_vpi_user.h and vpi_compatibility.h are supplied with the latest known standardized contents. Users should however be aware that at the time of release the IEEE 1800-2009 was not complete.</li>
<li>
Event order differences between an optimized and unoptimized design have been reduced with this release. Specifically, event propagation through Verilog zero-delay continuous assignment and primitive networks has been changed such that optimizations involving these networks are much less likely to result in behavioral differences. However, note that a design depending on the old event ordering may not behave the same with this release. Both, the unoptimized and optimized behavior may change, but should match each other more closely. Ideally, "races" should be removed from the design, but, if desired, the user may revert back to the old event ordering by specifying the <b>-noimmedca</b> vsim option or by setting the following line in the <i>modelsim.ini</i> file:<br>
<code>
ImmediateContinuousAssign = 0
</code>
</li>
<li>
Code coverage information is no longer saved under design units in UCDB files. Instead, code coverage data for design units are constructed on-the-fly when a UCDB file is opened in IN_MEMORY mode. The information is constructed by merging all code coverage data from instances in the UCDB into the corresponding design unit. This has two main implications for UCDB API users:
<ol>
<li>Using APIs to create code coverage data under design units is not allowed anymore and the API calls will error out.</li>
<li>Opening UCDB files in read-streaming mode will not generate callbacks under design units since there is no code coverage data anymore.</li>
</ol>
</li>
<li>
The PrefMain(ShowFilePane) preference is now obsolete. The Files pane will follow current layout as do all other windows.</li>
<li>
The <b>view *</b> command is now obsolete.  The argument "*" will be ignored with no note warning or error.  A window name or window name prefix must be supplied in order to open or configure any windows.
</li>
<li>
When a non-existent entry of an associative array is read, a default value is returned.  We now re-initialize that value each time, in case the user modified it.  The exception is if the user set an explicit default value.<br>
For example:<br>
<code>
integer bar[integer][$];  // Assoc. array of queues.
<br>task execute();
<br>// Below, bar[2] doesn't exist, so we return the default value,
<br>// an empty queue.  The user is pushing 777 onto it.
<br>bar[2].push_back(777);
<br><br>
// Referencing bar[2] again now returns an empty queue.  In previous
<br>// versions, we returned {777}.  The $display now prints 'x'.
<br>$display ("bar [2][0]    = %0d", bar[2][0]);
</code> 
</li>
<li>
Some changes have been made to toggle coverage specific vsim command-line options.
<br>
<ul>
<li>The <b>-togglevlogints</b> option has been removed as SystemVerilog integer types are now supported for toggle coverage by default.
<li>The following vsim command-line options have been changed as they were inconsistent with our convention.
<ul>
<li>-togglenoints       CHANGED TO   -notoggleints
<li>-togglenovlogints   CHANGED TO   -notogglevlogints
</ul>
</ul>
</li>
<li>
We now treat a slice of a string as a string. This seems obvious, but it is not described anywhere in the LRM. The following is now supported:<br>
<code>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string line = "Hello there";<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string targ;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; initial targ = line[0:5];
</code>
</li>
<li>
The option <b>-fsmdebug</b> has been deprecated. A new letter code 'f' has been added to <b>+acc</b> to enable FSM detection and debugging. This also makes it possible to have module and instance bases selection with FSM debug. +acc without any letter code with automatically enable +acc=f.
</li>
<li>
Conditional timing check expressions are displayed as they appear in the HDL description.  In the past equivalent conditions were displayed.  For example:<br>
<code> 
  &&& (cond === 0)
</code>
<br>
was displayed as
<br>
<code>
  &&& (~cond)
</code>
</li>
<li>
In some cases the <b>-vmake</b> flag will be required to correctly capture Verilog source file dependencies.
</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="newfeatures"></a><b>New Features Added to 6.5a</b>
<ul>
<li>
Added limited support for export function debugging of outoftheblue DPI-C call. One can set breakpoints in or step through export function during the execution of outoftheblue DPI-C call. However, this support is only limited in the outoftheblue DPI-C calls that are initiated from inside a SystemC thread or a SystemC method:
<br>
<UL>
<LI>To turn on the debugging support of outoftheblue DPI call initiated from inside a SystemC thread, vsim switch <b>-dpioutoftheblue 2</b> is needed. 
<LI>To turn on the debugging support of outoftheblue DPI call initiated from inside a SystemC method, Both vsim switch <b>-scdpidebug</b> and <b>-dpioutoftheblue 2</b> are needed.
</UL>
<br>
For any other kinds of outoftheblue DPI-C calls, no debugging support is available.
</li>
<li>
The error for mixing continuous and procedural assignments to elements of a vector or packed variable is now suppressible. This is the error message:
<br>
<code>
** Error: (vlog-3838) bug15253.sv(56): Variable 'bsu_csr_pdatM3nnH' written by continuous and procedural assignments. See bug15253.sv(44).
</code>
<br>
This error message can be avoided by using the command: vlog <b>-suppress 3838 bug15253.sv</b>. This also applies to vsim.
</li>
<li>
Transaction streams may be created with a full or relative path name.  If the path leads to an existing region, the stream will be created in that region.  The GUI icon for the stream depends on the region in which the stream appears.  (MVC streams do not follow this convention, having their own icons.)  To match a relative path, the tool may search upward from the calling region.  This change applies to streams created in SystemC, Verilog or System Verilog.  For example, "$create_transaction_stream(".top.dut.stream") will create a stream called "stream" in the region ".top.dut" if that region exists.
</li>
<li>
Designs can now record strings with transactions.  In Verilog/SystemVerilog, $add_attribute() has been enhanced so it can record an SystemVerilog 'string' type.  Strings written to regs will still be recorded as regs.  In SystemC, scv_tr_handle::record_attribute(), and other methods, have been enhanced to support 'std::string'.  Arrays of characters are still recorded as arrays and pointer to char is still a pointer.
</li>
<li>
Added the <b>-dpiforceheader</b> switch to vlog/vopt/vsim commands to force generate DPI header even when it is empty of function prototypes.
</li>
<li>
The XML report [commands: <b>coverage report -xml</b> and <b>vcover report -xml</b>] was not showing test attributes in the case where the <b>-testattr</b> argument was passed.
<br>
Now the report is showing them surrounded by the XML tags 
&lt;test&gt;&lt;/test&gt; for each test.
</li>
<li>
The vl_logic type is now supported in Value Change Dump (VCD) Files.</li>
<li>
This feature actually has been added to the 6.5 release.

Attributes in the Tracker window can be modified directly on the column cells.
Just double click on the cell and the entry field will appear for editing.  The
user is responsible for saving the changes.  When quiting the tool without saving changes, a confirming dialog will show to remind the user.
</li>
<li>
Recursive logging of class types is now supported with the <b>log -r -class &lt;classtype&gt</b>.  This command will log all objects of &lt;classtype&gt which come into existence after the command is invoked as well as recursively all types of properties of that &lt;classtype&gt that are also classes.  Use with caution as this could result in a large amount of logged data.
</li>
<li>
sccom invokes gcc/g++ based on the source file-extension. <br>
<ul>
<li>g++ on source files with C++ extensions - ".CPP",  ".cpp",  ".C",  ".c++",  ".cc",  ".cp", ".cxx and ".ii"
<li>gcc on source files with C source extensions - ".c" and ".i"
</ul>
Files with interchanged file-extensions and source contents should be compiled with "-x c" or "-x c++" gcc/g++ option. </li>
</ul>
</BODY>
</HTML>
