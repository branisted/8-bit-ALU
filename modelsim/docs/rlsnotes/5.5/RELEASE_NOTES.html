<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.72 [en] (X11; U; SunOS 5.5.1 sun4u) [Netscape]">
   <meta name="Author" content="Roger Rhino">
   <title>5.5 Release Notes</title>
</head>
<body text="#000000" bgcolor="#C0C0C0" link="#0000EE" vlink="#551A8B" alink="#FF0000">

<center>
<h1>
&nbsp;<a NAME="TOC"></a>Release Notes For Model<i>Sim</i> ALTERA Version 5.5</h1></center>

<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<center><b>1 March 2001</b></center>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>

<h4>

<hr WIDTH="100%"></h4>

<li>
<b>Product Installation and Licensing Information</b></li>

<br>For brief instructions about product installation please visit the
"install_notes" file on the Model Technology web site. The install_notes
file can be viewed at:
<br><a href="http://www.model.com/products/release.asp">http://www.model.com/products/release.asp</a>
<br>For detailed information about product installation and licensing see
the ModelSim Start Here Guide. The manual can be downloaded from:
<br><a href="http://www.model.com/support/documentation.asp">http://www.model.com/support/documentation.asp</a>
<br>&nbsp;
<li>
<b>How to Get Support</b></li>
<!-- EDIT HERE -->
<p>This OEM product is supported by Altera Corporation

<ul>
<li>Telephone Support
<p>
Call 800-800-3753 or 408-544-7000
<br>&nbsp;
<br>&nbsp;

<li>Email Support
<p><a href="mailto:support@altera.com">support@altera.com</a>
<br>&nbsp;
<br>&nbsp;

<li>World-Wide-Web Support
<p><a href="https://websupport.altera.com/">https://websupport.altera.com/</a>
<br>&nbsp;
<br>&nbsp;
</ul>

<br>&nbsp;
<li>
<b>Release Notes Archives</b></li>

<br>For release notes of previous versions visit the release notes archive
at: <a href="http://www.model.com/support/default.asp">http://www.model.com/support/default.asp</a>
<p>
<hr WIDTH="100%">
<h3>
<b>Index to Release Notes</b></h3>

<blockquote>
<li>
<u><a href="#keyinfo">Key Information</a></u></li>

<li>
<u><a href="#uidefects">User Interface Defects Repaired in 5.5</a></u></li>

<li>
<u><a href="#verilogdefects">Verilog Defects Repaired in 5.5</a></u></li>

<li>
<u><a href="#plidefects">PLI Defects Repaired in 5.5</a></u></li>

<li>
<u><a href="#vhdldefects">VHDL Defects Repaired in 5.5</a></u></li>

<li>
<u><a href="#flidefects">FLI Defects Repaired in 5.5</a></u></li>

<li>
<u><a href="#vitaldefects">VITAL Defects Repaired in 5.5</a></u></li>

<li>
<u><a href="#mixeddefects">Mixed Language Defects Repaired in 5.5</a></u></li>

<li>
<u><a href="#generaldefects">General Defects Repaired in 5.5</a></u></li>

<li>
<u><a href="#mgcdefects">Mentor Graphics DR's Repaired in 5.5</a></u></li>

<li>
<u><a href="#knowndefects">Known Defects in 5.5</a></u></li>

<li>
<u><a href="#productchanges">Product Changes to 5.5</a></u></li>

<li>
<u><a href="#newfeatures">New Features Added to 5.5</a></u></li>

<br>&nbsp;</blockquote>

<hr WIDTH="100%">
<p><a NAME="keyinfo"></a><b>Key Information</b>
<ul>
<li>
You must recompile or refresh your models if you are moving forward from
5.4x or earlier release versions. See "Regenerating your Libraries" in
the ModelSim Start Here Guide for more information on refreshing your models.</li>

<!-- EDIT HERE -->
<li>The following lists the supported platforms:
   <ul>
   <li>win32aloem - Windows 95, 98, Me, NT, 2000
   <li>sunos5aloem - Solaris 2.6, 7, 8
   <li>hp700aloem - HP-UX 10.2, 11
   </ul>
<br>&nbsp;
<li>
The Windows 95 platform will no longer be supported starting with the next
major ModelSim release, version 5.6.</li>
</ul>
<a NAME="uidefects"></a><b>User Interface Defects Repaired in Release 5.5</b>
<ul>
<li>
Always blocks, initial blocks, and continuous assignments that were located
within a module and were inlined, displayed incomplete information in the
Dataflow Window. This was caused by the optimization performed by inlining
which in turn did not generate the necessary debug information.</li>

<li>
The Wave Window has been fixed to correctly perform the <b>restart </b>command
when the Wave Window contains signals from multiple datasets.</li>

<li>
Checks were missing in the wave and list format files to verify the existence
of the datasets required by the format file. Appropriate error messages
are now displayed if the requisite datasets do not all exist. The -force
option can be used to force the execution of a wave or list format file
even if all needed datasets are not available. Error messages will be generated
for signals referencing nonexistent datasets.</li>
</ul>
<a NAME="verilogdefects"></a><b>Verilog Defects Repaired in Release 5.5</b>
<ul>
<li>
The simulator failed to report the error that a port instance of an INTERCONNECT
or PORT SDF construct was not found in a VITAL design if the instance name
needed to be escaped (for a VHDL extended identifier), but was not escaped.</li>

<li>
Environment variables used with the +incdir switch were not expanded if
the +incdir switch occurred in a file read with the -f switch or the .ini
OptionFile entry.</li>

<li>
The `include directive did not accept a macro for the filename.&nbsp; For
example, the following did not work:</li>

<ul>`define myfile "myfile.v"
<br>`include `myfile</ul>

<li>
The simulator issued a false error message when annotating an SDF IOPATH
delay onto a Verilog path delay that drives a registered output port.</li>

<li>
During simulation, an event control construct that contained an expression
could be incorrectly triggered. The following code fragment:</li>

<ul>always @(some_wire === 1'b1)
<br>begin ..
<br>end
<p>assign some_wire = 1'b0;</ul>
would always be triggered at time zero by some_wire taking the value '0'.
The problem was that the initial value of an expression was always assumed
to be X. When some_wire gets the value '0', the expression (some_wire ==
1'b1) is evaluated to '0' and since there is a 'X' -> '0' transition the
always block is executed. In 5.5 the initial value of expression in event
control constructs is computed correctly.
<li>
vlog was incorrectly handling a module with ports that were shorted when
-fast was on. Ports that were shorted by repeating the formal name multiple
times in the port list did not behave correctly. For example:</li>

<ul>module test(a, a);
<br>inout a;
<br>end module</ul>

<li>
In some cases, the default statement of a Verilog case statement did not
show up as an executable line. This affected the code coverage by reducing
the line count. In a few cases, this caused a crash when the default case
was executed because temporary variables were not up to date.</li>
</ul>
<a NAME="plidefects"></a><b>PLI Defects Repaired in Release 5.5</b>
<blockquote>
<li>
tf_ievaluatep() messed up the internal current instance pointer so that
subsequent calls to certain tf functions (such as tf_resychronize()) did
not work properly.</li>

<li>
The problem occurred when loading two PLI applications where one referenced
init_userfs and the other referenced veriuserfs. If veriusertfs was loaded
after init_usertfs, veriuserfs' functions were never registered.</li>
</blockquote>
<a NAME="vhdldefects"></a><b>VHDL Defects Repaired in Release 5.5</b>
<ul>
<li>
The simulator failed to check lengths of port maps assigning to slices
of ports. The simulator was changed so it checks that the length of an
actual array is identical to the length of the slice of a formal port.
If a mismatch occurs, a fatal error is reported.</li>

<li>
If a configuration explicitly configured an instance to open, the default
configuration for that instance was incorrectly used at simulation time.&nbsp;
As of 5.5,&nbsp; if the user explicitly configures an instance to open,
i.e. for all: component_name use open; the default configuration will not
be used and the instance will be left unbound. No warning will be issued
for the unbound component instance since the user explicitly indicated
that it remain unbound.</li>

<li>
A port expression in a component declaration in a package crashed vcom
if the port was an unconstrained vector using a generic attribute (e.g.
gen'length) to constrain the port size.</li>

<li>
When a non resolved scalar's signal assignment was within a conditional
generate block, the compiler incorrectly determined that it conflicted
with other signal assignments to the same signal. During its search for
conflicting signal assignments, the compiler now determines if they are
within generate statements before emitting error messages.</li>

<li>
vcom crashed when a case selector expression was a loop variable declared
using the `range attribute. For example:</li>

<ul>for i in foo`range loop
<ul>....
<br>case i ...</ul>
</ul>

<li>
Run time range checking on sub ranges of integer ports where the sub-range
direction is different from the base type resulted in the following incorrect
error message:</li>

<ul>"Range of actual does not intersect with range of formal"</ul>

<li>
vcom incorrectly produced the error "Aggregate with multiple choices has
non-static others choice." when analyzing a multi-dimension array containing
a static-sized dimension with an others choice and higher non-static dimensions
(with only static choices). The compiler now differentiates between array
dimensions.</li>

<li>
Ports that were one-dimentional arrays in some cases appeared in the Wave
Window or in GUI commands and had incorrect bounds. This defect did not
affect simulation results.&nbsp; The cause of the problem was an optimization
that reduced the number of signals in the design.</li>
</ul>
<a NAME="flidefects"></a><b>FLI Defects Repaired in Release 5.5</b>
<ul>
<li>
Using mti_Sensitize() on a signal that had a <b>force</b> command active
on it caused the force to be forgotten.</li>
</ul>
<a NAME="vitaldefects"></a><b>VITAL Defects Repaired in Release 5.5</b>
<ul>
<li>
The Simulator failed to detect some cases where instance names in the SDF
file were not found in the design. As a result annotation did not take
place, but no errors were issued.</li>
</ul>
<a NAME="mixeddefects"></a><b>Mixed Language Defects Repaired in Release
5.5</b>
<ul>
<li>
If a signal&nbsp; in a VHDL design unit is connected to a Verilog model's
inout port, a <b>force -freeze </b>command<b> </b>applied to the signal
appeared to have no effect. The Verilog signal's contribution was erroneously
combined with the VHDL signal's effective value. Verilog net evaluation
has been changed to ignore the Verilog contribution in this case.</li>

<li>
The <b>force -deposit </b>and <b>force -freeze</b> commands will produce
an error message if a Verilog net is connected to an inout port, which
connects to an upper level VHDL signal. The force command should be applied
to the upper level signal.</li>

<li>
The <b>force -drive</b> command applied to a Verilog net, which is an inout
port connected to an upper level std_logic VHDL signal, caused the VHDL
signal to transition to "X". The net's initialization actions were overwritten
by the <b>force </b>command. The simulator has been changed to not overwrite
net initialization actions until after the net has been initialized.</li>
</ul>
<a NAME="generaldefects"></a><b>General Defects Repaired in Release 5.5</b>
<blockquote>
<li>
The path name specified in the modelsim.ini or *.mpf file for the entry
OptionFile did not expand the environment variable. For example:</li>

<dd>
Environment</dd>

<dd>
Home = /user/johndoe</dd>

<dd>
modelsim.ini</dd>

<dd>
...</dd>

<dd>
[vlog]</dd>

<dd>
OptionFile = $HOME/vlog.opt</dd>

<dd>
...</dd>

<br>Previously the Verilog compiler would attempt to open the file $HOME/vlog.opt.
In 5.5 the Verilog compiler will attempt to open the file /user/johndoe/vlog.opt.
<li>
The <b>write list</b> command failed and issued a usage message if the
filename argument contained the string "-wind"&nbsp; or "event".</li>

<li>
default_radix and the <b>radix</b> command were not working correctly in
-view mode. The radix default is now defined to be 0 (it was defined as
1) and any time a radix is radix_default the current global default_radix
is used. All GUI tree item radices are set to 0 at initialization and therefore
take the global default_radix. radix_symbol had been defined to 0 which
had the affect of explicitly setting every tree item to symbolic resulting
in the <b>radix</b> command being ignored. radix_symbol is now defined
to be 1 (it was defined as 0). You should see no change in how values are
displayed because symbolic is the default global default_radix. Any command
that takes a radix will now accept -symbolic and -default_radix. Several
commands did not accept these switches previously. Setting the radix configuration
on an item in the GUI will accept -radix default_radix or -radix symbolic,
as well as the other radices.</li>

<li>
A simulation crashed occurred when mti_getNextNextEventTime() was called
and there was a cancelled event in the long delay list which caused the
list to be empty and there were also events on the time wheel at the same
time.</li>
</blockquote>
<a NAME="mgcdefects"></a><b>Mentor Graphics Defect Reports Repaired in
Release 5.5</b>
<ul>
<li>
277524 - Need a better method to close the color palette in the Wave Window.</li>

<li>
277776<b> </b>- ModelSim did not perform checks on arguments 6, 7 and 8
of $setuphold.</li>

<li>
278081 - vmake does not account for architecture changes in dependent libraries.</li>

<li>
288798 - When a non-resolved scalar's signal assignment was within a conditional
generate block, the compiler incorrectly determined that it conflicted
with other signal assignments to the same signal. During its search for
conflicting signal assignments, the compiler now determines if they are
within generate statements before emitting error messages.</li>

<li>
287433 - Verilog arrays of instances have been implemented for release
5.5.</li>

<li>
290764 - The message "WARNING[10]: mux41.v(8): Redefinition of macro: BUS_WIDTH"&nbsp;
occurs when compiling multiple files on a single command line.</li>

<li>
283149 - Error checking is not consistent for Port Map size mismatches.</li>

<li>
291330 - The simulator crashed if an old version of ieee.math_real package
was used in conjunction with math_real acceleration.</li>

<li>
292731 - The simulator hangs after the mgcld license is interrupted.</li>

<li>
282017 - Add Apex 20KE libraries to FPGA Library Manager.</li>

<li>
291502 - The "new project" menu selection copies the contents of the MODELSIM
environment variable to the project directory.</li>

<li>
275199 - The FLI call mti_SetGenerics() does not always work correctly
with Verilog modules.</li>

<li>
293345 - A Verilog netlist which instantiates Vital models incorrectly
used Vital default timing when the timing from the SDF file should have
been used.</li>
</ul>
<a NAME="knowndefects"></a><b>Known Defects in Release 5.5</b>
<ul>
<li>
When I invoke "vsim -lib vhwork", I expected the Library entry in the workspace
of the main window to be set to the value vhwork and shows my design units.
However, it shows the default work lib.</li>

<li>
The library entry in the DESIGN TAB of the Load Design dialog.</li>

<li>
In the Projects source area, Windows 95 drag and drop from windows explorer
does not work.</li>

<li>
Performance issue when re-displaying the workspace. If a work lib with
a thousand design units is in the workspace structure, it seems to take
a while when this structure is re-displayed.</li>

<li>
Compare commands are Wave Window specific.</li>

<br>In one Wave Window, add some compare signals <b>Compare > Run</b> to
generate some data In a new wave window, add some other compare signals
with some other criteria <b>Compare > Run</b> in this new window. The output
of the <b>Compare > Differences > Show</b> command gives data for both
runs. I would think the compare information is Wave Window specific since
the two windows I have are comparing signals with different criteria's.
Also, the compare (see -prev -next buttons) behaves as if both runs are
the same.&nbsp; That is, if I keep doing -next, the DIFF report will take
me from one window and jumps to the second. Other commands that are not
window specific are:
<ul><b>Compare > Differences > Save</b>
<br><b>Compare > Differences > Write Report...</b>
<br><b>Compare > Rules > Show</b>
<br><b>Compare > Rules > Save</b></ul>
One behavior which was consistent with what I expect were commands like
<b>Compare
> Differences > Clear</b>. They only cleared the compare information in
the active Wave Window.
<li>
A compare is started, do some compare runs, if a <b>compare reload</b>
command is unsuccessful, vsim does an implicit compare end and all the
data was lost. No chance to save any data.</li>

<li>
Virtual verilog signals can not be created from a wave.do on a loaded dataset.
It works properly on a loaded Verilog design, VHDL design, or a VHDL dataset.&nbsp;
The problem exists for PE and SE. A Reload of verilog virtual signals works.
The problem is with functions.</li>

<li>
Problem with Verilog strength. These virtual functions are defined. clk
and strb are verilog scalar nets.</li>

<ul># virtual function {not clk} bar
<br># /top/m/bar
<br># virtual function {not strb} bar
<br># /top/m/bar001</ul>
In the wave tree write output, its values shows as N/A
<li>
Windows 95- new layout Wave window can't be grown. It snaps back to original
placement.</li>

<li>
When one views the Signals Window, the children of an array of verilog
registers show up the correct values.&nbsp; The problem is in the tree
<b>write</b>
command for the Signals Window, its values are written as (null).</li>

<li>
In some cases loading a shared library fails on hppa64 and rs64. For hppa64</li>

<ul># load ./testload.sl
<br># ERROR: dynamic loading is not currently available on this system</ul>

<li>
The WLFSaveAllRegions modelsim.ini variable (or the setting in the Simulation
Options for the same operation) do not change anything. This feature is
not implemented yet.</li>

<li>
When using the browser for <b>compare->add->region</b>, the current environment
gets changed when anything is selected in the browser.</li>

<li>
The List Signal Search dialog does not always display the name of the selected
signal.&nbsp; Names of the format /top/signame do not display.&nbsp; Names
of the format signame do.&nbsp; If I select multiple signals of the first
format, all I see are commas in the Signal Name(s) box.</li>

<li>
List Window Marker problems</li>

<ul>
<li>
If I add a bunch of signals to the List Window then select <b>Markers >
Add Marker</b> with nothing selected in the List Window, then the 2nd list
line is highlighted (?).&nbsp; If I then click on another line then no
marker outline is left on the supposedly added marker line.</li>

<li>
If I click on some line and do <b>Markers > Add Marker</b> then the line
I had selected is marked with an outline but the second list line is highlighted(!).</li>

<li>
With a marker added on a particular line, if I then click on various lines
in the List Window then the marker outline occasionally moves to some other
line (usually the previously selected line). Markers don't stay put.</li>
</ul>

<li>
&nbsp;List Window scrolling problems</li>

<ul>
<li>
When using the Find dialog box to find signals, when the next signal is
outside of what is currently showing in the List Window, the window is
not scrolled to show the next item found.</li>

<li>
If you do a find to the left and the search goes past the beginning of
the list to wrap around to the end of the list and there's a lot of stuff
in the list window that is out of view, then the List Window scrolls right
only one page even though that does not bring the next selected item into
view.</li>

<li>
When doing a search forward on an item's values, the next line to match
is scrolled to be the top line but the scroll bar stays the full length
of the scroll bar region.&nbsp; (This is in a List Window where there aren't
very many lines of data.)</li>

<li>
The documentation for the List Window says that the up and down arrow keys
are supposed to move the line selection up or down one line.&nbsp; The
current behavior is that the up and down arrow keys behave exactly the
same as the TAB and shift-TAB keys (searches for next transition).</li>
</ul>

<li>
When using F3 in the Source Window to Find Next, it always skips the Next
and finds the Next Next.&nbsp; The menu item seems to work OK.</li>

<li>
The key shortcut for <b>Source > Edit > Replace</b> is indicated to be
ESC R.&nbsp; Hitting ESC R simply inserts an "r" at the current insertion
point. This is an unix only problem.</li>

<li>
In some cases, redhat 6.0 did not have coverage for the entire source file.
There is no problem with redhat 6.1, 6.2 and 7.0.</li>

<li>
After changing the height of a compare signal in the Wave Window using
the Signal Properties dialog, the next zoom causes the entire scroll bar
region to turn red and the 'triangle' icon to show no differences.</li>

<li>
&nbsp;Even though the hierCutoff and rankCutoff variables are set to 1
in pref.tcl, when I bring up the Hierarchical and Ranked Profile windows
I see a default % of 0.&nbsp; The default is supposed to be whatever the
cutoff is set to.</li>

<li>
&nbsp;When single-stepping in a .coverage_source window, as long as the
context stays within the current file the coverage numbers can be seen
to increment with each step.&nbsp; If a step causes another source file
to be brought up, then the coverage numbers in the first column are all
screwed up.&nbsp; The only way to fix them is to click on the name of the
current source file in the coverage_summary window, but even this does
not always work.</li>

<li>
On the left side of the Wave Window is a tree displaying all of the signal
names being waved.&nbsp; If those are arrays, there is a plus to the left
of the name so that you can open it and access the individual elements
of the array.&nbsp; If you have really long signal names and you scroll
all the way to the right to see the end of the names and then click on
a plus to open an array, the horizontal scroller is reset all the way to
the left.&nbsp; So I have to scroll all the way to the right again to see
the signal names.</li>

<li>
This is from Lesson 12 in the Tutorial.</li>

<br>When comparing the current sim dataset against a previous run and when
I hit the Find Next Difference button in the Wave Window and the next difference
happens to be a vector sub-element, the top signal in the Wave Window is
highlighted instead of the signal with the difference (example: /top/paddr(3)).&nbsp;
All signals are visible in the Wave Window at the time.
<li>
Create a List Window with some signals, choose <b>Prop > Display Props</b>,
select the Triggers page, click on Trigger Gating: Expression and press
the Use Expression Builder button.&nbsp; Select a signal in the List Window
and press the Insert Selected Signal button in the Expression Builder.&nbsp;
Nothing happens. The selected signal should be added to the expression.</li>

<li>
Dragging a virtual constant out of a parent virtual signal in the Wave
Window crashes with the following error message:</li>

<ul>Fatal WLF Error (14): evaluating expression
<br>"foo5(2)" Internal error. Unallocated result valueIn some cases the
simulator failed when attempting to reload format of a verilog bit slice.</ul>

<ul>--- fragment of dofile
<br>add wave {y(13)}
<br>write format wave ./results/vlogbit.fmt
<br>do ./results/vlogbit.fmt
<br>&nbsp;--- fragment of transcript
<br>&nbsp;# add wave -noupdate -format Logic
<br>{virtuals:/v/y[13]}
<br># ERROR: No objects found matching
<br>"virtuals:/v/y[13]"
<br># Executing ONERROR command at macro
<br>././results/vlogbit.fmt line 3</ul>

<li>
The <b>left</b> and <b>right</b> commands with -expression (temporary virtuals)
do not work correctly. This problem is platform specific. It affects only
rs6000 rs64 hp700 hppa64 linux.</li>

<li>
Failure in cold restore, warm restore, restart -f all failures with compare
signal name changes using extended identifiers.</li>

<li>
Verilog virtual aliases are not saved in the wave format. The List Window
equalent is OK and correct.</li>

<li>
Verilog virtual bus made of slices does not display waveforms for individual
bits of virtual bus. The waveform for the bus is displayed but flattening
the bus to look at the individual bits does not show waveforms. NOTE: This
does not occur when the virtual Verilog bus is made up of individual bits.</li>

<li>
Wave.do that is run with a loaded dataset fails for either VHDL or Verilog
when using virtual bus created from bus slices. I was able to recreate
this with the examples counter.vhd and counter.v. The message that is reported
is: "unrecognized dataset prefix: sim"</li>

<li>
After closing a dataset for either VHDL or Verilog the Menu <b>File>Change
Directory</b> remains shaded so that it cannot be used.&nbsp; The "cd"
command still works to change directories.</li>

<li>
Virtual constant does not display a wave in the Wave Window. Example:&nbsp;
virtual signal {'1'} foo. The value of foo will be 1, but no wave gets
drawn.</li>

<li>
Given the following command: virtual signal -install {/top/m/i} foo, in
the Signals Window, this signal is seen as foo In the Wave Window, this
signal is seen as /top/m/i. View declaration of signal foo from the Signals
Window worked.&nbsp; View declaration of signal foo from the Wave Window
did not work. The Wave Window is correct. The Signals Window behaves incorrectly.</li>

<li>
Issue with Source Window</li>

<br>If a src file is in DOS format (with CONTROL M's), it appears as double-spaced
in the Source Window. This mess up view declaration functionality, breakpoints
functionality, Process Window functionality.
<li>
This bug also exists in 5.4e. A virtual signal foo is defined. <b>checkpoint</b>
command is issued. Then, virtual count gives a count of 0. Shouldn't it
be 1?Nothing is saved during <b>virtual save</b> command. The <b>virtual
count </b>and <b>save</b> commands before the checkpoint give the correct
expected results. Also <b>virtual show</b> and <b>virtual describe</b>
foo after the checkpoint give the correct expected results. Somehow, count
and save are not working correctly.</li>

<li>
Entering commands used in the Wave or List Window such as <b>up</b>, <b>down</b>,
<b>left</b>,
<b>right</b>,
etc., when no Wave or List Window is open causes the window to be opened.
It makes sense to raise the window or deiconify it, but it should not create
an empty window if none existed before.</li>

<li>
There is an inconsistency in how the path separator works when parsing
commands. Given that the path separator in the example below is "/ ".top.clk
should work.</li>

<ul>&nbsp; echo $PathSeparator
<br>&nbsp; # /
<br>&nbsp;exa /top/clk
<br>&nbsp;# 1
<br>&nbsp; exa /clk
<br>&nbsp; # 1
<br>&nbsp; exa clk
<br>&nbsp;# 1
<br>&nbsp; exa .top.clk
<br>&nbsp; # 1
<br>&nbsp;exa .clk
<br>&nbsp;# evaluating expression ".clk"
<br># No object found matching clk in context /
<br># Item '.clk' not found</ul>

<li>
In the compare wizard, an opened dataset and a sim dataset was specified
to be compare started. Simulation signals had been logged but no simulation
run was done yet. Also, the button "Update after simulation run" is NOT
checked. On clicking the "Compute Diffs Now" button in the wizard, This
message was given "Null time range for signal compare". This message was
not obvious. Maybe the message can be improved to "Cannot compare run because
No simulation data available yet" Now I <b>run </b>500. If I do a compare
info command now, this message is given: "No comparison differences" This
message was misleading. Does it mean my comparisons were all matches? Shouldn't
it be "No available compare data, please do a compare run or compare update
first" I had not done a compare run or compare update, so there should
be no compare results or data. The Wave Window is correct at this point,
the compare signal does not show any compare result.</li>

<li>
In the Source Window select <b>Edit > Find</b>. The Find dialog box comes
up on top of the Source Window. If you enter some text and hit Find Next
and then move the Find dialog box out of the way, the text that was found
is not highlighted.&nbsp; Highlighting appears to happen only when the
next occurrence is found and the Find dialog box is not covering it.&nbsp;
It would be better if the Find dialog box came outside of the Source Window
next to one edge or somewhere else less in-the-way.</li>

<li>
In the FLI Reference manual, the following link instruction for the 64-bit
RS/6000 platform is incorrect:</li>

<ul>cc -o app.sl app.o -q64 -bE:app.exp \
<br>-bI:/&lt;install_dir>/modeltech/rs64/mti_exports \
<br>-Wl,-G -bnoentry</ul>
The correct link command is:
<ul>&nbsp;ld -o app.sl app.o -b64 -bE:app.exp \
<br>-bI:/&lt;install_dir>/modeltech/rs64/mti_exports \
<br>-bM:SRE -bnoentry -lc</ul>

<li>
No waves are displayed in the Wave Window for virtual constants or virtual
functions that are children of virtuals.</li>

<li>
Virtuals concatenations which contain a virtual constant always display
a "value--even" when non-constant children are "-No Data-". For example:</li>

<ul>virtual signal {'1' &amp; clk &amp; prdy} foo</ul>

<li>
Virtual signals which are concatenation of a signal from a view dataset
and a sim dataset show "-No Data-" in the Signals Window even after simulation.</li>

<li>
On Win32 platforms when using Mentor Graphics Licensing, inappropriate
queueing may take place when more than one license feature could fulfill
a request (e.g., When a VHDL simulator license is requested, the user may
get queued for a qhsimvh when there is an msimhdlsim available). The workaround
in GUI mode is to cancel the queueing dialog and then the available feature
will be checked out.&nbsp; The only workaround in command line or batch
mode is to invoke with the "-lic_noqueue" switch.</li>
</ul>
<a NAME="productchanges"></a><b>Product Changes to Release 5.5</b>
<ul>
<li>
The mouse button definitions in the Wave Window have changed to be more
consistent&nbsp; with the rest of ModelSim. There is now no difference
between a 2-button and 3-button mouse. The LMB always positions the cursor
and RMB always brings up a pop-up menu. The MMB on a 3-button mouse still
performs a zoom area operation. Control-Button-1 was added and also performs
a zoom area operation for those stuck with a 2-button mouse (This also
works with a 3-button mouse.)</li>

<br>This change eliminates the problem sometimes seen on Windows systems
where the OS incorrectly identifies a 3-button mouse as a 2-button mouse.
A 3-button mouse in such an environment will now work correctly. To summarize:
<ul>
<li>
2-button mouse no longer uses RMB for zoom.</li>

<li>
Control-Button-1 can be used to perform a zoom.</li>
</ul>

<li>
Virtual signals created by the Combine dialog box in the Wave Window no
longer have default labels associated with them. The full path of the created
virtual signal is now displayed by default.</li>

<li>
Virtual signal children names in the Wave Window now conform to the display
properties. The names were displayed as an index and path, but the path
did not recognize the display properties.</li>

<li>
Prior to 5.5 there was a global flag that enabled and disabled all breakpoints.
As of 5.5 the global flag is no longer present.&nbsp; Now doing <b>disable</b>
or <b>disable -all</b> is the same as disabling each breakpoint individually.&nbsp;
The same is true for <b>enable</b> and <b>enable -all</b>.</li>

<li>
Added a compile button to the Source Window toolbar that will compile the
current file being viewed in the Source Window.</li>

<li>
The -all switch was removed from the <b>quit </b>command. The <b>dataset
close -all</b> command has replaced <b>quit -all</b>.</li>
</ul>
<a NAME="newfeatures"></a><b>New Features</b> <b>Added to Release 5.5</b>
<ul>
<li>
Waveform Comparison</li>

<ul>The ModelSim Waveform Comparison feature allows you to compare the
current live simulation against a reference wave logfile or dataset (.wlf
file), compare two saved datasets, or compare different parts of the current
live simulation. You can view the results of these comparisons in the Wave
and List windows and generate a text file of the results in the Main window.
With the Waveform Comparison feature you can:
<ul>
<li>
specify the signals or regions to be compared,</li>

<li>
define tolerances for timing differences,</li>

<li>
set a start time and end time for the comparison,</li>

<li>
limit the comparison to a specific number of timing differences, and</li>

<li>
step through a succession of timing differences via buttons in the Wave
Window.</li>
</ul>
By default, Waveform Comparison computes the timing differences between
test signals and reference signals from time zero to the end of the shortest
dataset, or to the end of the current live simulation. But you can also
specify an optional start time and end time, or you can limit the comparison
to a specific number of encountered timing differences. In addition, you
can exclude windows of time with -when conditions in either the clock definitions
or in the <b>compare signal </b>command. The display will indicate intervals
of time during which no attempt was made to compute differences.
<br>All waveform differences encountered in the waveform comparison are
summarized and listed in the transcript area of the Main Window and show
up in the waveform display of the Wave Window. You can also write a listing
of the differences to a file using the <b>compare info</b> command.
<br>Timing differences are shown in the Wave Window with difference markers.
New icons in the Wave Window allow you to go to the first and last differences
encountered and step forward and backward through successive differences
ordered in time. You can also use the Tab and Shift-Tab keys on your keyboard
to move to the next or previous difference of a selected signal.
<br>Waveform Comparison is initiated from either the Main or Wave Windows.
From either window, select: <b>Compare > Start Comparison</b> or <b>Compare
> Comparison Wizard</b>.
<br>The command set for the waveform comparison feature is listed below:
<ul>
<li>
<b>compare annotate</b> allows a difference to be flagged as ignore, or
an additional text string to be attached</li>

<li>
<b>compare clock</b>&nbsp; defines a clock for clocked comparison; or,
if -delete is specified, deletes a previously defined clock</li>

<li>
<b>compare end</b> destroys the compare data structures and forgets clock
definitions and signals selected for comparison.</li>

<li>
<b>compare delete</b> deletes a signal or region from the current open
comparison.</li>

<li>
<b>compare info</b>&nbsp; writes out results of the comparison; writes
to the transcript unless the -write option is specified.</li>

<li>
<b>compare list</b> shows all the compare region and compare signal commands
currently in effect</li>

<li>
<b>compare start</b>&nbsp; initializes internal data structures for waveform
compare</li>

<li>
<b>compare options</b>&nbsp; sets values for various compare options on
the Tcl parser side; when subsequent commands are called, these values
become the defaults.</li>

<li>
<b>compare add</b> defines a comparison between the signals in a specified
reference design region and the signals in a specified test design region</li>

<li>
<b>compare reset</b>&nbsp; clears the current compare differences, allowing
another compare start to be executed</li>

<li>
<b>compare reload&nbsp;</b> reloads comparison differences to allow viewing
without recomputation</li>

<li>
<b>compare savediffs&nbsp;</b> saves the comparison result differences
in a form that can be reloaded later</li>

<li>
<b>compare saverules&nbsp;</b> saves the comparison setup information (or
"rules") to a file that can be re-elected later as a command file; saves
compare options and all clock definitions and region and signal selections</li>

<li>
<b>compare see</b> causes the specified compare difference to be made visible
in the specified wave window, using whatever horizontal and vertical scrolling
is necessary</li>

<li>
<b>compare signal&nbsp;</b> defines a comparison between a signal in the
reference design and a signal in the test design</li>

<li>
<b>compare run </b>registers required callbacks and runs the difference
computation on the signals selected for comparison; reports the total number
of errors found.</li>

<li>
<b>compare stop</b> used internally by the compare stop button to suspend
comparison computations in progress</li>

<li>
<b>compare update</b> used internally to update the comparison differences
when comparing a live simulation against a .wlf file</li>
</ul>
Waveform comparison requires its own license and can be used with either
SE or PE.
<br>Please see the Waveform Comparison chapter of the ModelSim User's Manual
for more details.</ul>

<li>
ModelSim Projects</li>

<ul>Projects have improved a great deal from earlier versions. Some of
the key differences include:
<ul>
<li>
A new interface eliminates the need to write custom scripts.</li>

<li>
You don't have to copy files into a specific directory; you can establish
references to files in any location.</li>

<li>
You don't have to specify compiler switches; the automatic defaults will
work for many designs. However, if you do want to customize the settings,
you do it through a dialog box rather than writing a script.</li>

<li>
All metadata (compiler settings, compile order, file mappings) are stored
in the project .mpf file.</li>
</ul>
Please see the Projects and Systems Initialization chapter of the ModelSim
User's Manual for more details.</ul>

<li>
Gate-level Optimizations</li>

<ul>The Verilog compiler's "-fast" option is used to analyze and optimize
an entire design for improved simulation performance. This option improves
performance for RTL, behavioral, and gate-level designs.
<br>ModelSim's default mode of compilation defers module instantiations,
parameter propagation, and hierarchical reference resolution until the
time that a design is loaded by the simulator. This has the advantage that
a design does not have to be compiled all at once, allowing independent
compilation of modules without requiring knowledge of the context in which
they are used.
<br>Compiling modules independently provides flexibility to the user, but
results in less efficient simulation performance in many cases. For example,
the compiler must generate code for a module containing parameters as though
the parameters are variables that will receive their final values when
the design is loaded by the simulator. If the compiler is allowed to analyze
the entire design at once, it can determine the final values of parameters
and treat them as constants in expressions, thus generating more efficient
code. This is one example of many optimizations that require analysis of
the entire design. Using the -fast switch enables these performance optimizations
and requires the entire design to be analyzed at once.
<br>Gate-level designs often have large netlists that are slow to compile
with -fast. In most cases, we recommend the following flow for optimizing
gate-level designs:
<ul>
<li>
Compile the cell library using -fast and the -forcecode argument. The -forcecode
argument ensures that code is generated for in-lined modules.</li>

<li>
Compile the device under test and test bench without -fast.</li>

<li>
Create separate work directories for the cell library and the rest of the
design.</li>
</ul>
One case where you wouldn't follow this flow is when the test bench has
hierarchical references into the cell library. Optimizing the library alone
would result in unresolved references. In such a case, you'll have to compile
the library, design, and test bench with -fast in one invocation of the
compiler. The hierarchical reference cells are then not optimized. You
can use the <b>write report </b>command and the -debugCellOpt argument
to the vlog command to obtain information about which cells have and have
not been optimized. <b>write report </b>produces a text file that lists
all modules. Modules with "(cell)" following their names are optimized
cells. For example,
<br>Module: top
<br>Architecture: fast
<br>Module: bottom (cell)
<br>Architecture: fast
<br>In this case, both top and bottom were compiled with -fast, but top
was not optimized and bottom was. The -debugCellOpt argument is used with
-fast when compiling the cell library. Using this argument results in Transcript
Window output that identifies why certain cells were not optimized. Please
see the Verilog Simulation chapter of the ModelSim User's Manual for more
details.</ul>

<li>
VHDL performance improvements</li>

<ul>
<li>
vcom now accelerates cells containing VitalMux statements for the common
cases of 2, 4 and 8 inputs.</li>

<li>
Currently, unless VHDL files are compiled with the -nocheck switch, the
simulator will perform range and index checks. A range check verifies that
a scalar value defined with a range subtype is always assigned a value
within its range. An index check verifies that whenever an array subscript
expression is evaluated, the subscript will be within the array's range.
To improve performance, range checking will no longer be performed without
explicitly stating the need for range checking. Index checks will still
be performed by default, since they prevent accesses outside array bounds
that could result in segmentation violations. To obtain range checking,
the -rangecheck switch has been added. The meaning of the -nocheck switch
has not been altered: range and index checks are disabled. Two new key/value
entries have been added to the modelsim.ini file. When RangeCheck=1, range
checking is enabled for all compiles. When NoIndexCheck=1, index checking
is disabled for all compiles.</li>
</ul>

<li>
Verilog case statement evaluator performance improvement</li>

<ul>When the statements casex and casez have constant selectors, the number
of selectors is large and all are less than 32 bits. Significant performance&nbsp;
improvements may be achieved from the new case statement evaluator.</ul>

<li>
Waveform Viewer License</li>

<ul>A new license feature has been added which allows you to view an existing
waveform (.wlf file). The viewer license does not allow simulation, it
only allows viewing a waveform.
<br>There is a new dialog box for license queueing on a waveform viewer
license. Instead of just allowing a user the option to "Cancel" rather
than wait for the queued viewer license, this new dialog has a second option
to try for either a viewer or a simulator license whichever is available
first. There is a new command line switch for control of viewer licensing
behavior. The new switch is "-lic_viewsim". It is used to tell ModelSim
that you will accept a simulator license rather than be queued for a viewer
license. The "-lic_noqueue" command line switch works the same for viewer
licenses as it does for any other license. When using Mentor Graphics licensing,
the queueing dialog box works with Unix and Linux platforms but not Windows
platforms.&nbsp; The queuing dialog box works with all supported platforms
when using Model Technology licensing.</ul>

<li>
VCD File Enhancements</li>

<ul>ModelSim now supports multiple VCD files. This functionality is an
extension of the IEEE 1364 specification. The tasks behave the same as
the IEEE equivalent tasks such as $dumpfile, $dumpvar, etc. The difference
is that $fdumpfile can be called multiple times to create more than one
VCD file, and the remaining tasks require a filename argument to associate
their actions with a specific file. The table below maps the VCD commands
to their associated tasks. For additional details, please see the Verilog
IEEE 1364-2000 specification.
<br>&nbsp;
<table BORDER COLS=2 WIDTH="100%" NOSAVE >
<tr>
<td>VCD commands
<hr WIDTH="100%"></td>

<td>VCD system tasks
<hr WIDTH="100%"></td>
</tr>

<tr>
<td>vcd add&nbsp;</td>

<td>$fdumpvars</td>
</tr>

<tr>
<td>vcd checkpoint&nbsp;</td>

<td>$fdumpall</td>
</tr>

<tr>
<td>vcd files&nbsp;</td>

<td>$fdumpfile</td>
</tr>

<tr>
<td>vcd flush&nbsp;</td>

<td>$fdumpflush</td>
</tr>

<tr>
<td>vcd limit&nbsp;</td>

<td>$fdumplimit</td>
</tr>

<tr>
<td>vcd off&nbsp;</td>

<td>$fdumpoff</td>
</tr>

<tr>
<td>vcd on&nbsp;</td>

<td>$fdumpon</td>
</tr>
</table>
</ul>

<ul>In addition to the commands above, the <b>vcd comment</b> command can
be used to add comments to the VCD file. ModelSim now supports dumpports
system tasks. The table below maps the VCD dumpports commands to their
associated tasks.</ul>

<ul>&nbsp;
<table BORDER COLS=2 WIDTH="100%" NOSAVE >
<tr>
<td>VCD dumpports commands&nbsp;
<hr WIDTH="100%"></td>

<td>VCD system tasks
<hr WIDTH="100%"></td>
</tr>

<tr>
<td>vcd dumpports&nbsp;</td>

<td>$dumpports</td>
</tr>

<tr>
<td>vcd dumpportsall&nbsp;</td>

<td>$dumpportsall</td>
</tr>

<tr>
<td>vcd dumpportsflush&nbsp;</td>

<td>$dumpportsflush</td>
</tr>

<tr>
<td>vcd dumpportslimit&nbsp;</td>

<td>$dumpportslimit</td>
</tr>

<tr>
<td>vcd dumpportsoff&nbsp;</td>

<td>$dumpportsoff</td>
</tr>

<tr>
<td>vcd dumpportson&nbsp;</td>

<td>$dumpportson</td>
</tr>
</table>
</ul>

<li>
vcd2wlf</li>

<ul>vcd2wlf is a utility that translates a VCD (Value Change Dump) file
into a WLF file. After loading a WLF file in vsim it can be displayed with
the "-view" switch. Extended VCD files, containing additional port driver
data captured using the <b>vcd dumpports</b> command, are not currently
supported. Also, types of type real are not currently supported.</ul>

<ul><b>Syntax</b>
<ul>
<ul>vcd2wlf
<ul>&lt;vcd file> &lt;wlf file></ul>
</ul>
</ul>
<b>Arguments</b>
<ul>
<ul>&lt;vcd file>
<ul>Specifies the name of the VCD file you want to translate into a WLF
file. Required.</ul>
&lt;wlf file>
<ul>Specifies the name of the output WLF file. Required.</ul>
</ul>
</ul>
</ul>

<li>
SDF annotation of the REMOVAL timing check has been implemented.</li>

<li>
Bookmarks</li>

<ul>Bookmarks allow you to save a particular zoom range and scroll position
in the Wave window. This lets you return easily to a specific view later.
You save the bookmark with a name, and then access the named bookmark from
the Bookmark menu.
<br>Bookmarks are saved in the Wave format file and are restored when the
format file is read. There is no limit to the number of bookmarks you can
save.
<br>Bookmarks can also be created and managed from the command line. See
bookmark add wave command in the Command Reference Manual for details.
<br>To add a bookmark, select <b>Bookmark > Add Bookmark</b> (Wave Window).
<br>Please see the ModelSim Graphic Interface chapter of the ModelSim User's
Manual for more details.</ul>

<li>
Workspace</li>

<ul>The workspace feature provides convenient access to projects, compiled
design units, and simulation/dataset structures. It can be hidden or displayed
by selecting the <b>View > Hide/Show Workspace</b> menu in the Main Window.
<ul>
<li>
Project page</li>

<br>Shows all files that are included in the open project. See the Projects
and System Initialization chapter for details.
<li>
Library page</li>

<br>Shows compiled design units in the specified library. See "Managing
library contents" for details.
<li>
Structure pages</li>

<br>Shows a hierarchical view of the active simulation and any open datasets.
This is the same data that is displayed in the "Structure Window" in the
ModelSim Graphic Interface chapter. There is one page for the current simulation
and one page for each open dataset. See "Viewing dataset structure" in
the Datasets chapter for details.
<li>
Compare page</li>

<br>Shows comparison objects that were created by doing a waveform comparison.
See the Waveform Comparison chapter for details.</ul>
All chapter&nbsp; references above refer to the ModelSim User's Manual.</ul>

<li>
Find and Replace in Source Window</li>

<ul>The Find dialog box allows you to find and replace text strings or
regular expressions in the Source window. Select <b>Edit > Replace</b>
to bring up the Find dialog box. If you select Find, the Replace field
is absent from the dialog.</ul>

<ul>To use the dialog box, enter the value to search for in the Find field.
If you are doing a replace, enter the appropriate value in the Replace
field. Optionally specify whether the entries are case sensitive and whether
to search backwards from the current cursor location. Check the Regular
expression checkbox if you are using regular expressions.</ul>

<li>
View Declaration</li>

<ul>Signals Window
<ul>
<li>
A double-click on a signal in the Signals Window will view and select the
signal in the Source Window.</li>
</ul>
Wave Window
<ul>
<li>
The double-click action in the signal and name sections of the Wave Window
has changed to support this feature. Double-clicking on a signal name will
highlight&nbsp; the signals declaration in the Source Window.&nbsp; Double-clicking
on a value brings up the Wave Signal Properties dialog box. The properties
dialog box is also available from the popup menu (via mouse-button-3).</li>
</ul>
</ul>

<li>
Selected PLI calls are now available from the Tcl command line.</li>

<br>The supported calls are listed below
<ul>
<li>
acc_handle_by_name</li>

<li>
acc_handle_object</li>

<li>
acc_handle_parent</li>

<li>
acc_handle_path</li>

<li>
acc_handle_pathin</li>

<li>
acc_handle_pathout</li>

<li>
acc_handle_port</li>

<li>
acc_handle_scope</li>

<li>
acc_handle_simulated_net</li>

<li>
acc_next</li>

<li>
acc_fetch_fullname</li>

<li>
acc_fetch_location</li>
</ul>

<li>
Breakpoints Dialog</li>

<ul>You can set signal breakpoints (a.k.a., when breakpoints; see the <b>when
</b>command
in the Command Reference Manual for more details) using a pop-up menu.
Start by selecting a signal and then clicking your second (Windows) or
third (UNIX) mouse button in the Wave Window. Select Signal Breakpoints
from the pop-up menu and you'll see four items:
<ul>
<li>
<b>Add</b></li>

<br>Creates a signal breakpoint on the selected signal
<li>
<b>Edit Breakpoint</b></li>

<br>Allows the specified breakpoint to be modified
<li>
<b>Edit All Breakpoints</b></li>

<br>Allows all breakpoints to be modified
<li>
<b>Remove Signal</b></li>

<br>Removes the signal breakpoint from the selected signal
<li>
<b>Remove All Signals</b></li>

<br>Remove all signal breakpoints
<li>
<b>Show All</b></li>

<br>Shows a list of all signal breakpoints</ul>
When a breakpoint is hit, a message appears in the transcript window about
which signal caused the breakpoint. Breakpoints created by the when command
are not affected by the Remove All menu pick, nor are they reported via
Show All.</ul>

<li>
modelsim_lib.util Utilities Package</li>

<ul>This package contains procedures and functions that are not available
in any default or standard package.&nbsp; To use the "util" package you
will need to add the following library and use clauses:</ul>

<ul>
<ul>
<li>
library modelsim_lib;</li>

<li>
use modelsim_lib.util.all;</li>
</ul>
&nbsp;The package contains the following procedures and functions:
<ul>
<li>
get_resolution() - returns the current simulator resolution in units of
seconds.</li>

<li>
to_real(time value) - returns the time value argument as a real number.</li>

<li>
to_time(real value) - returns the real value argument as a time.</li>

<li>
init_signal_spy(source, destination, verbose) - sets the value of the source
(a VHDL signal or Verilog register/wire) on to the destination (an existing
VHDL signal).&nbsp; This allows a user to reference signals, registers,
or wires at any level of hierarchy from within a VHDL architecture (e.g.,
a test bench).</li>
</ul>
A valid mapping for this library exists in the modelsim.ini file.
<br>Please see the VHDL Simulation chapter of the ModelSim User's Manual
for more details.</ul>

<li>
Signal Spy</li>

<ul>The capability discussed in the "Monitoring Internal Signals from a
VHDL Test bench" application note, also known as Signal Spy, has been expanded
and included as a built-in in the 5.5 release of ModelSim.&nbsp; The original
FLI solution handled VHDL spying on VHDL.&nbsp; In 5.5, the name has been
changed to "init_signal_spy" and can connect VHDL to VHDL, VHDL to Verilog,
Verilog to VHDL, and Verilog to Verilog.&nbsp; The command sets the value
of the source (a VHDL signal or Verilog register/wire) onto the destination
(an existing VHDL signal or Verilog register).&nbsp; Init_signal_spy is
used in the VHDL or Verilog code itself and is not issued from the ModelSim
or vsim command line.</ul>

<ul>In VHDL you need to include the following library and use clauses:</ul>

<ul>
<ul>library modelsim_lib;
<br>use modelsim_lib.util.all;</ul>
and then you reference the command, init_signal_spy(), in a process.&nbsp;&nbsp;
Please see chapter 4 of the ModelSim User's Manual for more details.
<br>In Verilog, the command is available as a system task and is called
$init_signal_spy().&nbsp; Please see the Verilog Simulation chapter of
the ModelSim User's Manual for more details.</ul>

<li>
Verilog 2000 support</li>

<ul>The following features have been implemented.
<ul>
<li>
New File I/O tasks, command line args $test$plusargs and $value$plusargs</li>

<li>
Full implementation of attributes</li>

<li>
New commands in extended VCD</li>

<li>
New compiler directives `ifndef and `line</li>

<li>
Added the "**" operator</li>

<li>
Allow a comma in place of "or"</li>

<li>
Register declaration assignments</li>

<li>
Full port declarations in Module port list</li>

<li>
Local Parameters</li>

<li>
Module parameters type, sign, and range</li>

<li>
New `elsif compiler directive added (from verilog-2000 presentation)</li>

<li>
Signed and Unsigned functionality</li>

<li>
Standard $random algorithm</li>

<ul>The probabilistic distribution functions have been reimplemented to
conform to the Verilog 2000 standard. The behavior of $random() is not
changed, but the other functions may produce different results in this
release. The functions affected are $random(), $dist_uniform(), $dist_normal(),
$dist_exponential(), $dist_poisson(), $dist_chi_square(), $dist_t(), and
$dist_erlang().</ul>

<li>
Enhanced `uselib to create libraries and compile source files</li>

<li>
On-event and On-detect pulse filtering</li>

<ul>A new specify block declaration has been added to control how pulse
errors are propagated to outputs. Specifying "pulsestyle_ondetect" for
an output will cause it to transition to X immediately upon detection of
a pulse at the input, instead of transitioning to X at the scheduled time
of the leading edge of the pulse. The keyword "pulsestyle_onevent" represents
the default, unchanged behavior. For example:
<ul>specify
<ul>pulsestyle_ondetect out, out_b;
<br>(a => out) = (2, 3);
<br>(a => out_b) = (3, 4);</ul>
endspecify</ul>
This functionality can also be controlled globally using the existing vsim
command line switches "+pulse_e_style_onevent". The command line switches
will take precedence over the specify block declarations.</ul>

<li>
Showcancelled and noshowcancelled pulse behavior</li>

<ul>A new specify block declaration has been added to control the scheduling
of negative pulses.&nbsp; If the delays for a module path are unequal,
it is possible that the trailing edge of a pulse will be scheduled earlier
than the leading edge, resulting in a pulse with a negative width.&nbsp;
Normally such pulses are canceled, but specifying "showcancelled" for an
output will schedule a transition to and from X over the duration of the
negative pulse (trailing edge to leading edge).&nbsp; The keyword "noshowcancelled"
represents the default, unchanged behavior. For example:
<ul>specify
<ul>showcancelled out, out_b;
<br>(a => out) = (2, 3);
<br>(a => out_b) = (3, 4);</ul>
endspecify</ul>
This functionality can also be controlled globally using the new vsim command
line switches "+show_cancelled_e" and "+no_show_cancelled_e". The command
line switches will take precedence over the specify block declarations.</ul>
</ul>
</ul>

<li>
Vital 2000 support</li>

<li>
New Code Coverage features</li>

<ul>
<li>
Code coverage now supports the user excluding files and line numbers from
coverage analysis. It also supports merging multiple coverage files into
a single analysis. It has an enhanced user interface to support interactive
coverage analysis.</li>
</ul>

<ul>
<li>
The format of the coverage exclusion filter file is similar to the coverage
report files, but contains additional functionality. You can start with
a coverage report that is an exclusion filter file. The file format supports
using the keyword "all" after the file name to exclude the entire file.
A list of line numbers, or ranges of line numbers, is also supported.</li>
</ul>

<ul>
<li>
Code coverage supports merging of multiple reports into a single report.
The reports can involve lines that are not in the current design. The reports
can accumulate hits from several report files on the same source line.</li>
</ul>

<ul>
<li>
The coverage report command has been enhanced to support several new report
types. The -total switch writes out a one line summary of the total files,
lines, hits and overall percentage for users that just want to track if
anything changed. The -summary switch writes out the summary lines, hits
and percentages for each source file being analyzed. This is the same information
that is in the coverage summary window. The -lines switch writes out the
source file summary data and after each file it writes out the details
for each line in the file. This is the most detailed report. The -excluded
switch writes out the files and lines that are currently being excluded
by the user from the coverage analysis. It compresses the results as much
as possible. Thus a sequence of lines is printed as a range. The -zeros
switch writes out a detailed report like the -lines but only reports on
the lines that do not have any coverage.</li>
</ul>

<ul>
<li>
The GUI has a number of changes to support code coverage. The source window
now shows a green 'X' in the coverage column on any line that has been
excluded. The <b>View->Other->Source Coverage</b> menu item now brings
up a modified coverage window. The window contains a menu bar like the
other windows. It also contains the original coverage summary report. Below
that it contains a tabbed notebook that has two other reports. The first
report is the lines with no coverage in the file currently being viewed.
The second report is the files and lines currently being excluded from
the analysis.</li>
</ul>

<ul>
<li>
Another major change is that coverage files that are not in the currently
active design that are kept show up in the reports. This means that the
summary report window lists them. The source viewer will view them and
the lines will show the hit counts.</li>
</ul>

<ul>
<li>
The windows support multiple selections and a right mouse button popup
that acts on them to exclude, or include the multiple files or line numbers.</li>
</ul>

<ul>
<li>
The tab notebook for zero coverage shows which line numbers have zero coverage
and includes the source code for that line. Selecting a zero coverage line
will cause the Source Window to update to that line.</li>
</ul>

<ul>
<li>
The tab for the exclusion filters shows all the exclusion filters that
have been applied. This includes files and line numbers. Selecting the
file brings up the file in the source window to allow the exclusion filtering
to be changed. When a change is made, the entire coverage system is updated
to reflect it.</li>
</ul>

<ul>
<li>
The menu bar supports saving the various reports to a file. If the file
is empty a warning message is written to the transcript. It also supports
clearing out the current code coverage and loading other coverage reports.
Loading a new report overwrites the current data. It also supports merging
multiple coverage reports, including the current simulation.</li>
</ul>

<ul>
<li>
The exclusion filtering can be disabled, resulting in the raw coverage
being reported. It can be dynamically edited using the source window or
the selection in other windows. It can be cleared. It also can be re-initialized
from any original coverage filtering that was enabled at the start of the
simulation.</li>
</ul>

<ul>The following preference variables exist :
<br>PrefCoverage(excludedHitsColor) green # The color of the excluded symbol
<br>PrefCoverage(pref_filename) "cover.dat" # default name to write coverage
reports to
<br>PrefCoverage(coverage_sort_by) "name"# Choices are name, line, hits,
or percentage
<br>PrefCoverage(DefaultReport) "summary"# Choices are summary, line, filter,
missed, total
<br>PrefCoverage(promptForClear) "yes"# Choices are "yes" or "no"
<br>PrefCoverage(pref_InitiallyFilter) 1 # Look for an exclusion filter
when loading the design
<br>PrefCoverage(pref_InitFilterFrom) "Exclude.cov"# The filename to read
from for an exclusion filter when loading # the design. This file is not
modified
<br>PrefCoverage(pref_filtername) "workingExclude.cov"&nbsp;&nbsp; # The
name of the temp file to use when editing the exclusion filtering # The
data in here is not saved unless the user does so.</ul>

<li>
FLI features</li>

<ul>
<li>
The new function mti_GetWlfFilename() returns the name of the waveform
database (.wlf) file.</li>

<li>
FLI foreign subprograms can now return real and time values. The return
type of a foreign subprogram that returns a real value must be mtiRealT.
The return type of a foreign subprogram that returns a time value must
be mtiTime64T. The new mtiRealT type and supporting macros are defined
in mti.h.</li>

<br>Note: On Linux, the compiler switch -freg-struct-return must be used
when compiling any FLI application code that contains foreign functions
that return real or time values.
<li>
Constants, variables and signals of type RECORD can now be passed as parameters
to foreign subprograms. Please refer to the FLI Reference Manual for details.</li>

<li>
mti_FindSignal() can now be used to find indexed array scalar sub-elements
and scalar selected record fields. For example:</li>

<ul>sigid = mti_FindSignal( "slv_array(1)" );
<br>sigid = mti_FindSignal( "myarray(3) (2)" );
<br>sigid = mti_FindSignal( "myrec.f1" );
<br>sigid = mti_FindSignal( "myrec.f2.ai(1)" );</ul>
</ul>

<li>
PLI features</li>

<ul>
<li>
acc_vcl_add() and acc_vcl_delete() can now be used to put or remove value
change callbacks on accRegBit objects.</li>

<li>
Since the function acc_fetch_paramval() cannot be used on 64-bit machines
to get a string value, the new function acc_fetch_paramval_str() is now
available for use in getting string values of parameters. This function
is defined in acc_user.h and can be used on all platforms.</li>
</ul>

<li>
The vsim invocation options -g and -G can now be used for overriding Verilog
parameter values.</li>

<ul>
<li>
The -g option overrides a parameter value only if there is no inherited
or defparam value specified for the parameter.</li>

<li>
The -G option always overrides a parameter value no matter where else the
value for the parameter may have been set.</li>

<br>A case-insensitive comparison is used on the parameter name. See the
vsim command in the ModelSim Command Reference Manual for more information.</ul>

<li>
Dataflow Window improvements</li>

<ul>
<li>
The Dataflow Window now handles Verilog registers.</li>

<li>
&nbsp;The simulation time is now provided in the window to give a context
to the signal values.</li>
</ul>

<li>
Verilog features</li>

<ul>
<li>
The default_decay_time compiler directive is now supported for compatibility
with Verilog-XL.</li>

<li>
A new switch "-lint" has been added to vlog.&nbsp; The switch enables the
following three checks:</li>

<ul>
<li>
A warning is issued when Module ports are NULL.</li>

<br>Example: module (a,,b); // Second port has no name
<li>
A warning is issued when assigning to an input port.</li>

<br>Example: (see next example)
<li>
A warning is issued when referencing undeclared variable/nets in instantiation.</li>

<br>Example:
<ul>module test_undefined(CLKINH, CLKOUTH, RESSETL);
<br>input CLKINH;
<br>RESETL;
<br>output CLKOUTH;
<br>wire RESETH;
<br>CLK19;
<br>assign RESETH; // assigning to input port!
<br>MODNDCNTR (CLKINH, DIV19, RSTH);&nbsp; // DIV19 and RSTH undeclared</ul>
These warnings are reported as WARNING[8],&nbsp; which means they can be
disabled via -nowarn 8. The ini variable is Show_Lint. The default value
is 0. So, if the ini file turns the switch on (Show_Lint = 1), then it
can be disable from the command line via "vlog -nowarn 8".</ul>
</ul>

<li>
Support for time-offset evaluation of virtual signals, virtual functions,
and expressions.</li>

<ul>
<li>
The option "-delay" was added to the <b>virtual signal </b>and <b>virtual
function</b> commands.</li>

<br>virtual signal | function -delay &lt;time> ... Where&nbsp; &lt;time>
may be a signed integer number of simulation time steps, or {&lt;float>
&lt;unit>} time value, enclosed in curly braces.
<li>
ModelSim GUI expressions now support VHDL-style signal'delayed() notation.</li>

<li>
ModelSim GUI expressions now support Verilog-style subexpression evaluation
at offset times.</li>

<br>Please see the page for the <b>virtual signal | virtual function</b>
commands in the ModelSim Command Reference Manual for more details.</ul>

<li>
Type conversion improvement</li>

<ul>
<li>
Type conversion on a formal port was not supported if sub-element associations
were used.</li>
</ul>
</ul>

<p><br><a href="#TOC">Back To Top</a>
<br>&nbsp;
</body>
</html>
