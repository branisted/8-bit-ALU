
<HEAD>
<TITLE>5.5b Release Notes</TITLE>
</HEAD>
<HTML>
<body text="#000000" bgcolor="#C0C0C0" link="#0000EE" vlink="#551A8B" alink="#FF0000">
<CENTER>
<h1>
&nbsp;<a NAME="TOC"></a>Release Notes For Model<i>Sim</i> Altera 5.5b</h1></center>

&nbsp;
<blockquote>
<blockquote>
<center><b>May 24 2001</b></center>
</blockquote>
</blockquote>
<p>
<h4>
<hr WIDTH="100%"></h4>
<li>
<b>Product Installation and Licensing Information</b></li>

<br>For brief instructions about product installation please visit the
"install_notes" file on the Model Technology web site. The install_notes
file can be viewed at:
<br><a href="http://www.model.com/products/release.asp">http://www.model.com/products/release.asp</a>
<br>For detailed information about product installation and licensing see
the ModelSim Start Here Guide. The manual can be downloaded from:
<br><a href="http://www.model.com/support/documentation.asp">http://www.model.com/support/documentation.asp</a>
<br>&nbsp;
<li>
<b>Release Notes Archives</b></li>
<br>For release notes of previous versions visit the release notes archive
at: <a href="http://www.model.com/support/default.asp">http://www.model.com/support/default.asp</a>
<br>or find them in the installed modeltech tree in &lt;path to modeltech installation&gt;/docs/rlsnotes
<br>&nbsp;
<li>
<b>How to get Support</b></li>
<p>This OEM product is supported by Altera Corporation
<ul>
<li>Telephone Support
<p>
Call 800-800-3753 or 408-544-7000
<br>&nbsp;
<br>&nbsp;
<li>Email Support
<p><a href="mailto:support@altera.com">support@altera.com</a>
<br>&nbsp;
<br>&nbsp;
<li>World-Wide-Web Support
<p><a href="https://websupport.altera.com/">https://websupport.altera.com/</a>
<br>&nbsp;
</ul>
<br>&nbsp;
<p>
<h4>
<hr WIDTH="100%"></h4>
<h3>
<b>Index to Release Notes</b></h3>

<blockquote>
<li>
<u><a href="#keyinfo">Key Information</a></u></li>

<li>
<u><a href="#uidefects">User Interface Defects Repaired in 5.5b</a></u></li>

<li>
<u><a href="#verilogdefects">Verilog Defects Repaired in 5.5b</a></u></li>

<li>
<u><a href="#plidefects">PLI Defects Repaired in 5.5b</a></u></li>

<li>
<u><a href="#vhdldefects">VHDL Defects Repaired in 5.5b</a></u></li>

<li>
<u><a href="#flidefects">FLI Defects Repaired in 5.5b</a></u></li>

<li>
<u><a href="#vitaldefects">VITAL Defects Repaired in 5.5b</a></u></li>

<li>
<u><a href="#mixeddefects">Mixed Language Defects Repaired in 5.5b</a></u></li>

<li>
<u><a href="#generaldefects">General Defects Repaired in 5.5b</a></u></li>

<li>
<u><a href="#mgcdefects">Mentor Graphics DRs Repaired in 5.5b</a></u></li>

<li>
<u><a href="#knowndefects">Known Defects in 5.5b</a></u></li>

<li>
<u><a href="#productchanges">Product Changes to 5.5b</a></u></li>

<li>
<u><a href="#newfeatures">New Features Added to 5.5b</a></u></li>
</blockquote>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="keyinfo"></a><b>Key Information</b>
<ul>
<li>
 You must recompile or refresh your models if you are moving forward from
 5.5 Beta or earlier release versions. See "Regenerating your Libraries" in
 the ModelSim Start Here Guide for more information on refreshing your models.
</li>
<li>
The Windows 95 platform will no longer be supported starting with the next 
major ModelSim release, version 5.6.
</li>
<li>The following lists the supported platforms:
   <ul>
   <li>win32aloem - Windows 95, 98, Me, NT, 2000
   <li>sunos5aloem - Solaris 2.6, 7, 8
   <li>hp700aloem - HP-UX 10.2, 11
   </ul>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="uidefects"></a><b>User Interface Defects Repaired in 5.5b</b>
<ul>
<li>
The <b>describe</b> command did not handle upper-case 
VHDL process variable names.

</li>
<li>
Correctly remove Wave Window dividers when a dataset close command results
in all signals being removed from the Wave Window.
</li>
<li>
The <b>File > Design > Load Design...</b> menu item was not disabled
while the simulator was running. If selected at run time ModelSim may have 
crashed.
</li>
<li>
A message stating that the source file was newer than the compiled file 
and that a recompile was necessary was erroneously reported.  
The problem was related to differences in timestamp calculations.(Windows only)
</li>
<li>
Issuing restart with a waved signal that was formatted as 
"analog-interpolated" sometimes crashed the simulator.(Windows only)
</li>
<li>
Invoking the <b>File > Compile</b> menu item from the 
Source Window crashed the simulator in some cases.(Windows only)
</li>
<li>
After modifying the Verilog compiler options, such as the include directory, 
the changes were not used by the compiler. This problem was related to the 
OptionFile property in the .ini file. 
</li>
<li>
When the Source Window was opened and if source colorization and highlighting 
of executable lines were both enabled, they appeared to be disabled.

</li>
<li>
A simulation crash was caused by <b>dataset close</b> or <b>compare end</b> 
commands if they resulted in removing a Verilog register from the Wave or 
List Window.

</li>
<li>
The simulator did not correctly update Wave Window scrollbars when a dataset 
(specifically a compare dataset) was closed.
</li>
<li>
A 'Paste insertion error' was occurring in the Wave Window.
The Cut/Copy operations were saving an invalid configuration.
</li>
<li>
When <b>force -cancel</b> was applied to a field of a (VHDL) record, at the 
future time when the force was cancelled, all forces applied to other fields 
of the record were also incorrectly cancelled.

</li>
<li>
Regions and signals created through the FLI could be not found by the GUI
if the parent regions were selected in the Structure Window before these
regions/signals were created.

</li>
<li>
In some cases the ModelSim GUI crashed when being shutdown.
</li>
<li>
Several major problems existed in the library import wizard. The library 
import wizard replaced the FPGA wizard in the ModelSim 5.5 release. The
library import wizard now correctly supports importing of all types of 
libraries including FPGA libraries.

</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="verilogdefects"></a><b>Verilog Defects Repaired in 5.5b</b>
<ul>
<li>
A <b>$setuphold</b>, <b>$recrem</b>, or <b>$recovery</b> (used as <b>$recrem</b>) 
constraint having a non-positive sum of its limits caused the negative timing 
constraint algorithm to incorrectly set negative limits to zero in other timing 
constraints.

</li>
<li>
An "always" construct sensitive to a bit-select of a vector register failed to
trigger if the register was assigned to a value at time zero.

</li>
<li>
Non-blocking assignments to hierarchically referenced memory
elements failed.
</li>
<li>
The <b>force -freeze</b> command when applied to a net, failed to propagate
through connected bidirectional pass switch primitives.

</li>
<li>
$dumpvars crashed when an argument referenced a bit-select of a bus.
</li>
<li>
Recursive Verilog module instantiation caused a crash. It now generates
an elaboration error when decending to 75 levels deep.

</li>
<li>
A problem existed when using <em>vlog</em> with <b>-fast</b>
where an inlined module resulted in the argument to a hierarchical 
task call starting in the wrong context. This resulted in vsim messages
such as:<br>
"Unresolved reference to 'crc10' in 'crc10.next_byte.$0'."

</li>
<li>
The <b>-nologo</b> switch to both <b>vlog</b> and <b>vcom</b> 
did not work.
</li>
<li>
Improved <b>vlog</b> compiler warning in the case where the command line 
<b>-y</b> directory was not found.
</li>
<li>
The correct delay selection did not occur when vsims <b>+transport_int_delays</b> 
switch was used, and the interconnect delay transitioned to an "X" state.
</li>
<li>
Verilog gate-level designs compiled with the <b>-fast</b> option with negative
timing checks caused incorrect delay net delays to be calculated in some cases.

</li>
<li>
An SDF INTERCONNECT annotation caused a crash if the source port was 
an optimized cell and the destination port did not exist.
</li>
<li>
In some cases a bus error occurred with $width checks containing non-zero 
thresholds in <b>-fast</b> optimized cells.
</li>
<li>
A continuous assignment may fail under rare conditions
if the right hand side expression contains a hierarchical
function call.
</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="plidefects"></a><b>PLI Defects Repaired in 5.5b</b>
<ul>
<li>
Part selects that were arguments to system tasks/functions were
not created correctly in the VPI.

</li>
<li>
Multi-channel descriptors were not flushed at the end of a simulation run.

</li>
<li>
A better error message is now reported for PLI module load failures. (Windows Only)
</li>
<li>
A call to <b>acc_next_load</b> failed to return the correct handle when a MIPD 
was present.
</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="vhdldefects"></a><b>VHDL Defects Repaired in 5.5b</b>
<ul>
<li>
If a configuration used subelement association in the binding
indication and the formal's type was not locally static, memory corruption could 
have occurred. This corruption caused a crash at elaboration time. The 
corruption was caused by incorrect code generation and incomplete checking.

You must recompile or refresh to get the fix. The newly compiled libraries 
cannot be used with ModelSim versions 5.5a or earlier.
</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="flidefects"></a><b>FLI Defects Repaired in 5.5b</b>
<ul>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="vitaldefects"></a><b>VITAL Defects Repaired in 5.5b</b>
<ul>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="mixeddefects"></a><b>Mixed Language Defects Repaired in 5.5b</b>
<ul>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="generaldefects"></a><b>General Defects Repaired in 5.5b</b>
<ul>
<li>
If the user interrupted simulation, the simulator could skip execution of
a Verilog or VHDL concurrent statement ( i.e., process or always block) depending
on the particular statement. Incorrect simulation results could occur if
the simulation was continued.
</li>
<li>
ModelSim now allows better usage of large memory pages under HP-UX 11.0.


</li>
<li>
The write report command with the <b>-s</b> option incorrectly printed "Entity"
for a Verilog module compiled with <b>-fast</b>. It now prints "Module".


</li>
<li>
With init_signal_spy, if you spied on a signal that did not change values, 
the local signal never obtained the value of the spied on signal. This
was due to the initial value of the signal that was being spied on not 
beening correctly mirrored to the local signal.
</li>
<li>
This bug fix only affects users who have <b>ModelSim</b> application registered
to open file type extensions like .v, .vhd, .wlf, .mpf in the 
windows explorer environment.
<p>
The bug was that if such a file has uppercased extension like .VHD or .WLF, and
it was double-clicked to open it, <b>ModelSim</b> would invoke repetitiously
until the system crashed.
<p>
The first part of the fix is already in place in 5.5b <b>ModelSim</b>. The
second part of the fix is during the installation of 5.5b <b>ModelSim</b>.
<p>
Install 5.5b <b>ModelSim</b> as per normal. After installation, immediately
launch the installed <b>ModelSim</b> application. When you are prompted with 
a dialog box to register <b>ModelSim</b> application as the default to open the 
.mpf, .v, .vhd, .wlf file types, click "YES".


</li>
<li>
<b>vcom</b> and <b>vlog</b> arguments containing wildcards ('*') were not 
being expanded in some situations. This defect was introduced in 5.5. 
(Windows only)
</li>
<li>
A problem existed (since 5.5) when the license environment was not setup on
a Window platforms. When invoking from the <b>Program->Start</b> menu or 
a shortcut, the splash screen was displayed for a few seconds then disappeared 
without a message. The dialog box was supposed to display a message stating
the license environment is not valid.
</li>
<li>
When there is a <b>vlog</b> compiler and <b>vsim</b> incompatibility
situation, the following incorrect message indicating VCOM as the compiler was 
issued.
<p>
<code>
# ** Fatal: Empty built-in function pointer (957).<br>
#  VSIM version is out of date with respect to VCOM.<br>
Please recompile libraries with -refresh.<br>
</code>

<p>
The new and corrected message is

<p>
<code>
Simulator version is out of date with respect to the compiler.<br> 
Please recompile libraries with -refresh.<br>
</code>


</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="mgcdefects"></a><b>Mentor Graphics DRs Repaired in 5.5b</b>
<ul>
<li>
299040 - ModelSim crashed with the message: Memory allocation failure. Bad 
block passed to mti_memfree/mti_memr
</li>
<li>
298993 - ModelSim crashed when loading due to a recursive instantiation in 
a Verilog design.
</li>
<li>
298450 - A <b>$setuphold</b>, <b>$recrem</b> or <b>$recovery</b> 
(used as <b>$recrem</b>) constraint having a non-blocking sum of its limits 
caused the negative timing constaint algorithm to incorrectly set negative 
limits in other timing constraints to zero.
</li>
<li>
184943 - "<b>vlog</b> tb.v -y NONEXISTENTLIBRARYDIR" doesn't give clear error message.
</li>
<li>
294815 - Simulation results are inconsistent when using <b>force -freeze</b> on
a Verilog bidir.
</li>
<li>
297800 - No license failure message is given when invoking from a Shortcut.
</li>
<li>
285345 - No warning occurred if <b>-G</b> switch was used and generic did 
not match design.
</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="knowndefects"></a><b>Known Defects in 5.5b</b>
<ul>
<li>
A virtual signal containing a Verilog bit is expanded within a Signals
Window. Double clicking on this Verilog bit to invoke a <b>view
declaration</b> does not bring up the Source Window. If the Source Window
is already opened, it does not highlight this signal.
</li>
<li>
On Win32 platforms when using Mentor Graphics Licensing, inappropriate
queueing may take place when more than one license feature could
fulfill a request (e.g., When a VHDL simulator license is requested,
the user may get queued for a qhsimvh when there is an msimhdlsim
available). The workaround in GUI mode is to cancel the queueing dialog
and then the available feature will be checked out. The only workaround
in command line or batch mode is to invoke with the <b>-lic_noqueue</b>
switch.
</li>
<li>
Virtual signals which are a concatenation of a signal from a view dataset
and a sim dataset show "-No Data-" in the Signals Window even after
simulation.
</li>
<li>
Virtual concatenations which contain a virtual constant always display
a value, even when non-constant children are "-No Data-". For example:<br>
<code>virtual signal {'1' & clk & prdy} foo</code>
</li>
<li>
No waves are displayed in the Wave Window for virtual constants
or virtual functions that are children of virtuals.
</li>
<li>
The following steps show a waveform compare problem.
<P>
<UL>
<LI>In the compare wizard, specify an opened dataset and a sim dataset to be 
compared via the compare start functionality.
<LI>Log some simulation signals.
<LI>The button "Update after simulation run" should NOT be checked.
<LI> Click the "Compute Diffs Now" button in the wizard. This message
was given: "Null time range for signal compare". The message could be improved 
to "Cannot compare run because No simulation data currently available"
<LI> Do a <b>run 500</b>. 
<LI> Do a <b>compare info</b> command. The following message is given: "No 
comparison differences" Does it mean my comparisons were all matches? A better 
message choice might be "No available compare data, "please do a compare run 
or compare update first.".
</UL>
<P>
A <b>compare run</b> or <b>compare update</b> had not been done, so there 
should be no compare results or data. The Wave Window is correct at 
this point, the compare signal does not show any compare result.


</li>
<li>
There is an inconsistency in how the path separator works when parsing
commands. Given that the path separator in the example below is "/
" .top.clk should work.<br>
<code>
       echo $PathSeparator<br>
       # /<br>
       exa /top/clk<br>
       # 1<br>
       exa /clk<br>
       # 1<br>
       exa clk<br>
       # 1<br>
       exa .top.clk<br>
       # 1<br>
       exa .clk<br>
      # evaluating expression ".clk"<br>
      # No object found matching clk in context /<br>
      # Item '.clk' not found<br>
</code>
</li>
<li>
A virtual signal foo is defined. The <b>checkpoint</b> command is issued. 
Then, <b>virtual count</b> gives a count of 0. Shouldn't it be 1?
Nothing is saved during <b>virtual save</b> command. The <b>virtual count</b> 
and <b>virtual save</b> commands before the checkpoint give the correct expected results.
Also <b>virtual show</b> and <b>virtual describe</b> foo after the 
<b>checkpoint</b> give the correct expected results. <b>virtual count</b> and 
<b>virtual save</b> are not working correctly. This bug also exists in 5.4e. 
</li>
<li>
In the Library page of the main window workspace, if a design unit is 
selected and accessed with a right button click to <b>Edit</b> or
<b>Refresh</b> or <b>Recompile</b>, the following error will occur:

<p>
<code>Error - cannot read work/_info: No such file or directory</code>

<p>
This bogus error message occurred only when the Library entry field in the
Library page is set to <code>work</code>, and <code>work</code> is
logically mapped to another library directory name.

<p>
The work around is to set the Library entry field to the actual library name
instead of work.

</li>
<li>
Create a List Window with some signals, choose <b>Prop > Display Props</b>,
select the Triggers page, click on Trigger Gating: Expression and press
the Use Expression Builder button.  Select a signal in the List Window
and press the Insert Selected Signal button in the Expression Builder.
Nothing happens. The selected signal should be added to the expression.
</li>
<li>
When "vsim -lib vhwork" is invoked, "vhwork" should be in the Library entry
of the workspace of the Main Window with its design units listed. Instead
the default library "work" is listed. 
</li>
<li>
In some cases, Redhat 6.0 did not have coverage for the entire source
file. There is no problem with Redhat 6.1, 6.2 and 7.0.
</li>
<li>
List Window scrolling problems:<br>
<UL>
<LI>When using the Find dialog box to find signals, when the next
     signal is outside of what is currently showing in the List Window,
     the window is not scrolled to show the next item found.
<LI>If you do a find to the left and the search goes past the
     beginning of the list to wrap around to the end of the list and
     there's a lot of stuff in the list window that is out of view,
     then the List Window scrolls right only one page even though that
     does not bring the next selected item into view.
<LI>When doing a search forward on an item's values, the next line to
     match is scrolled to the top line but the scroll bar stays the
     full length of the scroll bar region.  (This is in a List Window
     where there aren't very many lines of data.)
<LI>The documentation for the List Window says that the up and down
     arrow keys are supposed to move the line selection up or down one
     line.  The current behavior is that the up and down arrow keys
     behave exactly the same as the TAB and shift-TAB keys (searches
     for next transition).
</UL>

</li>
<li>
List Window Marker problems<br>
<UL>
<LI>
If I add a bunch of signals to the List Window then select <b>Markers > Add</b> 
Marker with nothing selected in the List Window, then the 2nd list line is 
highlighted (?).  If I then click on another line then no marker outline is 
left on the supposedly added marker line.
<LI>
If I click on some line and do <b>Markers > Add Marker</b> then the line 
selected is marked with an outline but the second list line is highlighted(!).
<LI>
With a marker added on a particular line, if I then click on various lines in 
the List Window then the marker outline occasionally moves to some other line 
(usually the previously selected line). Markers don't stay put.
</UL>
</li>
<li>
The List Signal Search dialog does not always display the name of the
selected signal.  Names of the format /top/signame do not display.
Names of the format signame do.  If I select multiple signals of the
first format, all I see are commas in the Signal Name(s) box.
</li>
<li>
Loading a tcl shared library fails on rs64 with the following message:
ERROR: couldn't load file " testload.sl": readExports: bad magic number
</li>
<li>
Compare commands should be Wave Window specific.
<br><UL>
<LI>In one Wave Window, add some compare signals and then <b>Compare > Run</b>
to generate some data. 
<LI>In a second Wave Window, add some different compare signals with
different criteria.
<LI>Do a <code>Compare > Run</code> in this second window.
</UL>
The output of the <b>Compare > Differences > Show</b> command gives data 
for both runs. The compare information should be Wave Window specific since the 
two windows have signals with different criteria.<br> 

Also, the compare (see -prev -next buttons) behaves as if both runs are the 
same context. That is, if -next is hit repeatedly, the DIFF report will jump 
from the first window to the second. Other commands that are not window 
specific are:<br>
<code>
     Compare > Differences > Save<br>
     Compare > Differences > Write Report...<br>
     Compare > Rules > Show<br>
     Compare > Rules > Save<br>
</code>
</li>
<li>
In the Projects source area, Windows 95 drag and drop from windows
explorer does not work.
</li>
<li>
When ModelSim is invoked with "vsim -lib vhwork", the library entry in the 
Design tab of the Load Design dialog box incorrectly shows the default library
"work" instead of the specified library "vhwork".
</li>
<li>
Start a compare, then do some compare runs, if a <b>compare reload</b> command
is unsuccessful, ModelSim does an implicit <b>compare end</b> without providing
an option to save results and the data is lost.
</li>
<li>
When single-stepping in a .coverage_source Window,
as long as the context stays within the current file
the coverage numbers can be seen to increment with
each step. If a step causes another source file to
be brought up, then the coverage numbers in the
first column do not increment correctly. Sometimes 
clicking on the name of the current source file in
the Coverage_Summary window with correct the problem.

</li>
<li>
The <b>vmap</b> command executed at the VSIM prompt does not update the Library
drop-down list.
</li>
<li>
First, invoke the <b>Design > Create New Library</b> menu item. Second, attempt 
to create a new lib and mapping resulting in an error, for example, where the 
new lib already exists, a windows system message dialog appears. OK this 
dialog.
<P>
The problem is that the Create New Library dialog widget is frozen and the 
only way to close it is to click on the "X" in the upper right corner,
which is the Windows close window button. This is a Windows only issue.
</li>
<li>
<UL>
<LI>
Add some wave signals. 
<LI>
Create a virtual from a couple of these signals.
<LI>
Expand the virtual signal tree.
<LI>
Double click on the virtual or any child of the virtual (in the value grid of 
Wave Window)to invoke the signal props dialog.
</UL>
<p>
It will not come up. Subsequent actions to other signals also fail to bring up 
the signal props dialog. To get out of this "stuck situation", double click on 
any signal (in the name grid) to invoke <b>view declaration</b>.
</li>
<li>
Selected text in the Source Window or Transcript Window gets unhighlighted 
when the cursor moves out of the window or to the toolbar or menu bar.
This is a windows only issue.

</li>
<li>
In the Source Window, when multiple variables are selected the variable balloon
(via Right Mouse Button) displays the same variable even when the cursor is 
moved from one variable to the next.
</li>
<li>
Set a source line <b>breakpoint</b> and associate a command with it. For 
example:<br>
<code>
bp src/pure_vlog/proc.v 60 {echo "break at 60"}
</code>
<br>
The <b>breakpoint</b> commands are never executed when the breakpoint is 
encountered. This bug only exists in rs64 or rs6000. It exists in 5.5x but 
not 5.4x.
</li>
<li>
An infinite loop can occur displaying the "whatBrowser" dialog box. The 
following steps will cause the infinite loop.<br>
<UL>
<LI>
Log onto any Unix workstation which does not have the netscape
browser installed.
<LI>
Invoke <b>vsim</b> and select menu item <b>HELP > Tcl Help</b> to
invoke default browser.<br>
</UL><br>
The "whatBrowser" dialog box comes up. The dialog box always pops up again
after it has been cancelled or killed. 
</li>
<li>
The source colorization and highlighting of executable lines are
fixed for the case when the Source Window is brought up the first
time. For the case, where there is an existing Source Window, and 
you do a <b>File > Open</b>, and pick a file which has source lines 
that just fit the Source Window, the issue still persists. 


</li>
<li>
A new breakpoint is added using the <b>Edit > Breakpoint</b> menu in the
source window. If the following values are entered into the 
corresponding text entry fields in the New Breakpoint dialog:
<ul>
<li>File name: test.vhd
<li>Line #   : 45
<li>Condition: /top/a == 1
<li>Instance : /top/uut
<li>Command  : echo "STOP"
</ul>

<p>
<b>vsim</b> creates an incorrect breakpoint as follows:<br>
<code>
bp test.vhd 45 -cond {/top/a == 1} {echo "STOP" -inst /top/uut}
</code>

<p>
The -inst argument should not be enclosed as a breakpoint user command. Also,
when the <b>restart -f</b> is issued after such a breakpoint is set, <b>vsim</b>
further mess up this bp by including the condition into the bp user command
as follows:<br>
<code>
bp test.vhd 45 {echo "STOP" -inst /top/uut -cond /top/a == 1}
</code>

<p>
In all cases, the correct bp should be:<br>
<code>
bp test.vhd 45 -cond {/top/a == 1} -inst /top/uut {echo "STOP"}
</code>
</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="productchanges"></a><b>Product Changes to 5.5b</b>
<ul>
<li>
The FLI function <b>mti_GetSignalType()</b> has been changed so that for a
handle to a port signal that has been collapsed it returns the type ID
of the formal port, not the type ID of the actual signal to which it
has been collapsed.  (This keeps the type ID consistent with the name
that you get from the same signal handle.)

</li>
<li>
The FLI function <b>mti_SetSignalValue(</b>) no longer granulates atomic
array signals.  It sets the entire array value directly onto the top
level atomic array signal instead of iterating through the subelements.
(Note that for non-atomic arrays it still iterates through the
subelements.)

</li>
<li>
An optimization has been done to several FLI driver functions in
order to allow the driving of atomic arrays (which is faster than
the normal method of driving arrays at the subelement level).
Arrays are atomic if their subelements are an enumeration type, if they
have no more than one driver, if they are driven only in zero delay,
if they are not connected to OUT or INOUT ports, and if they do not have
any associated composite resolution or type conversion functions.
The following functions have been changed as stated:
<P><UL>
<LI><b>mti_CreateDriver()</b> now creates atomic drivers on atomic array signals.
It will granulate an atomic array signal only if more than one driver
is created on it.

<LI><b>mti_FindDriver()</b> no longer granulates atomic array signals.

<LI><b>mti_GetDriverSubelements()</b> will now granulate an atomic array signal
in order to get the driver subelements.

<LI><b>mti_ScheduleDriver()</b> will now drive atomic array signals with zero delay.
Scheduling with a non-zero delay will cause an atomic array signal to be
granulated.
</UL>
<P>
Note that <b>mti_GetDriverNames()</b> and <b>mti_GetDriverValues(</b>) 
will not return any information for atomic array signals.
Also note that <b>mti_GetSignalSubelements()</b> forces granulation of an
atomic array signal.





</li>
<li>
The VHDL and Verilog compilers were changed to not display full usage 
information when a usage error occurs. A full usage message gets displayed
only when the <b>-help</b> switch is used.
</li>
<li>
A splash screen now appears on OEM versions of ModelSim identifying
it as different from the regular ModelSim PE product. (OEM only)
</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="newfeatures"></a><b>New Features Added to 5.5b</b>
<ul>
<li>
A feature was added to allow Solaris shared memory. The feature can increase
performance of large simulations. See below for more details.

<p>
Two programs to facilitate the Solaris shared memory feature have
been added for the "sunos5" and "sunos5v9" platforms. The executables are 
located under the "sunos5" and "sunos5v9" directories in the modeltech tree 
and are named <b>vshminit</b> and <b>vshminf</b>.

<p>
To learn how to use this feature, invoke vsim and click the Help menu<br>
<b>Help > Technotes > Solaris_Shared_Memory</b>

</li>
<li>
The cursor time button in the Wave Window has been enhanced.

<p>
The cursor time button is the time value displayed in the values column and
cursor row of the Wave Window.

<p>
A right mouse click (RMB) on this button will turn it to an entry field 
where you can enter a new time value. Then, the cursor (and view) 
will move to the new time.  


</li>
<li>
There is a new FLI function, <b>mti_CreateTimeType()</b>, that is used to get
a handle to a type descriptor for a VHDL time type.  One useful application
is for printing out the current time.  For example, <P>
<PRE>
  curr_time_str = mti_Image( mti_NowIndirect( &curr_time ),
                            mti_CreateTimeType() );
  mti_PrintFormatted( "Time %s delta %d: Signal %s/%s is %d\n",
                     curr_time_str, mti_Delta(),
                     region_name, mti_GetSignalName(sigid), sigval );
</PRE>

</li>
<li>
Setting the new preference variable PrefMain(stallKernel) to 1 will cause the
simulation kernel to pause while Wave Window updates occur.  If the simulator
is not running or the variable is set to 0, there will be no effect.
The default value is 0.
</li>
<li>

The <b>runStatus</b> command has a new option named <b>-full</b> which 
will return the state and the reason (status).

<p>
<code>
    VSIM 5> when clk {stop}<br>
    VSIM 6> run<br>
    # Simulation stop requested<br>
    VSIM 7> runStatus<br>
    # break<br>
    VSIM 8> runStatus -full<br>
    # break user_stop<br>
</code>

<p>
The possible reason values are:
<ul>
    <li>bkpt           
    <li>bkpt_builtin   
    <li>end            
    <li>fatal_error    
    <li>iteration_limit
    <li>silent_halt    
    <li>step           
    <li>step_builtin   
    <li>step_wait_suspend
    <li>user_break     
    <li>user_halt      
    <li>user_stop      
    <li>unknown  
</ul>

<p>
The reason value only has meaning after the run or step command
returns.  Calling <b>runStatus</b> while it is still in the running 
state (i.e. inside a when body) will return the previous reason value.

<p>
At this point, the user is warned that you may get results that you don't
expect.  With the way the break key works, it's possible to get a reason
code back that can be either user_break or user_stop.  This is because
the break can occur at different points in the simulation cycle.  If the
simulator is evaluating a process at the time of the break, a user_break
will be returned, however, if the simulator has completed processes and
is updating signal values, then user_stop will be returned.  The subtle
way you see this in the current system is with the Source Window.  In
the first case the Source Window indicates a file line number with the
blue arrow while in the latter case no source line is shown.

</li>
<li>
A new set of compiler switches have been added to allow further
gate-level optimizations to occur in Verilog cell libraries.
<p>
In initial releases of 5.5, these optimizations were extremely conservative
with regards to whether or not optimization was allowed.  With 5.5b,
several switches have been added to disable some of these checks.
The switches are specified to the <b>vlog</b> compiler on the command-line.
They only have effect when compiling gate-level cell libraries, using
the <b>-fast</b> switch.  You may also specify the <b>-debugCellOpt
</b> switch to verify that the optimizations are occurring.
<ul>
<li><b>+nocheckCLUP</b><br>
This switch allows connectivity loops in the cell to be optimized.
<li><b>+nocheckOPRD</b><br>
This switch allows an output port to be read internally by the cell. Note,if the value
read is the only value contributed to the output by the cell and if there's
a driver on the net outside the cell, the value read will not reflect
the resolved value.
<li><b>+nocheckDNET</b><br>
This switch allow both the port and the delayed port (created for negative setup/hold)
to be used in the functional section of the cell.
<li><b>+nocheckSUDP</b><br>
This switch allows a sequential UDP to drive another sequential UDP.
If you specify <b>+nocheckALL</b>, all of these flags will be enabled. Note also the 
functionality of the cell should be verified after using one of these
switches.
</ul>

</li>
<li>
The <b>vlog -fast</b> switch now handles cells with <b>$setuphold</b> 
and <b>$recrem</b> timingchecks that use the <b>tstamp_cond</b> or 
<b>tcheck_cond</b> arguments.
</li>
<li>
Added an elaboration warning when generics/parameters specified on the command
line with <b>-G</b> or <b>-g</b> are not present in the design.
</li>
<li>
VHDL performance improvements were added to the Std_Developerskit std_mempak 
package.<br>
The Mem_Load and Mem_Dump procedures are now overloaded by default with
accelerated versions of those procedures. A recompile of any VHDL code using 
these procedures will result in the use of the built-in accelerated procedures.  
Compiling with the <b>-noaccel std_mempak</b> <em>vcom</em> option will result in the 
use of the original VHDL code from the package.
</li>
<li>
The ability has been added to ModelSim PE and OEM products (ModelSim SE already
has this feature) to tile and cascade windows from the command line. This 
functionality was only possible from the GUI previously.
</li>
<li>
Verilog 2001 support for interconnect delays.<br>
This feature is enabled with the <b>-v2k_intr_delay</b> switch. The switch 
causes the delay to be visible at the load port (previously, the user had to 
connect a buffer inside the load module to see the delay). If you have 
<code>$sdf_annotate()</code> calls in your design that are not getting executed
then you should add the Verilog task <code>$sdf_done()</code> after your last 
<code>$sdf_annotate()</code> to remove any zero-delay MIPDs that may have been 
created.
</li>
</ul>
</BODY>
</HTML>
