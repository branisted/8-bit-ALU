
<HEAD>
<TITLE>5.8e Release Notes</TITLE>
</HEAD>
<HTML>
<body text="#000000" bgcolor="#FFFFFF" link="#0000EE" vlink="#551A8B" alink="#FF0000">
<CENTER>
<h1>
&nbsp;<a NAME="TOC"></a>Release Notes For Model<i>Sim</i> Altera 5.8e
<br></h1></center>
<center>
&nbsp;Copyright Mentor Graphics Corporation 2004
<br>
&nbsp;All rights reserved.
<br>
&nbsp;This document contains information that is proprietary to Mentor Graphics Corporation.
<br>
&nbsp;The original recipient of this document may duplicate this document in whole or in
<br>
&nbsp;part for internal business purposes only, provided that this entire notice appears in all
<br>
&nbsp;copies. In duplicating any part of this document, the recipient agrees to make every
<br>
&nbsp;reasonable effort to prevent the unauthorized use and distribution of the proprietary
<br>
&nbsp;information.
</center>


&nbsp;
<blockquote>
<blockquote>
<center><b>Sep 02 2004</b></center>
</blockquote>
</blockquote>
<p>
<h4>
<hr WIDTH="100%"></h4>
<li>
<b>Product Installation and Licensing Information</b></li>

<br>For brief instructions about product installation please visit the
"install_notes" file in www.model.com. The install_notes
file can be viewed at:
<br><a href="http://www.model.com/products/release.asp">http://www.model.com/products/release.asp</a>
<br>For detailed information about product installation and licensing see
the ModelSim Start Here Guide. The manual can be downloaded from:
<br><a href="http://www.model.com/support/documentation.asp">http://www.model.com/support/documentation.asp</a>
<br>&nbsp;
<li>
<b>Release Notes Archives</b></li>
<br>For release notes of previous versions visit the release notes archive
at: <a href="http://www.model.com/support/default.asp">http://www.model.com/support/default.asp</a>
<br>or find them in the installed modeltech tree in &lt;path to modeltech installation&gt;/docs/rlsnotes
<br>&nbsp;
<li>
<b>How to get Support</b></li>
<p>This OEM product is supported by Altera Corporation
<ul>
<!--
<li>Telephone Support
<p>
Call 800-800-3753 or 408-544-7000
<br>&nbsp;
<br>&nbsp;
<li>Email Support
<p><a href="mailto:support@altera.com">support@altera.com</a>
<br>&nbsp;
<br>&nbsp;
-->
<li>World-Wide-Web Support
<p><a href="http://www.altera.com/mySupport">http://www.altera.com/mySupport</a>
<br>&nbsp;
</ul>
<br>&nbsp;
<p>
<h4>
<hr WIDTH="100%"></h4>
<h3>
<b>Index to Release Notes</b></h3>

<blockquote>
<li>
<u><a href="#keyinfo">Key Information</a></u></li>

<li>
<u><a href="#uidefects">User Interface Defects Repaired in 5.8e</a></u></li>

<li>
<u><a href="#verilogdefects">Verilog Defects Repaired in 5.8e</a></u></li>

<li>
<u><a href="#plidefects">PLI Defects Repaired in 5.8e</a></u></li>

<li>
<u><a href="#vhdldefects">VHDL Defects Repaired in 5.8e</a></u></li>

<li>
<u><a href="#flidefects">FLI Defects Repaired in 5.8e</a></u></li>

<li>
<u><a href="#vitaldefects">VITAL Defects Repaired in 5.8e</a></u></li>

<li>
<u><a href="#systemcdefects">SystemC Defects Repaired in 5.8e</a></u></li>

<li>
<u><a href="#psldefects">PSL Defects Repaired in 5.8e</a></u></li>

<li>
<u><a href="#mixeddefects">Mixed Language Defects Repaired in 5.8e</a></u></li>

<li>
<u><a href="#generaldefects">General Defects Repaired in 5.8e</a></u></li>

<li>
<u><a href="#mgcdefects">Mentor Graphics DRs Repaired in 5.8e</a></u></li>

<li>
<u><a href="#knowndefects">Known Defects in 5.8e</a></u></li>

<li>
<u><a href="#productchanges">Product Changes to 5.8e</a></u></li>

<li>
<u><a href="#newfeatures">New Features Added to 5.8e</a></u></li>
</blockquote>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="keyinfo"></a><b>Key Information</b>
<ul>
<li>
Acrobat reader version 4.0 or greater must be used to read any
.pdf file contained in ModelSim version 5.5c or greater.

</li>
<li>
Product changes and new features mentioned here are introduced in the 5.8e 
release. If you are migrating to the 5.8e release from 5.7x or earlier releases,
please also consult version 5.7x release notes for product changes and new 
features introduced during the 5.7 patch releases. The previous version 
release notes can be found in your modeltech installation directory at 
docs/rlsnotes.
</li>
<li>
The HP-UX 10.20 platform is no longer supported as of the ModelSim
5.7 release. The hp700 platform executables are built on HP-UX 11.0.
Please note that in order for FLI/PLI shared libraries to be
loaded and executed correctly by the hp700 version of vsim, they
must be compiled and linked on HP-UX 11.0.
</li>
<li>
Beginning with the 5.6 release (on Windows platforms only),
attempts to link in libvsim.lib or tk83.lib using the Microsoft
Visual C++ linker version 5.0 will fail with a message similar to
"Invalid file or disk full: cannot seek to 0xaa77b00". Microsoft
Visual C++ version 6.0 should be used.

</li>
<li>
Beginning with the 5.8 release, FLEXlm licensing software is upgraded to version 8.2. For floating licenses it will be necessary to verify that the vendor daemon (i.e., modeltech or mgcld) and the license server (i.e., lmgrd) have FLEXlm versions equal to or greater than 8.2.  The vendor daemons and lmgrd that are shipped with this release will be FLEXlm version 8.2.  If the current FLEXlm version of your vendor daemon and lmgrd are less than 8.2, then you need to stop your license server and restart it using the vendor daemon and lmgrd contained in this release.  If you use nodelocked licenses you don't need to do anything.</li>
<li>
Beginning in the 5.8 release, ModelSim will no longer support SDF files compressed in the Unix compress format (.Z), but will support the GNU zip format (.gz).  Therefore, ModelSim will read in compressed SDF files that are created only with GNU zip (gzip).  ModelSim does not require the file to have a .gz extension, but it will error on files that have a .Z extension.</li>
<li>
ModelSim's SystemC support has dependencies on both operating system version and C++ compiler version.  The OS support is slightly different than ModelSim's OS support for designs without SystemC content. Also, 64-bit compilation is not supported for SystemC designs.
<br>
Supported Operating Systems and C++ compilers:<br>
<ul>
<li>RedHat 7.3 and greater, gcc 3.2</li>
<li>RedHat EWS2.1/7.2 and greater, gcc 3.2.3 (ModelSim 5.8b and greater)</li>
<li>SunOS 5.6 and greater, gcc 3.2</li>
<li>HP-UX 11.0 and greater, aCC 3.45 (with associated patches)</li>
</ul>
</li>
<li>
ModelSim LE does not support VHDL. However, it does support Verilog and SystemC.</li>
<li>
CDEBUG compatibility information by platform.<BR>
<UL>
<LI>On HP-UX 11.0, ModelSim uses the built-in HP wdb 3.3 program as the underlying C/C++ debugger.  In order to run wdb successfully, you must have installed HP-UX PHSS_23842, or a superseding patch.  Without this patch installed, error messages will occur during CDEBUG startup.
<LI>On rs6000, gdb-6.0 works with gcc-3.2. Additionally, when creating shared objects, 'ld' (/bin/ld) should be used, not 'gcc'.
This combination works with AIX-5.1. On AIX-5.1  use gcc-3.2-aix51.
The native compiler /bin/cc is not compatible with gdb-6.0.
</UL>

</li>
<li>
The vcom compiler default language has been changed from VHDL-1987 to
VHDL-2002. To choose a specific language version:<br>
<UL>
<LI>select the appropriate
version from the compiler options menu in the GUI,<br>
<LI>invoke vcom using
switches -87, -93, or -2002, or<br>
<LI>set the VHDL93 variable in the [vcom] section of modelsim.ini.<BR>
Appropriate values for VHDL93 are:<br>
<UL>
<LI>0, 87, or 1987 for VHDL-1987;<br>
<LI>1, 93, or 1993 for VHDL-1993;<br>
<LI>2, 02, or 2002 for VHDL-2002.<br>
</UL>
</UL>
</li>
<li>
Although the vlog compiler currently supports some SystemVerilog features, these extensions are not enabled by default because they require new language keywords that may conflict with identifiers in existing code.  There are two ways to enable SystemVerilog features in vlog 5.8c: the first is by using the <b>-sv</b> command line option and the second is by naming the source file with a ".sv" suffix.</li>
<li>The following lists the supported platforms:
   <ul>
   <li>win32aloem - Windows 98, Me, NT, 2000, XP
   <li>sunos5aloem - Solaris 2.6, 7, 8, 9
   <li>hp700aloem - HP-UX 11
   <li>linuxaloem - RedHat 7.2 and higher.
   </ul>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="uidefects"></a><b>User Interface Defects Repaired in 5.8e</b>
<ul>
<li>
On linux only, a Tcl error occurred when the directory from which Modelsim was invoked was deleted from the Modelsim command line.</li>
<li>
The <b>change</b> command did not work on objects that were accessed through multiple access types.  For example, if S is a record with a field named nxt that is an access type to another record, the command <b>change s.nxt.field value</b> produced an error.</li>
<li>
The user interface opened 3 sockets to communicate with the kernel, but only closed 2 at the end of simulation. If too many sockets were opened the simulator hung on some platforms when file descriptor limits were exceeded.</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="verilogdefects"></a><b>Verilog Defects Repaired in 5.8e</b>
<ul>
<li>
Comparisons to signed literal constants were not always returning expected
results (eg. (signed_4bit_variable == 4'b1111) may return 0 when expecting 1).</li>
<li>
The system function $dist_uniform() was generating an error when the "start" argument was not less than the "end" argument.  The error was changed to a warning and the "start" value is now returned in this case. The behavior now compiles with the Verilog-2001 LRM.
</li>
<li>
Code coverage for Verilog conditions and expressions ignored expressions
containing integer literals or the '~' operator. Warning messages were added to the vlog compiler for expressions rejected by code coverage.</li>
<li>
Verilog trigger expressions containing an expression with a system function call  crashed in some cases if executed at time 0.  For example "always @($realtime != 0)" crashed the simulator.</li>
<li>
A continuous assignment referencing a bit-select of a vector net on the right-hand side produced incorrect results in some cases if that vector was driven by another continuous assignment with a concatenation as the right-hand side and if the design was compiled with <b>-fast</b>.</li>
<li>
Module inlining with <b>-fast</b> did not apply the net delay of a dominating net to the collapsed simulation net.</li>
<li>
A Verilog cell with conditional path delays and optimizes with the <b>-fast</b> option could produce a spurious known value near the beginning of simulation.</li>
<li>
SDF conditions that were very long (more than 500 characters after being stripped of whitespace and parentheses) failed to back annotate due to a string length limitation; the limitation has been temporarily doubled and will be re-engineered to be unlimited in a future release.
</li>
<li>
Restricting variable declaration assignments to module scope. Vlog was earlier compiling it in named block and tasks too, and generating incorrect results.</li>
<li>
A design having a concatenation connected to the port of an inlined module resulted in a compiler crash when compiled with <b>-fast</b> if the port was referenced with bit-selects or part-selects in lhs expressions and if the indices were hierarchical references or function calls.</li>
<li>
Bit vector slices used in arrays of instantiations were not indexed correctly for the port connection.</li>
<li>
Verilog gate-level cell modules compiled with <b>-fast</b> are not
compatible between the 5.8c and 5.8d releases of Modelsim.  Modules
compiled in 5.8c won't simulate in 5.8d and vice versa.
(Normally we support upwards compatibility, so 5.8c compiled
files *should* work in a 5.8d simulation.)
The 5.8e release correctly simulates these modules regardless
of which 5.8x version they were compiled in.
</li>
<li>
Implicit conditions in $setuphold and $recrem that conflict with explicit conditions on either a reference or data event were not being fully ignored.</li>
<li>
A sequential UDP latch connected to an RTL latch would immediately update its output.</li>
<li>
A problem relating to $readmem resulted in memory leaks and large load times.</li>
<li>
In rare cases, the simulator crashed when using designs with Verilog generate constructs. </li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="plidefects"></a><b>PLI Defects Repaired in 5.8e</b>
<ul>
<li>
The PLI function acc_next_bit() had a performance problem.</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="vhdldefects"></a><b>VHDL Defects Repaired in 5.8e</b>
<ul>
<li>
Under certain conditions examine/describe/mti_FindVar() crashed the simulator.
This occurred when a single architecture was large and contained subprogram declarations either in the architecture or within a process.</li>
<li>
Under certain conditions, code coverage was not able to handle an expression for condition or expression coverage. Warning messages have been added to vcom for these cases.</li>
<li>
When compiling with the <b>-87</b> command-line switch (or VHDL93=0 in the modelsim.ini file), only a warning was produced if a GENERATE statement had a declarative region. Internal compiler errors resulted when there was an attempt to reference items in the declarative region. The compiler was modified to report an error when there is a non-empty declarative region.</li>
<li>
Compilation for expression coverage <b>-cover e</b> failed when expression lengths were very long.  The threshold for failure has been doubled, and a future release will allow unlimited lengths.</li>
<li>
Certain VHDL designs crashed in vsim when code coverage was on and condition 
coverage was enabled.</li>
<li>
Compiling with optimization level <b>-O4</b> or higher produced wrong results for certain cases involving sequential signal assignments with multiple waveforms and constant values for the first waveform. Compiling with optimization level <b>-O1</b> or lower always produced correct results.</li>
<li>
Evaluation of CASE statements with more than 4 choices whose case expressions are of type bit_vector, in some cases, fail to execute the OTHERS choice.</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="flidefects"></a><b>FLI Defects Repaired in 5.8e</b>
<ul>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="vitaldefects"></a><b>VITAL Defects Repaired in 5.8e</b>
<ul>
<li>
In some cases multisource interconnect delays were calculated incorrectly when all path delays were zero.</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="systemcdefects"></a><b>SystemC Defects Repaired in 5.8e</b>
<ul>
<li>
ModelSim's detection of undebuggable SystemC signals and ports has been improved.  These signals or ports will simulate correctly but may not be debugged.  If ShowUnassociatedNameWarning is enabled in the "modelsim.ini" file, ModelSim issues a warning for each of these, affording the user the opportunity to adjust the source code. Otherwise, warnings will not be issued.</li>
<li>
The problem happens when a VHDL module instantiates a SystemC module and
the SystemC module name is not lower-cased. The result is that vcom cannot load the SystemC design unit.</li>
<li>
The waveform viewer in post-simulation was showing internal SystemC primitive channels with the mode field as "In".</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="psldefects"></a><b>PSL Defects Repaired in 5.8e</b>
<ul>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="mixeddefects"></a><b>Mixed Language Defects Repaired in 5.8e</b>
<ul>
<li>
A multisource interconnect delay in a mixed language design that traversed multiple levels of hierarchy gave incorrect results in certain cases.</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="generaldefects"></a><b>General Defects Repaired in 5.8e</b>
<ul>
<li>
In some cases, when GUI windows were manipulated in the middle of code coverage session, the coverage data was not update correctly at the end of a simulation run.
</li>
<li>
An error occurred while viewing the memory contents inside VHDL packages.</li>
<li>
vcover merge reports the following error message while merging two coverage database files:<br>
<code>
Bad pointer/access type passed to memory subsystem.
"Pointer may have been previously deallocated.(vlib-5) ****** Memory failure. *****".
</code></li>
<li>
Microsoft documents a list of illegal file names that are Windows device drivers.
If illegal names are included in the work library for module names, entity names, or architectures we change these to legal names. For this release we extended the list of illegal names that we recognize to include the complete list that Microsoft documents. We do this mapping on all platforms to create a portable library format. This mapping is not customer visible, except that prior to 5.8e a valid module name would fail to compile on Windows due to matching an illegal Windows file name.</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="mgcdefects"></a><b>Mentor Graphics DRs Repaired in 5.8e</b>
<ul>
<li>
DR 00204197 - Modelsim crash when selecting a SystemC object in the Structure window
</li>
<li>
DR 00199342 - Sequential UDP updating the output immediately.</li>
<li>
DR 00208362 - -coverage causes crash with "Bad Pointer Access".</li>
<li>
DR 00205088 - Incorrect sim results for 5.8 optimized simulation, worked in 5.7.</li>
<li>
DR 00208732 - vcom errors with -cover option.</li>
<li>
DR 00211064 - Wrong SDR error with option +delayed_timing_checks.</li>
<li>
DR 00208083 - X inputs caused 0/1 to be observed for primitive gates.</li>
<li>
DR 00203919 - Crashing issue with mti_FindVar.</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="knowndefects"></a><b>Known Defects in 5.8e</b>
<ul>
<li>
When you are creating a code coverage exclusion file, the filenames you enter
must use the same paths that were given for the file to vcom or 
vlog. Otherwise you will get an error:<br> 
<code>
** Warning: (vsim-3684) File 
'/u/xx/src/test.vhd' has no coverage data associated with it.
</code></li>
<li>
Toggle coverage currently counts zero-delay glitches as valid toggle data.</li>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="productchanges"></a><b>Product Changes to 5.8e</b>
<ul>
</ul>
<p>
<h4>
<hr WIDTH="100%"></h4>
<p><a NAME="newfeatures"></a><b>New Features Added to 5.8e</b>
<ul>
<li>
The vsim invocation option <b>-g</b> no longer truncates the given value to 32 bits.  For example <b>-g"p=40'hffff0000xx"</b> will now properly set a Verilog parameter 'p' to a 40-bit value.</li>
</ul>
</BODY>
</HTML>
